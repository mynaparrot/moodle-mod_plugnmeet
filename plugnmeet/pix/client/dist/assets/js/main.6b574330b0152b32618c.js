/*! For license information please see main.6b574330b0152b32618c.js.LICENSE.txt */
(self.webpackChunkplugnmeet_client=self.webpackChunkplugnmeet_client||[]).push([[179],{77410:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Abs:()=>r.SYM,Acos:()=>r.VGw,Acosh:()=>r.SpW,AdadeltaOptimizer:()=>r.zJI,AdagradOptimizer:()=>r.HeW,AdamOptimizer:()=>r.a4z,AdamaxOptimizer:()=>r.DBS,Add:()=>r.mm_,AddN:()=>r.Xze,All:()=>r.oT6,Any:()=>r.IKK,ArgMax:()=>r.sJF,ArgMin:()=>r.aJk,Asin:()=>r.M2y,Asinh:()=>r.qw7,Atan:()=>r.jMg,Atan2:()=>r.QCc,Atanh:()=>r.Oyi,AvgPool:()=>r.JhU,AvgPool3D:()=>r._k9,AvgPool3DGrad:()=>r.IMb,AvgPoolGrad:()=>r.ROF,BatchMatMul:()=>r.XLW,BatchToSpaceND:()=>r.zws,Bincount:()=>r.zvY,BroadcastArgs:()=>r.eEB,BroadcastTo:()=>r.Ly9,Cast:()=>r.RFZ,Ceil:()=>r.gJX,ClipByValue:()=>r.xnO,Complex:()=>r.Zz9,ComplexAbs:()=>r.yj2,Concat:()=>r.Eh3,Conv2D:()=>r.mhS,Conv2DBackpropFilter:()=>r.wUP,Conv2DBackpropInput:()=>r.wm,Conv3D:()=>r.x12,Conv3DBackpropFilterV2:()=>r.o2y,Conv3DBackpropInputV2:()=>r.ik2,Cos:()=>r.mc4,Cosh:()=>r.TR1,CropAndResize:()=>r.VcC,Cumprod:()=>r.Byc,Cumsum:()=>r.iHb,DataStorage:()=>r.JLz,DenseBincount:()=>r.QRR,DepthToSpace:()=>r.T0n,DepthwiseConv2dNative:()=>r.cie,DepthwiseConv2dNativeBackpropFilter:()=>r.sL$,DepthwiseConv2dNativeBackpropInput:()=>r.y7R,Diag:()=>r.$w,Dilation2D:()=>r.p4S,Dilation2DBackpropFilter:()=>r.Vn9,Dilation2DBackpropInput:()=>r.ekb,ENV:()=>r.ViN,Einsum:()=>r.$g6,Elu:()=>r.SX0,EluGrad:()=>r.HEU,Environment:()=>r.qAh,Equal:()=>r.hdR,Erf:()=>r.Omj,Exp:()=>r.NEP,ExpandDims:()=>r.YFo,Expm1:()=>r.Y0y,FFT:()=>r.vwp,Fill:()=>r.deh,FlipLeftRight:()=>r.Uyb,Floor:()=>r.OR,FloorDiv:()=>r.jeX,FromPixels:()=>r.eBW,FusedBatchNorm:()=>r.sHE,FusedConv2D:()=>r._V0,FusedDepthwiseConv2D:()=>r.luS,GatherNd:()=>r.q1x,GatherV2:()=>r.qi_,Greater:()=>r.iZT,GreaterEqual:()=>r.Acj,IFFT:()=>r.Qg5,Identity:()=>r.iJz,Imag:()=>r.J_u,IsFinite:()=>r.avt,IsInf:()=>r.iWB,IsNan:()=>r.r7n,KernelBackend:()=>r.Zuw,LRN:()=>r.eZ0,LRNGrad:()=>r.Hhh,LeakyRelu:()=>r.J$2,Less:()=>r.vtC,LessEqual:()=>r.CAk,LinSpace:()=>r.e7N,Log:()=>r.ZbH,Log1p:()=>r.kU,LogSoftmax:()=>r.qCd,LogicalAnd:()=>r.PYm,LogicalNot:()=>r.VfG,LogicalOr:()=>r.MZg,LowerBound:()=>r.qIC,Max:()=>r.YoZ,MaxPool:()=>r.mTV,MaxPool3D:()=>r.OAf,MaxPool3DGrad:()=>r.OU7,MaxPoolGrad:()=>r.OV7,MaxPoolWithArgmax:()=>r.vFR,Maximum:()=>r.BMI,Mean:()=>r.q2K,Min:()=>r.c17,Minimum:()=>r.q8u,MirrorPad:()=>r.jQs,Mod:()=>r.Vbg,MomentumOptimizer:()=>r.rIn,Multinomial:()=>r.NZg,Multiply:()=>r.wYn,Neg:()=>r.kuV,NonMaxSuppressionV3:()=>r.uv1,NonMaxSuppressionV4:()=>r.cye,NonMaxSuppressionV5:()=>r.W0H,NotEqual:()=>r.yQU,OP_SCOPE_SUFFIX:()=>r.zvA,OneHot:()=>r.we_,OnesLike:()=>r.qWM,Optimizer:()=>r.gaJ,OptimizerConstructors:()=>r.eEe,Pack:()=>r.QiL,PadV2:()=>r.lyA,Pool:()=>r.Kgp,Pow:()=>r.pe_,Prelu:()=>r.o0g,Prod:()=>r.DlI,RMSPropOptimizer:()=>r.gVI,Range:()=>r.e6w,Rank:()=>r.yw1,Real:()=>r.xJR,RealDiv:()=>r.oHH,Reciprocal:()=>r.$HU,Reduction:()=>r.IH3,Relu:()=>r.qkr,Relu6:()=>r.SbG,Reshape:()=>r.HZH,ResizeBilinear:()=>r._Yw,ResizeBilinearGrad:()=>r.zbQ,ResizeNearestNeighbor:()=>r.dpD,ResizeNearestNeighborGrad:()=>r.Hmb,Reverse:()=>r.mKl,RotateWithOffset:()=>r.b9H,Round:()=>r.e07,Rsqrt:()=>r.bV0,SGDOptimizer:()=>r.DYp,ScatterNd:()=>r.xQA,SearchSorted:()=>r.nr8,Select:()=>r.PhF,Selu:()=>r.oFR,Sigmoid:()=>r.a5O,Sign:()=>r.i5y,Sin:()=>r.RQH,Sinh:()=>r.wYB,Slice:()=>r.p2w,Softmax:()=>r.Gcp,Softplus:()=>r.MRv,SpaceToBatchND:()=>r.TQc,SparseFillEmptyRows:()=>r.O3z,SparseReshape:()=>r.nhH,SparseSegmentMean:()=>r.w3H,SparseSegmentSum:()=>r.ZjV,SparseToDense:()=>r.D2d,SplitV:()=>r.L8s,Sqrt:()=>r.FKq,Square:()=>r.bK0,SquaredDifference:()=>r._tC,Step:()=>r.h8e,StridedSlice:()=>r.jQk,StringNGrams:()=>r._JP,StringSplit:()=>r.s1s,StringToHashBucketFast:()=>r.XkS,Sub:()=>r.Tr8,Sum:()=>r.GBy,Tan:()=>r.sEM,Tanh:()=>r.MIZ,Tensor:()=>r.esB,TensorBuffer:()=>r.YDk,Tile:()=>r.n9L,TopK:()=>r.cWu,Transform:()=>r.wx7,Transpose:()=>r.G3Y,Unique:()=>r.kpP,Unpack:()=>r.ToN,UnsortedSegmentSum:()=>r.Qvg,UpperBound:()=>r.XDQ,Variable:()=>r._wD,ZerosLike:()=>r.RuY,_FusedMatMul:()=>r.usg,abs:()=>r.WnP,acos:()=>r.Khb,acosh:()=>r.__u,add:()=>r.IHx,addN:()=>r.QBD,all:()=>r.$6P,any:()=>r.YjB,argMax:()=>r.NqF,argMin:()=>r.vHJ,asin:()=>r.ZRM,asinh:()=>r.VfV,atan:()=>r.z4N,atan2:()=>r.fvJ,atanh:()=>r.C80,avgPool:()=>r.wS1,avgPool3d:()=>r.uR5,backend:()=>r.y3$,backend_util:()=>r.Wap,basicLSTMCell:()=>r.zEQ,batchNorm:()=>r.tgs,batchNorm2d:()=>r.Dxk,batchNorm3d:()=>r.JY5,batchNorm4d:()=>r.p3b,batchToSpaceND:()=>r.E4h,bincount:()=>r.yE8,booleanMaskAsync:()=>r.anm,broadcastArgs:()=>r.XsQ,broadcastTo:()=>r.UFq,broadcast_util:()=>r.Jyw,browser:()=>r.Xhn,buffer:()=>r.f3b,cast:()=>r.pju,ceil:()=>r.mDi,clipByValue:()=>r.iUl,clone:()=>r.d9v,complex:()=>r.PYB,concat:()=>r.zoF,concat1d:()=>r.gME,concat2d:()=>r.Izb,concat3d:()=>r.MNy,concat4d:()=>r.ZaL,conv1d:()=>r.PAt,conv2d:()=>r.Tek,conv2dTranspose:()=>r.bc,conv3d:()=>r.pdZ,conv3dTranspose:()=>r.$QV,copyRegisteredKernels:()=>r.T3b,cos:()=>r.mCk,cosh:()=>r.f9Y,cosineWindow:()=>r.mew,cumprod:()=>r.$Gn,cumsum:()=>r.zbp,customGrad:()=>r.cbc,denseBincount:()=>r.ppE,deprecationWarn:()=>r.MXe,depthToSpace:()=>r.nTT,depthwiseConv2d:()=>r.B10,device_util:()=>r.C2$,diag:()=>r.Ka3,dilation2d:()=>r.WmZ,disableDeprecationWarnings:()=>r.cFr,dispose:()=>r.B90,disposeVariables:()=>r.N8o,div:()=>r.hiC,divNoNan:()=>r.NTj,dot:()=>r.AKD,dropout:()=>r.rvX,einsum:()=>r.WYO,elu:()=>r.pyx,enableDebugMode:()=>r.Ra$,enableProdMode:()=>r.G48,enclosingPowerOfTwo:()=>r.GRh,engine:()=>r.SRH,env:()=>r.OBj,equal:()=>r.DgJ,erf:()=>r.qNN,euclideanNorm:()=>r.d2q,exp:()=>r.Qqt,expandDims:()=>r.dt4,expm1:()=>r.t$B,eye:()=>r.iyy,fft:()=>r.kp_,fill:()=>r.hlL,findBackend:()=>r.x3e,findBackendFactory:()=>r.zel,floor:()=>r.GWj,floorDiv:()=>r.qPi,fused:()=>r.imm,gather:()=>r.Iqj,gatherND:()=>r.dbB,gather_util:()=>r.DaI,getBackend:()=>r.N_N,getGradient:()=>r.ukX,getKernel:()=>r.pIF,getKernelsForBackend:()=>r.trD,grad:()=>r.UQy,grads:()=>r.tiA,greater:()=>r.pjt,greaterEqual:()=>r.brS,ifft:()=>r.Sxn,imag:()=>r.asL,image:()=>r.BHj,inTopKAsync:()=>r.V3u,io:()=>r.io,irfft:()=>r.wx0,isFinite:()=>r.xVT,isInf:()=>r.UWc,isNaN:()=>r.i2d,keep:()=>r.CnY,kernel_impls:()=>r.GDt,leakyRelu:()=>r.hi7,less:()=>r.d9m,lessEqual:()=>r.zN1,linalg:()=>r.$r2,linspace:()=>r.SX3,localResponseNormalization:()=>r.G9k,log:()=>r.cM7,log1p:()=>r.Krr,logSigmoid:()=>r.e_t,logSoftmax:()=>r.CmS,logSumExp:()=>r.l_t,logicalAnd:()=>r.HvI,logicalNot:()=>r.hJK,logicalOr:()=>r.K5V,logicalXor:()=>r.egP,losses:()=>r.MB5,lowerBound:()=>r.eab,matMul:()=>r.OI3,math:()=>r.mAU,max:()=>r.Fp7,maxPool:()=>r._sB,maxPool3d:()=>r.YQQ,maxPoolWithArgmax:()=>r.Ip$,maximum:()=>r.gWQ,mean:()=>r.J69,memory:()=>r.sq6,meshgrid:()=>r.ry_,min:()=>r.VV$,minimum:()=>r.LTh,mirrorPad:()=>r.VdP,mod:()=>r.wQq,moments:()=>r.Gi7,movingAverage:()=>r.p_,mul:()=>r.dC7,multiRNNCell:()=>r.rq4,multinomial:()=>r.SJ_,neg:()=>r.W76,nextFrame:()=>r.glt,norm:()=>r.KOy,notEqual:()=>r.Quu,oneHot:()=>r.lfX,ones:()=>r.iUs,onesLike:()=>r.JpU,op:()=>r.op,outerProduct:()=>r.N2O,pad:()=>r.vku,pad1d:()=>r.pNR,pad2d:()=>r.koy,pad3d:()=>r.t1L,pad4d:()=>r.lGY,pool:()=>r.d_R,pow:()=>r.sQ3,prelu:()=>r.AL3,print:()=>r.S0v,prod:()=>r.WVs,profile:()=>r.N5s,rand:()=>r.TN_,randomGamma:()=>r.wzB,randomNormal:()=>r.nGf,randomUniform:()=>r.LGj,range:()=>r.w6H,ready:()=>r.Cd_,real:()=>r.kwC,reciprocal:()=>r.M25,registerBackend:()=>r.jqO,registerGradient:()=>r.LiG,registerKernel:()=>r.wCN,relu:()=>r.UYe,relu6:()=>r.btT,removeBackend:()=>r.cjG,reshape:()=>r.XLQ,reverse:()=>r.GYS,reverse1d:()=>r.SDf,reverse2d:()=>r.diP,reverse3d:()=>r.sx7,reverse4d:()=>r.mG2,rfft:()=>r.QEs,round:()=>r.NMM,rsqrt:()=>r.bp0,scalar:()=>r.iD$,scatterND:()=>r.snQ,scatter_util:()=>r.yV1,searchSorted:()=>r.zcT,selu:()=>r.U8D,separableConv2d:()=>r.U_I,serialization:()=>r.m7h,setBackend:()=>r.CQI,setPlatform:()=>r.VYu,setdiff1dAsync:()=>r.ODp,sigmoid:()=>r.XD2,sign:()=>r.Xxe,signal:()=>r.tdS,sin:()=>r.O$l,sinh:()=>r.R_K,slice:()=>r.tPi,slice1d:()=>r.jZU,slice2d:()=>r.SmN,slice3d:()=>r.CnO,slice4d:()=>r.p0P,slice_util:()=>r.kuN,softmax:()=>r.XAC,softplus:()=>r.Wvh,spaceToBatchND:()=>r.fBT,sparse:()=>r.rVs,sparseToDense:()=>r.ers,spectral:()=>r.uN7,split:()=>r.Vl2,sqrt:()=>r._b3,square:()=>r.h62,squaredDifference:()=>r.$i,squeeze:()=>r.L9e,stack:()=>r.knu,step:()=>r.Nbs,stridedSlice:()=>r.NXj,string:()=>r.Z_8,sub:()=>r.luU,sum:()=>r.Smz,sumOutType:()=>r.z4k,tan:()=>r.ORZ,tanh:()=>r.AEp,tensor:()=>r.XeE,tensor1d:()=>r.RRF,tensor2d:()=>r.odF,tensor3d:()=>r.wOQ,tensor4d:()=>r.yXz,tensor5d:()=>r.Bfx,tensor6d:()=>r.xZs,tensor_util:()=>r.piX,test_util:()=>r.p3L,tidy:()=>r.lub,tile:()=>r.Gg6,time:()=>r.XVJ,topk:()=>r.hg7,train:()=>r.p_j,transpose:()=>r.p4s,truncatedNormal:()=>r.Xu6,unique:()=>r.Two,unregisterGradient:()=>r.bt3,unregisterKernel:()=>r.nEe,unsortedSegmentSum:()=>r.pUJ,unstack:()=>r.HHK,upcastType:()=>r.x8V,upperBound:()=>r.GaM,util:()=>r.D5U,valueAndGrad:()=>r.h76,valueAndGrads:()=>r.fNQ,variable:()=>r.VD$,variableGrads:()=>r.pnJ,version_core:()=>r.jTM,where:()=>r.arb,whereAsync:()=>r.itS,zeros:()=>r.lls,zerosLike:()=>r.P84});n(85186);var r=n(86931)},48456:(e,t,n)=>{"use strict";var r,o=n(85893),a=n(67294),i=n(20745),s=n(95998),l=n(39249),c=(n(93268),n(41796)),u=n(68718),d=n(26071),f=n(65538),p=null!==(r=window.STATIC_ASSETS_PATH)&&void 0!==r?r:"/assets";c.ZP.use(d.Z).use(u.Db).use(f.Z).init({debug:!1,fallbackLng:"en",interpolation:{escapeValue:!1},backend:{loadPath:p+"/locales/{{lng}}/{{ns}}.json"}});const m=c.ZP;var h,v=n(40575),y=(0,v.HF)({selectId:function(e){return e.userId},sortComparer:function(e,t){return e.isSpeaking&&t.isSpeaking?e.audioLevel-t.audioLevel:e.isSpeaking!==t.isSpeaking?e.isSpeaking?-1:1:e.lastSpokeAt!==t.lastSpokeAt?t.lastSpokeAt-e.lastSpokeAt:0}}),b=y.getSelectors((function(e){return e.activeSpeakers})),x=(0,v.oM)({name:"activeSpeakers",initialState:y.getInitialState(),reducers:{addSpeaker:y.addOne,addManySpeakers:y.addMany,setAllSpeakers:y.setAll,removeSpeakers:y.removeAll}}),g=(h=x.actions).addSpeaker,w=(h.addManySpeakers,h.removeSpeakers),S=h.setAllSpeakers;const _=x.reducer;var j,k=(0,v.HF)({selectId:function(e){return e.userId},sortComparer:function(e,t){return e.name.localeCompare(t.name)}}),N=k.getSelectors((function(e){return e.participants})),C=(0,v.oM)({name:"participants",initialState:k.getInitialState(),reducers:{addParticipant:k.addOne,removeParticipant:k.removeOne,updateParticipant:k.updateOne}}),E=(j=C.actions).addParticipant,T=j.removeParticipant,P=j.updateParticipant;const A=C.reducer;var R,F=(0,v.oM)({name:"session",initialState:{token:"",screenSharing:{isActive:!1,sharedBy:""},isActiveRtmpBroadcasting:!1,isActiveRecording:!1,isWebcamPaginating:!1,isStartup:!0,isChatServiceReady:!1,totalAudioSubscribers:0,totalVideoSubscribers:0,userDeviceType:"desktop",currentRoom:{sid:"",room_id:"",metadata:{room_title:"plugNmeet",is_recording:!1,is_active_rtmp:!1,room_features:{allow_webcams:!0,mute_on_start:!1,allow_screen_share:!0,allow_recording:!0,allow_rtmp:!0,allow_view_other_webcams:!0,allow_view_other_users_list:!0,admin_only_webcams:!1,chat_features:{allow_chat:!0,allow_file_upload:!0},shared_note_pad_features:{allowed_shared_note_pad:!1,is_active:!1,visible:!1},whiteboard_features:{allowed_whiteboard:!0,visible:!1,whiteboard_file_id:"default",file_name:"default",file_path:"default",total_pages:10},external_media_player_features:{allowed_external_media_player:!0,is_active:!1}}}}},reducers:{addToken:function(e,t){e.token=t.payload},toggleStartup:function(e,t){e.isStartup=t.payload},addCurrentUser:function(e,t){e.currentUser=t.payload},addCurrentRoom:function(e,t){e.currentRoom.room_id=t.payload.room_id,e.currentRoom.sid=t.payload.sid,t.payload.metadata&&(e.currentRoom.metadata=t.payload.metadata)},updateScreenSharing:function(e,t){e.screenSharing=t.payload},setWebcamPaginating:function(e,t){e.isWebcamPaginating=t.payload},updateCurrentUserMetadata:function(e,t){e.currentUser&&(e.currentUser.metadata=t.payload)},updateCurrentRoomMetadata:function(e,t){e.currentRoom&&(e.currentRoom.metadata=t.payload,e.isActiveRtmpBroadcasting=t.payload.is_active_rtmp,e.isActiveRecording=t.payload.is_recording)},updateIsChatServiceReady:function(e,t){e.isChatServiceReady=t.payload},updateTotalVideoSubscribers:function(e,t){e.totalVideoSubscribers=t.payload},updateTotalAudioSubscribers:function(e,t){e.totalAudioSubscribers=t.payload},updateMuteOnStart:function(e,t){e.currentRoom.metadata&&(e.currentRoom.metadata.room_features.mute_on_start=t.payload)},updateUserDeviceType:function(e,t){e.userDeviceType=t.payload}}}),I=(R=F.actions).addToken,O=R.toggleStartup,M=R.addCurrentUser,D=R.addCurrentRoom,U=R.updateScreenSharing,L=R.setWebcamPaginating,B=R.updateCurrentUserMetadata,W=R.updateCurrentRoomMetadata,V=R.updateIsChatServiceReady,G=R.updateTotalVideoSubscribers,H=R.updateTotalAudioSubscribers,z=R.updateMuteOnStart,Q=R.updateUserDeviceType;const X=F.reducer;var J,q,Y={type:"none"},$=null!==(J=window.STATIC_ASSETS_PATH)&&void 0!==J?J:"./assets",K=["architecture-5082700_1280","porch-691330_1280","saxon-switzerland-539418_1280","shibuyasky-4768679_1280"].map((function(e){return"".concat($,"/backgrounds/").concat(e,".jpg")})),Z={isActiveMicrophone:!1,isActiveWebcam:!1,isActiveChatPanel:!0,isActiveParticipantsPanel:!0,isActiveRaisehand:!1,isActiveRecording:!1,isActiveScreenshare:!1,isActiveSharedNotePad:!1,isActiveWhiteboard:!1,isMicMuted:!1,screenWidth:1024,screenHeight:500,showMicrophoneModal:!1,showVideoShareModal:!1,showLockSettingsModal:!1,showRtmpModal:!1,showExternalMediaPlayerModal:!1,totalUnreadChatMsgs:0,virtualBackground:Y},ee=(0,v.oM)({name:"bottomIconsActivity",initialState:Z,reducers:{updateIsActiveMicrophone:function(e,t){e.isActiveMicrophone=t.payload},updateIsMicMuted:function(e,t){e.isMicMuted=t.payload},updateIsActiveWebcam:function(e,t){e.isActiveWebcam=t.payload},updateIsActiveChatPanel:function(e,t){e.screenWidth<1024&&e.isActiveParticipantsPanel&&t.payload&&(e.isActiveParticipantsPanel=!1),e.isActiveChatPanel=t.payload,e.isActiveChatPanel&&(e.totalUnreadChatMsgs=0)},updateIsActiveParticipantsPanel:function(e,t){e.screenWidth<1024&&e.isActiveChatPanel&&t.payload&&(e.isActiveChatPanel=!1),e.isActiveParticipantsPanel=t.payload},updateIsActiveRaisehand:function(e,t){e.isActiveRaisehand=t.payload},updateIsActiveRecording:function(e,t){e.isActiveRecording=t.payload},updateIsActiveScreenshare:function(e,t){e.isActiveScreenshare=t.payload,e.isActiveScreenshare&&(e.isActiveSharedNotePad=!1,e.isActiveWhiteboard=!1,e.isActiveParticipantsPanel=!1)},updateIsActiveSharedNotePad:function(e,t){e.isActiveSharedNotePad=t.payload,e.isActiveSharedNotePad&&(e.isActiveParticipantsPanel=!1)},updateIsActiveWhiteboard:function(e,t){e.isActiveWhiteboard=t.payload,e.isActiveWhiteboard&&(e.isActiveParticipantsPanel=!1)},updateScreenWidth:function(e,t){e.screenWidth=t.payload},updateScreenHeight:function(e,t){e.screenHeight=t.payload},updateShowMicrophoneModal:function(e,t){e.showMicrophoneModal=t.payload},updateShowVideoShareModal:function(e,t){e.showVideoShareModal=t.payload},updateShowLockSettingsModal:function(e,t){e.showLockSettingsModal=t.payload},updateShowRtmpModal:function(e,t){e.showRtmpModal=t.payload},updateShowExternalMediaPlayerModal:function(e,t){e.showExternalMediaPlayerModal=t.payload},updateTotalUnreadChatMsgs:function(e){e.isActiveChatPanel||(e.totalUnreadChatMsgs+=1)},updateVirtualBackground:function(e,t){e.virtualBackground=t.payload}}}),te=(q=ee.actions).updateIsActiveMicrophone,ne=q.updateIsMicMuted,re=q.updateIsActiveWebcam,oe=q.updateIsActiveChatPanel,ae=q.updateIsActiveParticipantsPanel,ie=q.updateIsActiveRaisehand,se=(q.updateIsActiveRecording,q.updateIsActiveScreenshare),le=q.updateIsActiveSharedNotePad,ce=q.updateIsActiveWhiteboard,ue=q.updateShowMicrophoneModal,de=q.updateShowVideoShareModal,fe=q.updateShowLockSettingsModal,pe=q.updateShowRtmpModal,me=q.updateShowExternalMediaPlayerModal,he=q.updateScreenWidth,ve=q.updateScreenHeight,ye=q.updateTotalUnreadChatMsgs,be=q.updateVirtualBackground;const xe=ee.reducer;var ge,we=(0,v.HF)({selectId:function(e){return e.message_id},sortComparer:function(e,t){var n=new Date(e.time),r=new Date(t.time);return n.getTime()>r.getTime()?1:n.getTime()<r.getTime()?-1:0}}),Se=we.getSelectors((function(e){return e.chatMessages})),_e=(0,v.oM)({name:"chat-messages",initialState:we.getInitialState(),reducers:{addChatMessage:we.addOne,removeChatMessage:we.removeOne,updateChatMessage:we.updateOne}}),je=(ge=_e.actions).addChatMessage;ge.removeChatMessage,ge.updateChatMessage;const ke=_e.reducer;var Ne,Ce=n(95591),Ee={isShowRoomSettingsModal:!1,isShowKeyboardShortcuts:!1,audioDevices:[],videoDevices:[],selectedAudioDevice:"",selectedVideoDevice:"",playAudioNotification:!1,activateWebcamsView:!0,activeScreenSharingView:!0,allowPlayAudioNotification:!0,roomAudioVolume:1,roomVideoQuality:Ce.SF.HIGH},Te=(0,v.oM)({name:"room-settings",initialState:Ee,reducers:{updateShowRoomSettingsModal:function(e,t){e.isShowRoomSettingsModal=t.payload},updateShowKeyboardShortcutsModal:function(e,t){e.isShowKeyboardShortcuts=t.payload},addAudioDevices:function(e,t){e.audioDevices=t.payload},addVideoDevices:function(e,t){e.videoDevices=t.payload},updateSelectedAudioDevice:function(e,t){e.selectedAudioDevice=t.payload},updateSelectedVideoDevice:function(e,t){e.selectedVideoDevice=t.payload},updatePlayAudioNotification:function(e,t){e.playAudioNotification=t.payload},updateActivateWebcamsView:function(e,t){e.activateWebcamsView=t.payload},updateActiveScreenSharingView:function(e,t){e.activeScreenSharingView=t.payload},updateAllowPlayAudioNotification:function(e,t){e.allowPlayAudioNotification=t.payload},updateRoomAudioVolume:function(e,t){e.roomAudioVolume=t.payload},updateRoomVideoQuality:function(e,t){e.roomVideoQuality=t.payload}}}),Pe=(Ne=Te.actions).addAudioDevices,Ae=Ne.addVideoDevices,Re=Ne.updateSelectedAudioDevice,Fe=Ne.updateSelectedVideoDevice,Ie=Ne.updatePlayAudioNotification,Oe=Ne.updateShowRoomSettingsModal,Me=Ne.updateActivateWebcamsView,De=Ne.updateActiveScreenSharingView,Ue=Ne.updateAllowPlayAudioNotification,Le=Ne.updateShowKeyboardShortcutsModal,Be=Ne.updateRoomAudioVolume,We=Ne.updateRoomVideoQuality;const Ve=Te.reducer;var Ge,He=(0,v.oM)({name:"whiteboard",initialState:{whiteboardFileId:"default",fileName:"default",filePath:"default",totalPages:10,currentPage:1,excalidrawElements:"",mousePointerLocation:"",whiteboardFiles:"",requestedWhiteboardData:{requested:!1,sendTo:""}},reducers:{updateExcalidrawElements:function(e,t){e.excalidrawElements=t.payload},updateMousePointerLocation:function(e,t){e.mousePointerLocation=t.payload},addWhiteboardFile:function(e,t){var n=[];e.whiteboardFiles&&(n=JSON.parse(e.whiteboardFiles)),n.push(t.payload),e.whiteboardFiles=JSON.stringify(n)},addWhiteboardFileAsJSON:function(e,t){e.whiteboardFiles=t.payload},updateRequestedWhiteboardData:function(e,t){e.requestedWhiteboardData=t.payload},setWhiteboardCurrentPage:function(e,t){e.currentPage=t.payload},addWhiteboardOfficeFile:function(e,t){e.whiteboardFileId=t.payload.fileId,e.fileName=t.payload.fileName,e.filePath=t.payload.filePath,e.totalPages=t.payload.totalPages,e.whiteboardFiles=t.payload.pageFiles,t.payload.currenPage?e.currentPage=t.payload.currenPage:e.currentPage=1}}}),ze=(Ge=He.actions).updateExcalidrawElements,Qe=Ge.updateMousePointerLocation,Xe=Ge.addWhiteboardFile,Je=Ge.addWhiteboardFileAsJSON,qe=Ge.updateRequestedWhiteboardData,Ye=Ge.setWhiteboardCurrentPage,$e=Ge.addWhiteboardOfficeFile;const Ke=He.reducer;var Ze,et=(0,v.oM)({name:"externalMediaPlayer",initialState:{action:"",seekTo:-1},reducers:{addExternalMediaPlayerAction:function(e,t){e.action=t.payload},externalMediaPlayerSeekTo:function(e,t){e.seekTo=t.payload},resetExternalMediaPlayer:function(e){e.action="",e.seekTo=-1}}}),tt=(Ze=et.actions).addExternalMediaPlayerAction,nt=Ze.externalMediaPlayerSeekTo,rt=Ze.resetExternalMediaPlayer;const ot=et.reducer;var at=(0,v.xC)({reducer:{participants:A,activeSpeakers:_,session:X,bottomIconsActivity:xe,chatMessages:ke,roomSettings:Ve,whiteboard:Ke,externalMediaPlayer:ot},devTools:!1}),it=function(){return(0,s.I0)()},st=s.v9,lt=n(22327),ct=function(){return ct=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ct.apply(this,arguments)};const ut=function(e){var t,n=e.title,r=e.text,a=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";return(0,o.jsxs)("div",ct({id:"errorPage",className:"error-page h-screen w-full flex items-center justify-center"},{children:[(0,o.jsx)("div",{className:"error-app-bg absolute w-full h-full left-0 top-0 object-cover pointer-events-none ",style:{backgroundImage:'url("'.concat(a,'/imgs/app-banner.jpg")')}}),(0,o.jsx)("div",ct({className:"content relative z-20 text-center bg-white rounded-xl shadow-lg h-80 w-[450px] flex items-center justify-center"},{children:(0,o.jsxs)("div",ct({className:"inner text-center"},{children:[(0,o.jsx)("h2",ct({className:"text-3xl font-medium mb-4"},{children:n})),(0,o.jsx)("p",{children:r})]}))}))]}))};var dt=function(){return dt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},dt.apply(this,arguments)};const ft=function(e){var t=e.text;return(0,o.jsx)("div",dt({className:"loader opacity-1 fixed top-0 left-0 w-full h-full bg-white/90 z-[999] flex flex-wrap items-center justify-center"},{children:(0,o.jsxs)("div",dt({className:"inner"},{children:[(0,o.jsxs)("div",dt({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]})),(0,o.jsx)("p",dt({className:"block w-full text-center relative bottom-4 capitalize"},{children:t}))]}))}))};var pt=n(20573),mt=n(47031),ht=n(41039),vt=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},yt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function bt(e){return vt(this,void 0,void 0,(function(){var t,n,r,o,a,i;return yt(this,(function(s){switch(s.label){case 0:return t={audio:!0},"videoinput"===e&&(t={video:!0}),[4,navigator.mediaDevices.getUserMedia(t)];case 1:return n=s.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:if((r=(r=s.sent()).filter((function(t){return t.kind===e}))).length>1&&"default"===r[0].deviceId){for(o=r[0],a=1;a<r.length;a+=1)if(r[a].groupId===o.groupId){i=r[0],r[0]=r[a],r[a]=i;break}return[2,r.filter((function(e){return e!==o}))]}return n.getTracks().forEach((function(e){e.stop()})),[2,r]}}))}))}var xt=function(e){return e.toString(16).padStart(2,"0")},gt=function(e){void 0===e&&(e=20);var t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Array.from(t,xt).join("")},wt=function(e){void 0===e&&(e=10);var t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Number(t.join(""))},St=function(){var e,t=null!==(e=window.DEFAULT_SCREEN_SHARE_RESOLUTION)&&void 0!==e?e:"h1080fps15",n=Ce.Ri.h1080fps15.resolution;switch(t){case"h360fps3":n=Ce.Ri.h360fps3.resolution;break;case"h720fps5":n=Ce.Ri.h720fps5.resolution;break;case"h720fps15":n=Ce.Ri.h720fps15.resolution;break;case"h1080fps15":n=Ce.Ri.h1080fps15.resolution;break;case"h1080fps30":n=Ce.Ri.h1080fps30.resolution}return n},_t=function(){return _t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_t.apply(this,arguments)};const jt=function(e){var t=e.deviceId,n=e.onSourcePlayback,r=e.onMediaStream,i=(0,a.useRef)(null);(0,a.useEffect)((function(){var e=i.current,n={video:{deviceId:t}};return navigator.mediaDevices.getUserMedia(n).then((function(t){e&&(r(t),e.srcObject=t)})),function(){e&&(e.pause(),e.removeAttribute("src"))}}),[t]);return(0,o.jsx)("div",_t({className:"preview-camera-webcam"},{children:(0,o.jsx)("video",{className:"my-5 w-full",ref:i,autoPlay:!0,height:"50",onLoadedData:function(e){var t,r,o=e.target;n({htmlElement:o,width:null!==(t=o.videoWidth)&&void 0!==t?t:330,height:null!==(r=o.videoHeight)&&void 0!==r?r:200})}})}))};var kt={"640x360":[640,360],"256x256":[256,256],"256x144":[256,144],"160x96":[160,96]},Nt={model:"meet",backend:"wasmSimd",inputResolution:"160x96",pipeline:"canvas2dCpu"};var Ct=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Et=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Tt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};function Pt(e,t,n,r,o,a,i){var s=r.getContext("2d"),l=Tt(kt[n.inputResolution],2),c=l[0],u=l[1],d=c*u,f=new ImageData(c,u),p=document.createElement("canvas");p.width=c,p.height=u;var m=document.createElement("img");m.crossOrigin="anonymous",m.src=t.url;var h,v=p.getContext("2d"),y=a._getInputMemoryOffset()/4,b=a._getOutputMemoryOffset()/4;function x(){return Ct(this,void 0,void 0,(function(){var e,t;return Et(this,(function(n){switch(n.label){case 0:return[4,o.segmentPerson(p)];case 1:for(e=n.sent(),t=0;t<d;t++)f.data[4*t+3]=e.data[t]?255:0;return v.putImageData(f,0,0),[2]}}))}))}return{render:function(){return Ct(this,void 0,void 0,(function(){return Et(this,(function(r){switch(r.label){case 0:return"none"!==t.type&&function(){if(v.drawImage(e.htmlElement,0,0,e.width,e.height,0,0,c,u),"meet"===n.model||"mlkit"===n.model)for(var t=v.getImageData(0,0,c,u),r=0;r<d;r++)a.HEAPF32[y+3*r]=t.data[4*r]/255,a.HEAPF32[y+3*r+1]=t.data[4*r+1]/255,a.HEAPF32[y+3*r+2]=t.data[4*r+2]/255}(),i(),"none"===t.type?[3,3]:"bodyPix"!==n.model?[3,2]:[4,x()];case 1:return r.sent(),[3,3];case 2:!function(){a._runInference();for(var e=0;e<d;e++)if("meet"===n.model){var t=a.HEAPF32[b+2*e],r=a.HEAPF32[b+2*e+1],o=Math.max(t,r),i=Math.exp(t-o),s=Math.exp(r-o);f.data[4*e+3]=255*s/(i+s)}else if("mlkit"===n.model){r=a.HEAPF32[b+e];f.data[4*e+3]=255*r}v.putImageData(f,0,0)}(),r.label=3;case 3:return i(),function(){s.globalCompositeOperation="copy",s.filter="none",(null===h||void 0===h?void 0:h.smoothSegmentationMask)&&("blur"===t.type?s.filter="blur(8px)":"image"===t.type&&(s.filter="blur(4px)"));"none"!==t.type&&(s.drawImage(p,0,0,c,u,0,0,e.width,e.height),s.globalCompositeOperation="source-in",s.filter="none");s.drawImage(e.htmlElement,0,0),"blur"===t.type?(s.globalCompositeOperation="destination-over",s.filter="blur(8px)",s.drawImage(e.htmlElement,0,0)):"image"===t.type&&(s.globalCompositeOperation="destination-over",function(e,t,n,r,o,a,i,s){2===arguments.length&&(n=r=0,o=e.canvas.width,a=e.canvas.height);(i="number"===typeof i?i:.5)<0&&(i=0);(s="number"===typeof s?s:.5)<0&&(s=0);i>1&&(i=1);s>1&&(s=1);var l,c,u,d,f=t.width,p=t.height,m=Math.min(o/f,a/p),h=f*m,v=p*m,y=1;h<o&&(y=o/h);Math.abs(y-1)<1e-14&&v<a&&(y=a/v);(l=(f-(u=f/((h*=y)/o)))*i)<0&&(l=0);(c=(p-(d=p/((v*=y)/a)))*s)<0&&(c=0);u>f&&(u=f);d>p&&(d=p);e.drawImage(t,l,c,u,d,n,r,o,a)}(s,m,0,0,s.canvas.width,s.canvas.height,.5,.5))}(),[2]}}))}))},updatePostProcessingConfig:function(e){h=e},cleanUp:function(){}}}var At=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Rt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ft=String.raw;function It(e,t,n,r,o){var a=function(e,t,n){var r=e.createProgram();if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw new Error("Could not link WebGL program: ".concat(e.getProgramInfoLog(r)));return r}(e,t,n),i=e.getAttribLocation(a,"a_position");e.enableVertexAttribArray(i),e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0);var s=e.getAttribLocation(a,"a_texCoord");return e.enableVertexAttribArray(s),e.bindBuffer(e.ARRAY_BUFFER,o),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),a}function Ot(e,t,n){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error("Could not compile shader: ".concat(e.getShaderInfoLog(r)));return r}function Mt(e,t,n,r,o,a){void 0===o&&(o=e.NEAREST),void 0===a&&(a=e.NEAREST);var i=e.createTexture();return e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,a),e.texStorage2D(e.TEXTURE_2D,1,t,n,r),i}function Dt(e,t,n,r,o,a,i){return At(this,void 0,void 0,(function(){var s,l;return Rt(this,(function(c){switch(c.label){case 0:return s=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0),e.flush(),[4,Ut(e,s)];case 1:return l=c.sent(),e.deleteSync(s),l!==e.WAIT_FAILED&&(e.bindBuffer(t,n),e.getBufferSubData(t,r,o,a,i),e.bindBuffer(t,null)),[2]}}))}))}function Ut(e,t){return new Promise((function(n){requestAnimationFrame((function r(){var o=e.clientWaitSync(t,0,0);o!==e.WAIT_FAILED?o!==e.TIMEOUT_EXPIRED?n(o):requestAnimationFrame(r):n(o)}))}))}var Lt,Bt,Wt,Vt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};function Gt(e,t,n,r,o,a){var i=function(e,t,n,r,o,a){var i=Ft(Lt||(Lt=Vt(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform vec2 u_texelSize;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    const float offset[5] = float[](0.0, 1.0, 2.0, 3.0, 4.0);\n    const float weight[5] = float[](0.2270270270, 0.1945945946, 0.1216216216,\n      0.0540540541, 0.0162162162);\n\n    void main() {\n      vec4 centerColor = texture(u_inputFrame, v_texCoord);\n      float personMask = texture(u_personMask, v_texCoord).a;\n\n      vec4 frameColor = centerColor * weight[0] * (1.0 - personMask);\n\n      for (int i = 1; i < 5; i++) {\n        vec2 offset = vec2(offset[i]) * u_texelSize;\n\n        vec2 texCoord = v_texCoord + offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n\n        texCoord = v_texCoord - offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n      }\n      outColor = vec4(frameColor.rgb + (1.0 - frameColor.a) * centerColor.rgb, 1.0);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform vec2 u_texelSize;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    const float offset[5] = float[](0.0, 1.0, 2.0, 3.0, 4.0);\n    const float weight[5] = float[](0.2270270270, 0.1945945946, 0.1216216216,\n      0.0540540541, 0.0162162162);\n\n    void main() {\n      vec4 centerColor = texture(u_inputFrame, v_texCoord);\n      float personMask = texture(u_personMask, v_texCoord).a;\n\n      vec4 frameColor = centerColor * weight[0] * (1.0 - personMask);\n\n      for (int i = 1; i < 5; i++) {\n        vec2 offset = vec2(offset[i]) * u_texelSize;\n\n        vec2 texCoord = v_texCoord + offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n\n        texCoord = v_texCoord - offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n      }\n      outColor = vec4(frameColor.rgb + (1.0 - frameColor.a) * centerColor.rgb, 1.0);\n    }\n  "]))),s=.5,l=a.width*s,c=a.height*s,u=1/l,d=1/c,f=Ot(e,e.FRAGMENT_SHADER,i),p=It(e,t,f,n,r),m=e.getUniformLocation(p,"u_inputFrame"),h=e.getUniformLocation(p,"u_personMask"),v=e.getUniformLocation(p,"u_texelSize"),y=Mt(e,e.RGBA8,l,c,e.NEAREST,e.LINEAR),b=Mt(e,e.RGBA8,l,c,e.NEAREST,e.LINEAR),x=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,x),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,y,0);var g=e.createFramebuffer();function w(){e.viewport(0,0,l,c),e.useProgram(p),e.uniform1i(m,0),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,o);for(var t=0;t<3;t++)e.uniform2f(v,0,d),e.bindFramebuffer(e.FRAMEBUFFER,x),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,y),e.uniform1i(m,2),e.uniform2f(v,u,0),e.bindFramebuffer(e.FRAMEBUFFER,g),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.bindTexture(e.TEXTURE_2D,b)}function S(){e.deleteFramebuffer(g),e.deleteFramebuffer(x),e.deleteTexture(b),e.deleteTexture(y),e.deleteProgram(p),e.deleteShader(f)}return e.bindFramebuffer(e.FRAMEBUFFER,g),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,b,0),e.useProgram(p),e.uniform1i(h,1),{render:w,cleanUp:S}}(e,t,n,r,o,a),s=function(e,t,n,r){var o=Ft(Bt||(Bt=Vt(["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "],["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "]))),a=Ft(Wt||(Wt=Vt(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_blurredInputFrame;\n    uniform vec2 u_coverage;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec3 color = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 blurredColor = texture(u_blurredInputFrame, v_texCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(mix(blurredColor, color, personMask), 1.0);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_blurredInputFrame;\n    uniform vec2 u_coverage;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec3 color = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 blurredColor = texture(u_blurredInputFrame, v_texCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(mix(blurredColor, color, personMask), 1.0);\n    }\n  "]))),i=r.width,s=r.height,l=Ot(e,e.VERTEX_SHADER,o),c=Ot(e,e.FRAGMENT_SHADER,a),u=It(e,l,c,t,n),d=e.getUniformLocation(u,"u_inputFrame"),f=e.getUniformLocation(u,"u_personMask"),p=e.getUniformLocation(u,"u_blurredInputFrame"),m=e.getUniformLocation(u,"u_coverage");function h(){e.viewport(0,0,i,s),e.useProgram(u),e.bindFramebuffer(e.FRAMEBUFFER,null),e.drawArrays(e.TRIANGLE_STRIP,0,4)}function v(t){e.useProgram(u),e.uniform2f(m,t[0],t[1])}function y(){e.deleteProgram(u),e.deleteShader(c),e.deleteShader(l)}return e.useProgram(u),e.uniform1i(d,0),e.uniform1i(f,1),e.uniform1i(p,2),e.uniform2f(m,0,1),{render:h,updateCoverage:v,cleanUp:y}}(e,n,r,a);return{render:function(){i.render(),s.render()},updateCoverage:function(e){s.updateCoverage(e)},cleanUp:function(){s.cleanUp(),i.cleanUp()}}}var Ht,zt,Qt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};var Xt,Jt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},qt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};var Yt,$t=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Kt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};var Zt,en=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},tn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};function nn(e,t,n,r,o,a){var i=Ft(Zt||(Zt=en(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      outColor = texture(u_inputFrame, v_texCoord);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      outColor = texture(u_inputFrame, v_texCoord);\n    }\n  "]))),s=a._getInputMemoryOffset()/4,l=tn(kt[o.inputResolution],2),c=l[0],u=l[1],d=c*u,f=Ot(e,e.FRAGMENT_SHADER,i),p=It(e,t,f,n,r),m=e.getUniformLocation(p,"u_inputFrame"),h=Mt(e,e.RGBA8,c,u),v=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,v),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,h,0);var y=new Uint8Array(4*d);return e.useProgram(p),e.uniform1i(m,0),{render:function(){e.viewport(0,0,c,u),e.useProgram(p),e.bindFramebuffer(e.FRAMEBUFFER,v),e.drawArrays(e.TRIANGLE_STRIP,0,4),function(e,t,n,r,o,a,i,s){At(this,void 0,void 0,(function(){var l;return Rt(this,(function(c){switch(c.label){case 0:return l=e.createBuffer(),e.bindBuffer(e.PIXEL_PACK_BUFFER,l),e.bufferData(e.PIXEL_PACK_BUFFER,s.byteLength,e.STREAM_READ),e.readPixels(t,n,r,o,a,i,0),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),[4,Dt(e,e.PIXEL_PACK_BUFFER,l,0,s)];case 1:return c.sent(),e.deleteBuffer(l),[2,s]}}))}))}(e,0,0,c,u,e.RGBA,e.UNSIGNED_BYTE,y);for(var t=0;t<d;t++){var n=s+3*t,r=4*t;a.HEAPF32[n]=y[r]/255,a.HEAPF32[n+1]=y[r+1]/255,a.HEAPF32[n+2]=y[r+2]/255}},cleanUp:function(){e.deleteFramebuffer(v),e.deleteTexture(h),e.deleteProgram(p),e.deleteShader(f)}}}var rn,on=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},an=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};var sn,ln=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},cn=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},un=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},dn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};function fn(e,t,n,r,o,a,i){var s=Ft(sn||(sn=ln(["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      gl_Position = vec4(a_position, 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "],["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      gl_Position = vec4(a_position, 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "]))),l=e.width,c=e.height,u=dn(kt[r.inputResolution],2),d=u[0],f=u[1],p=o.getContext("webgl2"),m=Ot(p,p.VERTEX_SHADER,s),h=p.createVertexArray();p.bindVertexArray(h);var v=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,v),p.bufferData(p.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),p.STATIC_DRAW);var y=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,y),p.bufferData(p.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),p.STATIC_DRAW);var b=p.createTexture();p.bindTexture(p.TEXTURE_2D,b),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST);var x=Mt(p,p.RGBA8,d,f),g=Mt(p,p.RGBA8,l,c),w=nn(p,m,v,y,r,a),S="meet"===r.model?function(e,t,n,r,o,a,i){var s=Ft(rn||(rn=on(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec2 segmentation = texture(u_inputSegmentation, v_texCoord).rg;\n      float shift = max(segmentation.r, segmentation.g);\n      float backgroundExp = exp(segmentation.r - shift);\n      float personExp = exp(segmentation.g - shift);\n      outColor = vec4(vec3(0.0), personExp / (backgroundExp + personExp));\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec2 segmentation = texture(u_inputSegmentation, v_texCoord).rg;\n      float shift = max(segmentation.r, segmentation.g);\n      float backgroundExp = exp(segmentation.r - shift);\n      float personExp = exp(segmentation.g - shift);\n      outColor = vec4(vec3(0.0), personExp / (backgroundExp + personExp));\n    }\n  "]))),l=a._getOutputMemoryOffset()/4,c=an(kt[o.inputResolution],2),u=c[0],d=c[1],f=Ot(e,e.FRAGMENT_SHADER,s),p=It(e,t,f,n,r),m=e.getUniformLocation(p,"u_inputSegmentation"),h=Mt(e,e.RG32F,u,d),v=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,v),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.useProgram(p),e.uniform1i(m,1),{render:function(){e.viewport(0,0,u,d),e.useProgram(p),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,h),e.texSubImage2D(e.TEXTURE_2D,0,0,0,u,d,e.RG,e.FLOAT,a.HEAPF32,l),e.bindFramebuffer(e.FRAMEBUFFER,v),e.drawArrays(e.TRIANGLE_STRIP,0,4)},cleanUp:function(){e.deleteFramebuffer(v),e.deleteTexture(h),e.deleteProgram(p),e.deleteShader(f)}}}(p,m,v,y,r,a,x):function(e,t,n,r,o,a,i){var s=Ft(Yt||(Yt=$t(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      float segmentation = texture(u_inputSegmentation, v_texCoord).r;\n      outColor = vec4(vec3(0.0), segmentation);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      float segmentation = texture(u_inputSegmentation, v_texCoord).r;\n      outColor = vec4(vec3(0.0), segmentation);\n    }\n  "]))),l=a._getOutputMemoryOffset()/4,c=Kt(kt[o.inputResolution],2),u=c[0],d=c[1],f=Ot(e,e.FRAGMENT_SHADER,s),p=It(e,t,f,n,r),m=e.getUniformLocation(p,"u_inputSegmentation"),h=Mt(e,e.R32F,u,d),v=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,v),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.useProgram(p),e.uniform1i(m,1),{render:function(){e.viewport(0,0,u,d),e.useProgram(p),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,h),e.texSubImage2D(e.TEXTURE_2D,0,0,0,u,d,e.RED,e.FLOAT,a.HEAPF32,l),e.bindFramebuffer(e.FRAMEBUFFER,v),e.drawArrays(e.TRIANGLE_STRIP,0,4)},cleanUp:function(){e.deleteFramebuffer(v),e.deleteTexture(h),e.deleteProgram(p),e.deleteShader(f)}}}(p,m,v,y,r,a,x),_=function(e,t,n,r,o,a,i,s){var l=Ft(Xt||(Xt=Jt(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_segmentationMask;\n    uniform vec2 u_texelSize;\n    uniform float u_step;\n    uniform float u_radius;\n    uniform float u_offset;\n    uniform float u_sigmaTexel;\n    uniform float u_sigmaColor;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    float gaussian(float x, float sigma) {\n      float coeff = -0.5 / (sigma * sigma * 4.0 + 1.0e-6);\n      return exp((x * x) * coeff);\n    }\n\n    void main() {\n      vec2 centerCoord = v_texCoord;\n      vec3 centerColor = texture(u_inputFrame, centerCoord).rgb;\n      float newVal = 0.0;\n\n      float spaceWeight = 0.0;\n      float colorWeight = 0.0;\n      float totalWeight = 0.0;\n\n      // Subsample kernel space.\n      for (float i = -u_radius + u_offset; i <= u_radius; i += u_step) {\n        for (float j = -u_radius + u_offset; j <= u_radius; j += u_step) {\n          vec2 shift = vec2(j, i) * u_texelSize;\n          vec2 coord = vec2(centerCoord + shift);\n          vec3 frameColor = texture(u_inputFrame, coord).rgb;\n          float outVal = texture(u_segmentationMask, coord).a;\n\n          spaceWeight = gaussian(distance(centerCoord, coord), u_sigmaTexel);\n          colorWeight = gaussian(distance(centerColor, frameColor), u_sigmaColor);\n          totalWeight += spaceWeight * colorWeight;\n\n          newVal += spaceWeight * colorWeight * outVal;\n        }\n      }\n      newVal /= totalWeight;\n\n      outColor = vec4(vec3(0.0), newVal);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_segmentationMask;\n    uniform vec2 u_texelSize;\n    uniform float u_step;\n    uniform float u_radius;\n    uniform float u_offset;\n    uniform float u_sigmaTexel;\n    uniform float u_sigmaColor;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    float gaussian(float x, float sigma) {\n      float coeff = -0.5 / (sigma * sigma * 4.0 + 1.0e-6);\n      return exp((x * x) * coeff);\n    }\n\n    void main() {\n      vec2 centerCoord = v_texCoord;\n      vec3 centerColor = texture(u_inputFrame, centerCoord).rgb;\n      float newVal = 0.0;\n\n      float spaceWeight = 0.0;\n      float colorWeight = 0.0;\n      float totalWeight = 0.0;\n\n      // Subsample kernel space.\n      for (float i = -u_radius + u_offset; i <= u_radius; i += u_step) {\n        for (float j = -u_radius + u_offset; j <= u_radius; j += u_step) {\n          vec2 shift = vec2(j, i) * u_texelSize;\n          vec2 coord = vec2(centerCoord + shift);\n          vec3 frameColor = texture(u_inputFrame, coord).rgb;\n          float outVal = texture(u_segmentationMask, coord).a;\n\n          spaceWeight = gaussian(distance(centerCoord, coord), u_sigmaTexel);\n          colorWeight = gaussian(distance(centerColor, frameColor), u_sigmaColor);\n          totalWeight += spaceWeight * colorWeight;\n\n          newVal += spaceWeight * colorWeight * outVal;\n        }\n      }\n      newVal /= totalWeight;\n\n      outColor = vec4(vec3(0.0), newVal);\n    }\n  "]))),c=qt(kt[a.inputResolution],2),u=c[0],d=c[1],f=s.width,p=s.height,m=1/f,h=1/p,v=Ot(e,e.FRAGMENT_SHADER,l),y=It(e,t,v,n,r),b=e.getUniformLocation(y,"u_inputFrame"),x=e.getUniformLocation(y,"u_segmentationMask"),g=e.getUniformLocation(y,"u_texelSize"),w=e.getUniformLocation(y,"u_step"),S=e.getUniformLocation(y,"u_radius"),_=e.getUniformLocation(y,"u_offset"),j=e.getUniformLocation(y,"u_sigmaTexel"),k=e.getUniformLocation(y,"u_sigmaColor"),N=e.createFramebuffer();function C(t){t*=Math.max(f/u,p/d);var n=Math.max(1,.66*Math.sqrt(t)),r=t,o=n>1?.5*n:0,a=Math.max(m,h)*t;e.useProgram(y),e.uniform1f(w,n),e.uniform1f(S,r),e.uniform1f(_,o),e.uniform1f(j,a)}function E(t){e.useProgram(y),e.uniform1f(k,t)}return e.bindFramebuffer(e.FRAMEBUFFER,N),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.useProgram(y),e.uniform1i(b,0),e.uniform1i(x,1),e.uniform2f(g,m,h),C(0),E(0),{render:function(){e.viewport(0,0,f,p),e.useProgram(y),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,o),e.bindFramebuffer(e.FRAMEBUFFER,N),e.drawArrays(e.TRIANGLE_STRIP,0,4)},updateSigmaSpace:C,updateSigmaColor:E,cleanUp:function(){e.deleteFramebuffer(N),e.deleteProgram(y),e.deleteShader(v)}}}(p,m,v,y,x,r,g,o),j="blur"===n.type?Gt(p,m,v,y,g,o):function(e,t,n,r,o,a){var i=Ft(Ht||(Ht=Qt(["#version 300 es\n\n    uniform vec2 u_backgroundScale;\n    uniform vec2 u_backgroundOffset;\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n    out vec2 v_backgroundCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n      v_backgroundCoord = a_texCoord * u_backgroundScale + u_backgroundOffset;\n    }\n  "],["#version 300 es\n\n    uniform vec2 u_backgroundScale;\n    uniform vec2 u_backgroundOffset;\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n    out vec2 v_backgroundCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n      v_backgroundCoord = a_texCoord * u_backgroundScale + u_backgroundOffset;\n    }\n  "]))),s=Ft(zt||(zt=Qt(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_background;\n    uniform vec2 u_coverage;\n    uniform float u_lightWrapping;\n    uniform float u_blendMode;\n\n    in vec2 v_texCoord;\n    in vec2 v_backgroundCoord;\n\n    out vec4 outColor;\n\n    vec3 screen(vec3 a, vec3 b) {\n      return 1.0 - (1.0 - a) * (1.0 - b);\n    }\n\n    vec3 linearDodge(vec3 a, vec3 b) {\n      return a + b;\n    }\n\n    void main() {\n      vec3 frameColor = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 backgroundColor = texture(u_background, v_backgroundCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      float lightWrapMask = 1.0 - max(0.0, personMask - u_coverage.y) / (1.0 - u_coverage.y);\n      vec3 lightWrap = u_lightWrapping * lightWrapMask * backgroundColor;\n      frameColor = u_blendMode * linearDodge(frameColor, lightWrap) +\n        (1.0 - u_blendMode) * screen(frameColor, lightWrap);\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(frameColor * personMask + backgroundColor * (1.0 - personMask), 1.0);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_background;\n    uniform vec2 u_coverage;\n    uniform float u_lightWrapping;\n    uniform float u_blendMode;\n\n    in vec2 v_texCoord;\n    in vec2 v_backgroundCoord;\n\n    out vec4 outColor;\n\n    vec3 screen(vec3 a, vec3 b) {\n      return 1.0 - (1.0 - a) * (1.0 - b);\n    }\n\n    vec3 linearDodge(vec3 a, vec3 b) {\n      return a + b;\n    }\n\n    void main() {\n      vec3 frameColor = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 backgroundColor = texture(u_background, v_backgroundCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      float lightWrapMask = 1.0 - max(0.0, personMask - u_coverage.y) / (1.0 - u_coverage.y);\n      vec3 lightWrap = u_lightWrapping * lightWrapMask * backgroundColor;\n      frameColor = u_blendMode * linearDodge(frameColor, lightWrap) +\n        (1.0 - u_blendMode) * screen(frameColor, lightWrap);\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(frameColor * personMask + backgroundColor * (1.0 - personMask), 1.0);\n    }\n  "]))),l=a.width,c=a.height,u=l/c,d=Ot(e,e.VERTEX_SHADER,i),f=Ot(e,e.FRAGMENT_SHADER,s),p=It(e,d,f,t,n),m=e.getUniformLocation(p,"u_backgroundScale"),h=e.getUniformLocation(p,"u_backgroundOffset"),v=e.getUniformLocation(p,"u_inputFrame"),y=e.getUniformLocation(p,"u_personMask"),b=e.getUniformLocation(p,"u_background"),x=e.getUniformLocation(p,"u_coverage"),g=e.getUniformLocation(p,"u_lightWrapping"),w=e.getUniformLocation(p,"u_blendMode");e.useProgram(p),e.uniform2f(m,1,1),e.uniform2f(h,0,0),e.uniform1i(v,0),e.uniform1i(y,1),e.uniform2f(x,0,1),e.uniform1f(g,0),e.uniform1f(w,0);var S=null;function _(t){S=Mt(e,e.RGBA8,t.naturalWidth,t.naturalHeight,e.LINEAR,e.LINEAR),e.texSubImage2D(e.TEXTURE_2D,0,0,0,t.naturalWidth,t.naturalHeight,e.RGBA,e.UNSIGNED_BYTE,t);var n=0,r=0,o=t.naturalWidth,a=t.naturalHeight;o/a<u?(a=o/u,r=(t.naturalHeight-a)/2):(o=a*u,n=(t.naturalWidth-o)/2);var i=o/t.naturalWidth,s=a/t.naturalHeight;n/=t.naturalWidth,r/=t.naturalHeight,e.uniform2f(m,i,s),e.uniform2f(h,n,r)}return(null===o||void 0===o?void 0:o.complete)?_(o):o&&(o.onload=function(){_(o)}),{render:function(){e.viewport(0,0,l,c),e.useProgram(p),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,r),null!==S&&(e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,S),e.uniform1i(b,2)),e.bindFramebuffer(e.FRAMEBUFFER,null),e.drawArrays(e.TRIANGLE_STRIP,0,4)},updateCoverage:function(t){e.useProgram(p),e.uniform2f(x,t[0],t[1])},updateLightWrapping:function(t){e.useProgram(p),e.uniform1f(g,t)},updateBlendMode:function(t){e.useProgram(p),e.uniform1f(w,"screen"===t?0:1)},cleanUp:function(){e.deleteTexture(S),e.deleteProgram(p),e.deleteShader(f),e.deleteShader(d)}}}(p,v,y,g,t,o);return{render:function(){return cn(this,void 0,void 0,(function(){return un(this,(function(t){return p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,b),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,p.RGBA,p.UNSIGNED_BYTE,e.htmlElement),p.bindVertexArray(h),w.render(),i(),a._runInference(),i(),S.render(),_.render(),j.render(),[2]}))}))},updatePostProcessingConfig:function(e){if(_.updateSigmaSpace(e.jointBilateralFilter.sigmaSpace),_.updateSigmaColor(e.jointBilateralFilter.sigmaColor),"image"===n.type)(t=j).updateCoverage(e.coverage),t.updateLightWrapping(e.lightWrapping),t.updateBlendMode(e.blendMode);else if("blur"===n.type){j.updateCoverage(e.coverage)}else{var t;(t=j).updateCoverage([0,.9999]),t.updateLightWrapping(0)}},cleanUp:function(){j.cleanUp(),_.cleanUp(),S.cleanUp(),w.cleanUp(),p.deleteTexture(g),p.deleteTexture(x),p.deleteTexture(b),p.deleteBuffer(y),p.deleteBuffer(v),p.deleteVertexArray(h),p.deleteShader(m)}}}var pn=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},mn=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},hn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const vn=function(e,t,n,r,o){var i=hn((0,a.useState)(null),2),s=i[0],l=i[1],c=(0,a.useRef)(null),u=(0,a.useRef)(null),d=hn((0,a.useState)(0),2),f=d[0],p=d[1],m=hn((0,a.useState)([]),2),h=m[0],v=m[1];return(0,a.useEffect)((function(){var a,i=!0,s=0,d=0,f=0,m=0,h=[],y="webgl2"===n.pipeline?fn(e,c.current,t,n,u.current,o,b):Pt(e,t,n,u.current,r,o,b);function b(){var e=Date.now();h[f]=e-d,d=e,f++}return function e(){return pn(this,void 0,void 0,(function(){return mn(this,(function(t){switch(t.label){case 0:return i?(d=Date.now(),[4,y.render()]):[2];case 1:return t.sent(),function(){var e=Date.now();h[f]=e-d,m++,e>=s+1e3&&(p(1e3*m/(e-s)),v(h),s=e,m=0);f=0}(),a=requestAnimationFrame(e),[2]}}))}))}(),l(y),function(){i=!1,cancelAnimationFrame(a),y.cleanUp(),l(null)}}),[e,t,n,r,o]),{pipeline:s,backgroundImageRef:c,canvasRef:u,fps:f,durations:h}};var yn=function(){return yn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},yn.apply(this,arguments)};const bn=function(e){var t=e.sourcePlayback,n=e.backgroundConfig,r=e.segmentationConfig,i=e.postProcessingConfig,s=e.bodyPix,l=e.tflite,c=e.id,u=e.onCanvasRef,d=vn(t,n,r,s,l),f=d.pipeline,p=d.canvasRef;return(0,a.useEffect)((function(){f&&f.updatePostProcessingConfig(i)}),[f,i]),(0,a.useEffect)((function(){var e=setTimeout((function(){u&&p&&u(p)}),500);return function(){clearTimeout(e)}}),[p]),(0,o.jsx)("div",yn({className:"root preview-camera-webcam"},{children:(0,o.jsx)("canvas",{ref:p,className:"render w-full my-5",width:t.width,height:t.height,id:c},r.pipeline)}))};var xn,gn={smoothSegmentationMask:!0,jointBilateralFilter:{sigmaSpace:1,sigmaColor:.1},coverage:[.5,.75],lightWrapping:.3,blendMode:"screen"},wn=n(56124),Sn=(n(85186),n(86931)),_n=(n(92423),function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))}),jn=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},kn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Nn=function(){var e=kn((0,a.useState)(),2),t=e[0],n=e[1];return(0,a.useEffect)((function(){var e;return xn?n(xn):e=setTimeout((function(){!function(){_n(this,void 0,void 0,(function(){return jn(this,(function(e){switch(e.label){case 0:return console.log("Loading TensorFlow.js and BodyPix segmentation model"),[4,Sn.Cd_()];case 1:return e.sent(),[4,wn.zD()];case 2:return xn=e.sent(),n(xn),console.log("TensorFlow.js and BodyPix loaded"),[2]}}))}))}()}),500),function(){e&&clearTimeout(e)}}),[]),t};var Cn=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},En=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Tn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Pn=function(e){var t,n=Tn((0,a.useState)(),2),r=n[0],o=n[1],i=Tn((0,a.useState)(),2),s=i[0],l=i[1],c=Tn((0,a.useState)(),2),u=c[0],d=c[1],f=Tn((0,a.useState)(!1),2),p=f[0],m=f[1],h=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";return(0,a.useEffect)((function(){!function(){Cn(this,void 0,void 0,(function(){var e;return En(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,createTFLiteSIMDModule()];case 1:return e=t.sent(),l(e),o(e),m(!0),[3,3];case 2:t.sent();try{createTFLiteModule().then(o)}catch(n){console.warn("Failed to create TFLite WebAssembly module.",n)}return[3,3];case 3:return[2]}}))}))}()}),[]),(0,a.useEffect)((function(){!function(){Cn(this,void 0,void 0,(function(){var t,n,o,a;return En(this,(function(i){switch(i.label){case 0:if(!r||p&&!s||!p&&"wasmSimd"===e.backend||"meet"!==e.model&&"mlkit"!==e.model)return[2];if(d(void 0),!(t="wasmSimd"===e.backend?s:r))throw new Error("TFLite backend unavailable: ".concat(e.backend));return n=function(e,t){switch(e){case"meet":return"256x144"===t?"segm_full_v679":"segm_lite_v681";case"mlkit":return"selfiesegmentation_mlkit-256x256-2021_01_19-v1215.f16";default:throw new Error("No TFLite file for this segmentation model: ".concat(e))}}(e.model,e.inputResolution),console.log("Loading tflite model:",n),[4,fetch("".concat(h,"/models/").concat(n,".tflite"))];case 1:return[4,i.sent().arrayBuffer()];case 2:return o=i.sent(),console.log("Model buffer size:",o.byteLength),a=t._getModelBufferMemoryOffset(),console.log("Model buffer memory offset:",a),console.log("Loading model buffer..."),t.HEAPU8.set(new Uint8Array(o),a),console.log("_loadModel result:",t._loadModel(o.byteLength)),console.log("Input memory offset:",t._getInputMemoryOffset()),console.log("Input height:",t._getInputHeight()),console.log("Input width:",t._getInputWidth()),console.log("Input channels:",t._getInputChannelCount()),console.log("Output memory offset:",t._getOutputMemoryOffset()),console.log("Output height:",t._getOutputHeight()),console.log("Output width:",t._getOutputWidth()),console.log("Output channels:",t._getOutputChannelCount()),d(t),[2]}}))}))}()}),[r,s,p,e.model,e.backend,e.inputResolution]),{tflite:u,isSIMDSupported:p}};var An=function(){return An=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},An.apply(this,arguments)},Rn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Fn=function(e){var t=e.sourcePlayback,n=e.backgroundConfig,r=e.id,i=e.onCanvasRef,s=Rn((0,a.useState)(Nt),2),l=s[0],c=s[1],u=Nn(),d=Pn(l),f=d.tflite,p=d.isSIMDSupported;return(0,a.useEffect)((function(){u&&c((function(e){return"wasmSimd"!==e.backend||p?e:An(An({},e),{backend:"wasm"})}))}),[p]),(0,o.jsx)(o.Fragment,{children:t&&u&&f?(0,o.jsx)(bn,{sourcePlayback:t,backgroundConfig:null!==n&&void 0!==n?n:Y,segmentationConfig:l,postProcessingConfig:gn,bodyPix:u,tflite:f,id:r,onCanvasRef:i}):null})};var In=n(65342),On=n.n(In),Mn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Dn=function(e){var t=e.allowedFileTypes,n=e.maxFileSize,r=e.files,o=a.useRef(null),i=Mn((0,a.useState)(!1),2),s=i[0],c=i[1],u=Mn((0,a.useState)(),2),d=u[0],f=u[1],p=(0,lt.$)().t,m=at.getState().session;(0,a.useEffect)((function(){r&&r.length&&h(r)}),[r]);var h=function(e){var r,a="",i=new(On())({target:window.PLUG_N_MEET_SERVER_URL+"/api/fileUpload",uploadMethod:"POST",query:{sid:m.currentRoom.sid,roomId:m.currentRoom.room_id,userId:null===(r=m.currentUser)||void 0===r?void 0:r.userId,resumable:!0},headers:{Authorization:m.token},fileType:t,fileTypeErrorCallback:function(e){(0,l.Am)(p("notifications.file-type-not-allow",{filetype:e.type}),{type:l.Am.TYPE.ERROR})},maxFileSize:n?1e6*n:void 0,maxFileSizeErrorCallback:function(){(0,l.Am)(p("notifications.max-file-size-exceeds"),{type:l.Am.TYPE.ERROR})}});i.on("fileAdded",(function(e){a=e.fileName,i.isUploading()||(c(!0),i.upload())})),i.on("fileSuccess",(function(e,t){var n=JSON.parse(t);c(!1),setTimeout((function(){var e;l.Am.dismiss(null!==(e=o.current)&&void 0!==e?e:"")}),300),n.status&&f({filePath:n.filePath,fileName:n.fileName,fileExtension:n.fileExtension})})),i.on("fileError",(function(e,t){c(!1),setTimeout((function(){var e;l.Am.dismiss(null!==(e=o.current)&&void 0!==e?e:"")}),300);try{var n=JSON.parse(t);(0,l.Am)(p(n.msg),{type:l.Am.TYPE.ERROR})}catch(r){(0,l.Am)(p("right-panel.file-upload-default-error"),{type:l.Am.TYPE.ERROR})}})),i.on("uploadStart",(function(){o.current=(0,l.Am)(p("right-panel.uploading-file",{fileName:a}),{closeButton:!1,progress:0})})),i.on("fileProgress",(function(e){var t,n=e.progress(!1);l.Am.update(null!==(t=o.current)&&void 0!==t?t:"",{progress:Number(n)})})),i.addFiles(e)};return{isUploading:s,result:d}};var Un=function(){return Un=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Un.apply(this,arguments)},Ln=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Bn=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const Wn=function(e){var t=e.onSelect,n=["jpg","jpeg","png"],r=(0,lt.$)().t,i=Ln((0,a.useState)(Y),2),s=i[0],l=i[1],c=Ln((0,a.useState)(K),2),u=c[0],d=c[1],f=Ln((0,a.useState)(),2),p=f[0],m=f[1],h=(0,a.useRef)(null),v=Dn({allowedFileTypes:n,maxFileSize:30,files:p}),y=v.isUploading,b=v.result;(0,a.useEffect)((function(){if(b&&b.filePath){var e=window.PLUG_N_MEET_SERVER_URL+"/download/uploadedFile/"+b.filePath,t=Bn([],Ln(u),!1);t.push(e),d(Bn([],Ln(t),!1));var n=h.current;n&&(n.value="")}}),[b,h]);var x=function(e,n){var r={type:e,url:n};l(r),t(r)};return(0,o.jsxs)("div",Un({className:"flex flex-wrap items-center justify-start p-3 bg-slate-100 shadow-header"},{children:[(0,o.jsx)("div",Un({className:"cursor-pointer rounded-md w-[62px] h-[62px] overflow-hidden flex items-center justify-center border-2 border-solid border-gray-300 transition transform scale-90 hover:scale-95 ease-in  ".concat("none"===s.type?"border-secondaryColor scale-95":""),onClick:function(){return x("none","")}},{children:(0,o.jsx)("i",{className:"pnm-ban-solid"})})),(0,o.jsx)("div",Un({className:"cursor-pointer rounded-md w-[62px] h-[62px] overflow-hidden flex items-center justify-center border-2 border-solid border-gray-300 transition transform scale-90 hover:scale-95 ease-in ".concat("blur"===s.type?"border-secondaryColor scale-95":""),onClick:function(){return x("blur","")}},{children:(0,o.jsx)("i",{className:"pnm-blur"})})),u.map((function(e){return(0,o.jsx)("div",Un({className:"cursor-pointer rounded-md w-[62px] h-[62px] overflow-hidden flex items-center justify-center transition transform scale-90 hover:scale-95 ease-in border-2 border-solid border-transparent ".concat(s.url===e?"border-secondaryColor scale-95":""),onClick:function(){return x("image",e)}},{children:(0,o.jsx)("img",{src:e,alt:e,className:"object-cover w-full h-full"})}),e)})),(0,o.jsxs)("div",Un({className:"upload-btn-wrapper relative overflow-hidden inline-block cursor-pointer pt-2 w-full"},{children:[(0,o.jsx)("button",Un({className:"btn border border-dotted border-secondaryColor bg-transparent py-2 px-4 rounded text-xs text-secondaryColor cursor-pointer"},{children:r("footer.modal.upload-background-image")})),(0,o.jsx)("input",{className:"absolute left-0 top-0 opacity-0 w-full h-full cursor-pointer",ref:h,type:"file",onChange:function(e){if(!y){var t=e.target.files;t&&m(Bn([],Ln(t),!1))}},accept:n.map((function(e){return"."+e})).join(",")})]}))]}))};var Vn=function(){return Vn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Vn.apply(this,arguments)},Gn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Hn=function(e){var t,n=e.deviceId,r=Gn((0,a.useState)(),2),i=r[0],s=r[1],l=Gn((0,a.useState)(!1),2),c=l[0],u=l[1],d=Gn((0,a.useState)(),2),f=d[0],p=d[1],m=Gn((0,a.useState)(),2),h=m[0],v=m[1],y=Gn((0,a.useState)(),2),b=y[0],x=y[1],g=null===(t=at.getState().session.currentUser)||void 0===t?void 0:t.userId,w=it(),S=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);(0,a.useEffect)((function(){f!==n&&(u(!1),p(n))}),[n]),(0,a.useEffect)((function(){u(!1);i&&setTimeout((function(){u(!0)}),500)}),[i]),(0,a.useEffect)((function(){return function(){b&&b.getTracks().forEach((function(e){e.stop()}))}}),[b]);return(0,o.jsxs)("div",Vn({className:"mt-5"},{children:[n?(0,o.jsx)("div",Vn({style:h?{display:"none"}:{display:""}},{children:(0,o.jsx)(jt,{deviceId:n,onSourcePlayback:s,onMediaStream:x})})):null,c&&i&&g&&h?(0,o.jsx)(Fn,{sourcePlayback:i,backgroundConfig:h,id:g}):null,S?null:(0,o.jsx)(Wn,{onSelect:function(e){w(be(e)),"none"===e.type?(u(!1),v(void 0)):(!c&&n&&u(!0),v(e))}})]}))};var zn=function(){return zn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zn.apply(this,arguments)},Qn=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Xn=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Jn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},qn=(0,pt.P1)((function(e){return e.bottomIconsActivity.showVideoShareModal}),(function(e){return e}));const Yn=function(e){var t=e.onSelectedDevice,n=st(qn),r=Jn((0,a.useState)(!0),2),i=r[0],s=r[1],l=Jn((0,a.useState)(""),2),c=l[0],u=l[1],d=Jn((0,a.useState)([]),2),f=d[0],p=d[1],m=it(),h=(0,lt.$)().t;(0,a.useEffect)((function(){Qn(void 0,void 0,void 0,(function(){var e,t,n;return Xn(this,(function(r){switch(r.label){case 0:return[4,bt("videoinput")];case 1:return e=r.sent(),t=[],n=e.map((function(e){var n={id:e.deviceId,label:e.label};return t.push(n),(0,o.jsx)("option",zn({value:e.deviceId},{children:e.label}),e.deviceId)})),p(n),u(e[0].deviceId),t.length&&m(Ae(t)),[2]}}))}))}),[m]),(0,a.useEffect)((function(){n&&s(!0)}),[n]);var v=function(){s(!1),m(de(!1)),m(re(!1))};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsx)(mt.u,zn({show:i,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(ht.V,zn({open:i,onClose:function(){return v()},className:"share-webcam-popup-wrap fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",zn({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(ht.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,o.jsxs)("div",zn({className:"popup-inner bg-white w-full max-w-md rounded-3xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",zn({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return v()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ht.V.Title,zn({className:"mb-6"},{children:h("footer.modal.select-webcam")})),(0,o.jsx)("div",zn({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)("select",zn({value:c,onChange:function(e){return u(e.target.value)},className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:f}))})),(0,o.jsx)("div",zn({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)(Hn,{deviceId:c})})),(0,o.jsx)("div",zn({className:"px-4 py-3 bg-gray-50 text-right sm:px-6"},{children:(0,o.jsx)("button",zn({className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primaryColor hover:bg-secondaryColor focus:outline-none",onClick:function(){return Qn(void 0,void 0,void 0,(function(){return Xn(this,(function(e){return v(),c?(t(c),[2]):[2]}))}))}},{children:h("share")}))}))]}))]}))}))})):null})};var $n=n(56621),Kn=function(){return Kn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Kn.apply(this,arguments)},Zn=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},er=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},tr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},nr=(0,pt.P1)((function(e){return e.roomSettings.videoDevices}),(function(e){return e})),rr=(0,pt.P1)((function(e){return e.roomSettings.selectedVideoDevice}),(function(e){return e}));const or=function(e){var t=e.currentRoom,n=it(),r=(0,lt.$)().t,i=st(nr),s=st(rr),l=tr((0,a.useState)(),2),c=l[0],u=l[1],d=tr((0,a.useState)(),2),f=d[0],p=d[1];(0,a.useEffect)((function(){var e=i.map((function(e){return(0,o.jsx)("div",Kn({className:"",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:function(){return(0,o.jsx)("p",Kn({className:"".concat(s===e.id?"secondaryColor":"text-gray-700 dark:text-gray-400"," rounded group flex items-center px-3 py-[0.4rem] text-[10px] lg:text-xs transition ease-in hover:bg-primaryColor hover:text-white"),onClick:function(){return p(e.id)}},{children:e.label}))}})}),e.id)}));u(e)}),[s,i]),(0,a.useEffect)((function(){f&&n(Fe(f))}),[f,n]);return(0,o.jsxs)($n.v.Items,Kn({static:!0,className:"origin-bottom-right z-[9999] absolute left-0 mt-2 w-40 bottom-[40px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[c,(0,o.jsx)("div",Kn({className:"",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:function(){return(0,o.jsx)("p",Kn({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs transition ease-in hover:bg-red-400 hover:text-white",onClick:function(){return t.localParticipant.videoTracks.forEach((function(e){return Zn(void 0,void 0,void 0,(function(){return er(this,(function(n){return e.track&&e.track.source===Ce.fQ.Source.Camera&&t.localParticipant.unpublishTrack(e.track),[2]}))}))})),n(re(!1)),n(Fe("")),void n(be({type:"none"}))}},{children:r("footer.menus.leave-webcam")}))}})}))]}))};var ar=function(){return ar=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ar.apply(this,arguments)};const ir=function(e){var t=e.currentRoom;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",ar({className:"absolute bottom-0 right-3 lg:right-6"},{children:(0,o.jsx)($n.v,{children:function(e){var n=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($n.v.Button,{children:(0,o.jsx)("div",ar({className:"arrow-down absolute -bottom-1 -right-1 w-[15px] h-[15px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-arrow-below text-[10px] sm:text-[12px]"})}))}),(0,o.jsx)(mt.u,ar({show:n,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(or,{currentRoom:t})}))]})}})}))})};var sr=function(){return sr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sr.apply(this,arguments)},lr=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},cr=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ur=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},dr=(0,pt.P1)((function(e){return e.bottomIconsActivity.isActiveWebcam}),(function(e){return e})),fr=(0,pt.P1)((function(e){return e.bottomIconsActivity.showVideoShareModal}),(function(e){return e})),pr=(0,pt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_webcam}),(function(e){return e})),mr=(0,pt.P1)((function(e){return e.bottomIconsActivity.virtualBackground}),(function(e){return e})),hr=(0,pt.P1)((function(e){return e.roomSettings.selectedVideoDevice}),(function(e){return e}));const vr=function(e){var t=e.currentRoom,n=it(),r="desktop"===at.getState().session.userDeviceType,i=st(fr),s=st(dr),l=st(pr),c=st(mr),u=st(hr),d=(0,lt.$)().t,f=ur((0,a.useState)(!1),2),p=f[0],m=f[1],h=ur((0,a.useState)(),2),v=h[0],y=h[1],b=ur((0,a.useState)(),2),x=b[0],g=b[1],w=ur((0,a.useState)(),2),S=w[0],_=w[1],j=(0,a.useRef)(null);(0,a.useEffect)((function(){if(l){m(!0);var e=N.selectById(at.getState(),t.localParticipant.identity);(null===e||void 0===e?void 0:e.videoTracks)&&(null===t||void 0===t||t.localParticipant.videoTracks.forEach((function(e){e.track&&e.source===Ce.fQ.Source.Camera&&t.localParticipant.unpublishTrack(e.track)})),n(re(!1)))}else m(!1)}),[l,t,n]),(0,a.useEffect)((function(){var e,t,n,r,o=null===(t=null===(e=at.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_webcam,a=null===(r=null===(n=at.getState().session.currentUser)||void 0===n?void 0:n.metadata)||void 0===r?void 0:r.is_admin;o&&!a&&!1!==l&&m(!0)}),[]),(0,a.useEffect)((function(){s||!S||u||S.getTracks().forEach((function(e){return e.stop()})),s||u||!v||y(void 0)}),[u]),(0,a.useEffect)((function(){if(u&&v&&u!==v){"none"===c.type?function(e){lr(void 0,void 0,void 0,(function(){return cr(this,(function(n){switch(n.label){case 0:return[4,t.switchActiveDevice("videoinput",e)];case 1:return n.sent(),[2]}}))}))}(u):function(e){lr(void 0,void 0,void 0,(function(){return cr(this,(function(t){switch(t.label){case 0:return[4,C(e)];case 1:return t.sent(),[2]}}))}))}(u),y(u)}}),[u]),(0,a.useEffect)((function(){if(S&&j){var e=j.current;e&&(e.srcObject=S)}return function(){S&&S.getTracks().forEach((function(e){return e.stop()}))}}),[S]);var k=function(){var e,t,n=j.current;n&&g({htmlElement:n,width:null!==(e=n.videoWidth)&&void 0!==e?e:320,height:null!==(t=n.videoHeight)&&void 0!==t?t:180})},C=function(e){return lr(void 0,void 0,void 0,(function(){var r,o,a,i;return cr(this,(function(s){switch(s.label){case 0:return"none"!==c.type?[3,3]:(r=function(){var e,t=null!==(e=window.DEFAULT_WEBCAM_RESOLUTION)&&void 0!==e?e:"h720",n=Ce.OM.h720.resolution;switch(t){case"h90":n=Ce.OM.h90.resolution;break;case"h180":n=Ce.OM.h180.resolution;break;case"h216":n=Ce.OM.h216.resolution;break;case"h360":n=Ce.OM.h360.resolution;break;case"h540":n=Ce.OM.h540.resolution;break;case"h720":n=Ce.OM.h720.resolution;break;case"h1080":n=Ce.OM.h1080.resolution;break;case"h1440":n=Ce.OM.h1440.resolution;break;case"h2160":n=Ce.OM.h2160.resolution}return n}(),[4,(0,Ce.gJ)({deviceId:{exact:e,ideal:e},resolution:r})]);case 1:return o=s.sent(),[4,t.localParticipant.publishTrack(o)];case 2:return s.sent(),n(re(!0)),[3,5];case 3:return a={video:{deviceId:{exact:e,ideal:e}}},[4,navigator.mediaDevices.getUserMedia(a)];case 4:i=s.sent(),_(i),s.label=5;case 5:return[2]}}))}))},E=function(e){return lr(void 0,void 0,void 0,(function(){return cr(this,(function(t){switch(t.label){case 0:return y(e),[4,C(e)];case 1:return t.sent(),n(Fe(e)),[2]}}))}))},T=function(e){e.current.captureStream(25).getTracks().forEach((function(e){return lr(void 0,void 0,void 0,(function(){return cr(this,(function(r){switch(r.label){case 0:return e.kind!==Ce.fQ.Kind.Video?[3,2]:[4,t.localParticipant.publishTrack(e,{source:Ce.fQ.Source.Camera,name:"canvas"})];case 1:r.sent(),n(re(!0)),r.label=2;case 2:return[2]}}))}))}))},P=function(){return(0,o.jsxs)("div",sr({className:"relative z-10"},{children:[(0,o.jsxs)("div",sr({className:"camera footer-icon relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(r?"has-tooltip":""),onClick:function(){p||(s?s&&(t.localParticipant.videoTracks.forEach((function(e){return lr(void 0,void 0,void 0,(function(){return cr(this,(function(n){return e.track&&e.track.source===Ce.fQ.Source.Camera&&t.localParticipant.unpublishTrack(e.track),[2]}))}))})),n(re(!1)),n(Fe("")),n(be({type:"none"}))):n(de(!s)))}},{children:[(0,o.jsx)("span",sr({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:s||l?!s&&l?d("footer.icons.webcam-locked"):s?d("footer.icons.leave-webcam"):void 0:d("footer.icons.start-webcam")})),s?null:(0,o.jsx)("i",{className:"pnm-webcam primaryColor text-[10px] lg:text-[14px]"}),p?(0,o.jsx)("div",sr({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock primaryColor"})})):null,s?(0,o.jsx)("i",{className:"pnm-webcam secondaryColor text-[10px] lg:text-[14px]"}):null]})),s?(0,o.jsx)(ir,{currentRoom:t}):null]}))};return(0,o.jsx)(o.Fragment,{children:function(){var e,t,n=at.getState().session,r=null===(e=n.currentRoom.metadata)||void 0===e?void 0:e.room_features,o=n.currentUser;return!!(null===r||void 0===r?void 0:r.allow_webcams)&&!((null===r||void 0===r?void 0:r.admin_only_webcams)&&!(null===(t=null===o||void 0===o?void 0:o.metadata)||void 0===t?void 0:t.is_admin))}()?(0,o.jsxs)(o.Fragment,{children:[P(),i?(0,o.jsx)(Yn,{onSelectedDevice:E}):null,x&&v&&"none"!==c.type?(0,o.jsx)("div",sr({style:{display:"none"}},{children:(0,o.jsx)(Fn,{sourcePlayback:x,id:v,backgroundConfig:c,onCanvasRef:T})})):null,S?(0,o.jsx)("div",sr({style:{display:"none"}},{children:(0,o.jsx)("video",{ref:j,autoPlay:!0,onLoadedData:k})})):null]}):null})};var yr=function(){return yr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},yr.apply(this,arguments)},br=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},xr=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},gr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},wr=(0,pt.P1)((function(e){return e.bottomIconsActivity.showMicrophoneModal}),(function(e){return e}));const Sr=function(e){var t,n,r=e.currentRoom,i=st(wr),s=gr((0,a.useState)(!0),2),l=s[0],c=s[1],u=gr((0,a.useState)(""),2),d=u[0],f=u[1],p=gr((0,a.useState)([]),2),m=p[0],h=p[1],v=it(),y=(0,lt.$)().t,b=null!==(n=null===(t=at.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features.mute_on_start)&&void 0!==n&&n;(0,a.useEffect)((function(){br(void 0,void 0,void 0,(function(){var e,t,n;return xr(this,(function(r){switch(r.label){case 0:return[4,bt("audioinput")];case 1:return e=r.sent(),t=[],n=e.map((function(e){var n={id:e.deviceId,label:e.label};return t.push(n),(0,o.jsx)("option",yr({value:e.deviceId},{children:e.label}),e.deviceId)})),h(n),f(e[0].deviceId),t.length&&v(Pe(t)),[2]}}))}))}),[v]),(0,a.useEffect)((function(){i&&c(!0)}),[i]);var x=function(){c(!1),v(ue(!1))};return(0,o.jsx)(o.Fragment,{children:i?(0,o.jsx)(mt.u,yr({show:l,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(ht.V,yr({open:l,onClose:function(){return x()},className:"share-microphone-popup-wrap fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",yr({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(ht.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,o.jsxs)("div",yr({className:"popup-inner bg-white w-full max-w-sm rounded-3xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",yr({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return x()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ht.V.Title,yr({className:"mb-6"},{children:y("footer.modal.select-microphone")})),(0,o.jsx)("div",yr({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)("select",yr({value:d,onChange:function(e){return f(e.target.value)},className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:m}))})),(0,o.jsx)("div",yr({className:"px-4 py-3 bg-gray-50 text-right sm:px-6"},{children:(0,o.jsx)("button",yr({className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primaryColor hover:bg-secondaryColor focus:outline-none",onClick:function(){return br(void 0,void 0,void 0,(function(){return xr(this,(function(e){switch(e.label){case 0:return c(!1),v(ue(!1)),d?[4,(0,Ce.Ai)({audio:{deviceId:d},video:!1})]:[2];case 1:return e.sent().forEach((function(e){return br(void 0,void 0,void 0,(function(){return xr(this,(function(t){switch(t.label){case 0:return e.kind!==Ce.fQ.Kind.Audio?[3,2]:[4,null===r||void 0===r?void 0:r.localParticipant.publishTrack(e)];case 1:t.sent(),v(te(!0)),t.label=2;case 2:return[2]}}))}))})),b&&setTimeout((function(){return br(void 0,void 0,void 0,(function(){return xr(this,(function(e){return null===r||void 0===r||r.localParticipant.audioTracks.forEach((function(e){return br(void 0,void 0,void 0,(function(){return xr(this,(function(t){switch(t.label){case 0:return e.track&&e.track.source===Ce.fQ.Source.Microphone?e.isMuted?[3,2]:[4,e.track.mute()]:[3,2];case 1:t.sent(),v(ne(!0)),v(z(!1)),t.label=2;case 2:return[2]}}))}))})),[2]}))}))}),500),v(Re(d)),[2]}}))}))}},{children:y("join")}))}))]}))]}))}))})):null})};var _r=function(){return _r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_r.apply(this,arguments)},jr=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},kr=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Nr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Cr=(0,pt.P1)((function(e){return e.roomSettings.audioDevices}),(function(e){return e})),Er=(0,pt.P1)((function(e){return e.bottomIconsActivity.isMicMuted}),(function(e){return e})),Tr=(0,pt.P1)((function(e){return e.roomSettings.selectedAudioDevice}),(function(e){return e}));const Pr=function(e){var t=e.currentRoom,n=it(),r=(0,lt.$)().t,i=st(Cr),s=st(Er),l=st(Tr),c=Nr((0,a.useState)(),2),u=c[0],d=c[1],f=Nr((0,a.useState)(),2),p=f[0],m=f[1];(0,a.useEffect)((function(){var e=i.map((function(e){return(0,o.jsx)("div",_r({className:"",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:function(){return(0,o.jsx)("p",_r({className:"".concat(l===e.id?"secondaryColor":"text-gray-700 dark:text-gray-400"," rounded group flex items-center px-3 py-[0.4rem] text-[10px] lg:text-xs transition ease-in hover:bg-primaryColor hover:text-white"),onClick:function(){return m(e.id)}},{children:e.label}))}})}),e.id)}));d(e)}),[i,l]),(0,a.useEffect)((function(){var e;p&&(e=p,jr(void 0,void 0,void 0,(function(){return kr(this,(function(n){switch(n.label){case 0:return[4,t.switchActiveDevice("audioinput",e)];case 1:return n.sent(),[2]}}))})),n(Re(p)))}),[p,t,n]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)($n.v.Items,_r({static:!0,className:"origin-bottom-right z-[9999] absolute left-0 mt-2 w-40 bottom-[40px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[u,(0,o.jsx)("div",_r({className:"",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:function(){return(0,o.jsx)("p",_r({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center px-3 py-[0.4rem] text-xs transition ease-in hover:bg-primaryColor hover:text-white border-t border-solid border-red-100",onClick:function(){null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){return jr(void 0,void 0,void 0,(function(){return kr(this,(function(t){switch(t.label){case 0:return e.track&&e.track.source===Ce.fQ.Source.Microphone?e.isMuted?[4,e.track.unmute()]:[3,2]:[3,4];case 1:return t.sent(),n(ne(!1)),[3,4];case 2:return[4,e.track.mute()];case 3:t.sent(),n(ne(!0)),t.label=4;case 4:return[2]}}))}))}))}},{children:r(s?"footer.menus.unmute-microphone":"footer.menus.mute-microphone")}))}})})),(0,o.jsx)("div",_r({className:"",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:function(){return(0,o.jsx)("p",_r({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs transition ease-in hover:bg-red-400 hover:text-white",onClick:function(){return null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){return jr(void 0,void 0,void 0,(function(){return kr(this,(function(n){return e.track&&e.kind===Ce.fQ.Kind.Audio&&t.localParticipant.unpublishTrack(e.track),[2]}))}))})),n(te(!1)),n(ne(!1)),void n(Re(""))}},{children:r("footer.menus.leave-microphone")}))}})}))]}))})};var Ar=function(){return Ar=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ar.apply(this,arguments)};const Rr=function(e){var t=e.currentRoom;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",Ar({className:"absolute bottom-0 right-3 lg:right-6"},{children:(0,o.jsx)($n.v,{children:function(e){var n=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($n.v.Button,{children:(0,o.jsx)("div",Ar({className:"arrow-down absolute -bottom-1 -right-1 w-[15px] h-[15px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-arrow-below text-[10px] sm:text-[12px]"})}))}),(0,o.jsx)(mt.u,Ar({show:n,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Pr,{currentRoom:t})}))]})}})}))})};var Fr=function(){return Fr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fr.apply(this,arguments)},Ir=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Or=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Mr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Dr=(0,pt.P1)((function(e){return e.bottomIconsActivity.isActiveMicrophone}),(function(e){return e})),Ur=(0,pt.P1)((function(e){return e.bottomIconsActivity.showMicrophoneModal}),(function(e){return e})),Lr=(0,pt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_microphone}),(function(e){return e})),Br=(0,pt.P1)((function(e){return e.bottomIconsActivity.isMicMuted}),(function(e){return e}));const Wr=function(e){var t=e.currentRoom,n=it(),r="desktop"===at.getState().session.userDeviceType,i=(0,lt.$)().t,s=st(Ur),l=st(Dr),c=st(Lr),u=st(Br),d=Mr((0,a.useState)(!1),2),f=d[0],p=d[1];(0,a.useEffect)((function(){if(c){p(!0);var e=N.selectById(at.getState(),t.localParticipant.identity);(null===e||void 0===e?void 0:e.audioTracks)&&(null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){e.track&&e.source===Ce.fQ.Source.Microphone&&t.localParticipant.unpublishTrack(e.track)})),n(te(!1)),n(ne(!1)))}else p(!1)}),[c,t,n]),(0,a.useEffect)((function(){var e,t,n,r,o=null===(t=null===(e=at.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_microphone,a=null===(r=null===(n=at.getState().session.currentUser)||void 0===n?void 0:n.metadata)||void 0===r?void 0:r.is_admin;o&&!a&&!1!==c&&p(!0)}),[]);var m=function(){l||f||n(ue(!0)),l&&(null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){return Ir(void 0,void 0,void 0,(function(){return Or(this,(function(t){switch(t.label){case 0:return e.track&&e.track.source===Ce.fQ.Source.Microphone?e.isMuted?[4,e.track.unmute()]:[3,2]:[3,4];case 1:return t.sent(),n(ne(!1)),[3,4];case 2:return[4,e.track.mute()];case 3:t.sent(),n(ne(!0)),t.label=4;case 4:return[2]}}))}))})))};return(0,o.jsxs)("div",Fr({className:"relative z-10"},{children:[s?(0,o.jsx)(Sr,{currentRoom:t}):null,(0,o.jsxs)("div",Fr({className:"microphone footer-icon relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(r?"has-tooltip":""),onClick:function(){return m()}},{children:[(0,o.jsx)("span",Fr({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:l||f?!l&&f?i("footer.icons.microphone-locked"):l&&!u?i("footer.menus.mute-microphone"):l&&u?i("footer.menus.unmute-microphone"):void 0:i("footer.icons.start-microphone-sharing")})),l?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("i",{className:"pnm-mic-unmute primaryColor text-[10px] lg:text-[14px]"}),f?(0,o.jsx)("div",Fr({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock primaryColor"})})):null]}),!u&&l?(0,o.jsx)("i",{className:"pnm-mic-unmute secondaryColor text-[10px] lg:text-[14px]"}):null,u&&l?(0,o.jsx)("i",{className:"pnm-mic-mute secondaryColor text-[10px] lg:text-[14px]"}):null]})),l?(0,o.jsx)(Rr,{currentRoom:t}):null]}))};var Vr=function(){return Vr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Vr.apply(this,arguments)},Gr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Hr=(0,pt.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e})),zr=(0,pt.P1)((function(e){return e.bottomIconsActivity.totalUnreadChatMsgs}),(function(e){return e}));const Qr=function(){var e=it(),t="desktop"===at.getState().session.userDeviceType,n=(0,lt.$)().t,r=st(Hr),i=st(zr),s=Gr((0,a.useState)("primaryColor"),2),l=s[0],c=s[1],u=Gr((0,a.useState)(!0),2),d=u[0],f=u[1];(0,a.useEffect)((function(){c(r?"secondaryColor":"primaryColor")}),[r]),(0,a.useEffect)((function(){var t;(null===(t=at.getState().session.currentRoom.metadata.room_features)||void 0===t?void 0:t.chat_features.allow_chat)||(f(!1),e(oe(!1)))}),[e]);return(0,o.jsx)(o.Fragment,{children:d?(0,o.jsxs)("div",Vr({className:"message footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(t?"has-tooltip":""),onClick:function(){e(oe(!r))}},{children:[(0,o.jsx)("span",Vr({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:n(r?"footer.icons.hide-chat-panel":"footer.icons.show-chat-panel")})),(0,o.jsx)("i",{className:"pnm-chat ".concat(l," text-[12px] lg:text-[16px]")}),!r&&i>0?(0,o.jsx)("div",Vr({className:"unseen-message-count bg-brandRed w-5 h-5 rounded-full text-xs text-white absolute -top-2 -right-1 flex justify-center items-center"},{children:i})):null]})):null})};var Xr=function(){return Xr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Xr.apply(this,arguments)},Jr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},qr=(0,pt.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e})),Yr=(0,pt.P1)((function(e){return e.participants}),(function(e){return e}));const $r=function(){var e=it(),t="desktop"===at.getState().session.userDeviceType,n=(0,lt.$)().t,r=st(qr),i=st(Yr),s=Jr((0,a.useState)("primaryColor"),2),l=s[0],c=s[1];(0,a.useEffect)((function(){c(r?"secondaryColor":"primaryColor")}),[r]);return(0,o.jsxs)("div",Xr({className:"participants footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] mr-3 lg:mr-6 relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer ".concat(t?"has-tooltip":""),onClick:function(){e(ae(!r))}},{children:[(0,o.jsx)("span",Xr({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:n(r?"footer.icons.hide-users-list":"footer.icons.show-users-list")})),(0,o.jsx)("i",{className:"pnm-participant ".concat(l," text-[12px] lg:text-[16px]")}),r?null:(0,o.jsx)("div",Xr({className:"unseen-message-count bg-secondaryColor w-5 h-5 rounded-full text-xs text-white absolute -top-2 -right-1 flex justify-center items-center"},{children:i.ids.length}))]}))};var Kr=n(9669),Zr=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},eo=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},to=n.n(Kr)().create({baseURL:window.PLUG_N_MEET_SERVER_URL+"/api"}),no=function(){if(at.getState().session.token)return at.getState().session.token;var e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).access_token};const ro=function(e,t){return Zr(void 0,void 0,void 0,(function(){return eo(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,to.post(e,JSON.stringify(t),{headers:{Authorization:no(),"Content-Type":"application/json"}})];case 1:return[2,n.sent().data];case 2:throw n.sent().response;case 3:return[2]}}))}))};var oo,ao,io;!function(e){e.USER="USER",e.SYSTEM="SYSTEM",e.WHITEBOARD="WHITEBOARD"}(oo||(oo={})),function(e){e.RAISE_HAND="RAISE_HAND",e.LOWER_HAND="LOWER_HAND",e.OTHER_USER_LOWER_HAND="OTHER_USER_LOWER_HAND",e.FILE_UPLOAD="FILE_UPLOAD",e.INFO="INFO",e.ALERT="ALERT",e.SEND_CHAT_MSGS="SEND_CHAT_MSGS",e.RENEW_TOKEN="RENEW_TOKEN",e.UPDATE_LOCK_SETTINGS="UPDATE_LOCK_SETTINGS",e.INIT_WHITEBOARD="INIT_WHITEBOARD",e.USER_VISIBILITY_CHANGE="USER_VISIBILITY_CHANGE",e.EXTERNAL_MEDIA_PLAYER_EVENTS="EXTERNAL_MEDIA_PLAYER_EVENTS"}(ao||(ao={})),function(e){e.SCENE_UPDATE="SCENE_UPDATE",e.POINTER_UPDATE="POINTER_UPDATE",e.ADD_WHITEBOARD_FILE="ADD_WHITEBOARD_FILE",e.ADD_WHITEBOARD_OFFICE_FILE="ADD_WHITEBOARD_OFFICE_FILE",e.PAGE_CHANGE="PAGE_CHANGE"}(io||(io={}));var so=function(){return so=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},so.apply(this,arguments)},lo=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},co=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},uo=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},fo=(0,pt.P1)((function(e){return e.bottomIconsActivity.isActiveRaisehand}),(function(e){return e}));const po=function(e){var t=e.currentRoom,n="desktop"===at.getState().session.userDeviceType,r=(0,lt.$)().t,i=it(),s=st(fo),c=uo((0,a.useState)("primaryColor"),2),u=c[0],d=c[1];(0,a.useEffect)((function(){d(s?"secondaryColor":"primaryColor")}),[s]);return(0,o.jsxs)("div",so({className:"hands footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(n?"has-tooltip":""),onClick:function(){return lo(void 0,void 0,void 0,(function(){var e,n;return co(this,(function(o){switch(o.label){case 0:return s?[3,2]:(e={sid:t.sid,room_id:t.name,msg_type:ao.RAISE_HAND,msg:r("footer.notice.has-raised-hand",{user:t.localParticipant.name})},[4,ro("dataMessage",e)]);case 1:return(n=o.sent()).status?(i(ie(!0)),(0,l.Am)(r("footer.notice.you-raised-hand"),{type:"info"})):(0,l.Am)(n.msg,{type:"error"}),[3,4];case 2:return e={sid:t.sid,room_id:t.name,msg_type:ao.LOWER_HAND,msg:ao.LOWER_HAND},[4,ro("dataMessage",e)];case 3:(n=o.sent()).status?i(ie(!1)):(0,l.Am)(n.msg,{type:"error"}),o.label=4;case 4:return[2]}}))}))}},{children:[(0,o.jsx)("span",so({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:r(s?"footer.icons.lower-hand":"footer.icons.raise-hand")})),(0,o.jsx)("i",{className:"pnm-raise-hand ".concat(u," text-[12px] lg:text-[16px]")})]}))};var mo=function(){return mo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mo.apply(this,arguments)},ho=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},vo=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},yo=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},bo=(0,pt.P1)((function(e){return e.bottomIconsActivity.isActiveScreenshare}),(function(e){return e})),xo=(0,pt.P1)((function(e){return e.session.screenSharing}),(function(e){return e})),go=(0,pt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_screen_sharing}),(function(e){return e}));const wo=function(e){var t,n,r=e.currentRoom,i="desktop"===at.getState().session.userDeviceType,s=it(),c=(0,lt.$)().t,u=st(bo),d=st(xo),f=st(go),p=yo((0,a.useState)("primaryColor"),2),m=p[0],h=p[1],v=yo((0,a.useState)(!1),2),y=v[0],b=v[1],x=null===(n=null===(t=at.getState().session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin;(0,a.useEffect)((function(){d.isActive&&d.sharedBy===r.localParticipant.identity?h("secondaryColor"):h("primaryColor")}),[d]);var g=(0,a.useCallback)((function(){u&&(r.localParticipant.tracks.forEach((function(e){e.source!==Ce.fQ.Source.ScreenShare&&e.source!==Ce.fQ.Source.ScreenShareAudio||!e.track||r.localParticipant.unpublishTrack(e.track)})),s(se(!1)),s(U({isActive:!1,sharedBy:""})))}),[u,s,r]);(0,a.useEffect)((function(){x||(f?(b(!0),g()):f||b(!1))}),[g,f]),(0,a.useEffect)((function(){!d.isActive&&u&&s(se(!1))}),[d]);return(0,o.jsx)(o.Fragment,{children:function(){var e;return null===(e=at.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.allow_screen_share}()?(0,o.jsxs)("div",mo({className:"share-screen footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 hidden md:flex items-center justify-center cursor-pointer ".concat(i?"has-tooltip":""),onClick:function(){return ho(void 0,void 0,void 0,(function(){return vo(this,(function(e){switch(e.label){case 0:return y?[2]:u?[3,2]:d.isActive?((0,l.Am)(c("footer.notice.already-active-screen-sharing"),{toastId:"dup-screen-share",type:"warning"}),[2]):[4,(0,Ce.QK)({audio:!0,resolution:St()})];case 1:return e.sent().forEach((function(e){return ho(void 0,void 0,void 0,(function(){return vo(this,(function(t){switch(t.label){case 0:return[4,r.localParticipant.publishTrack(e)];case 1:return t.sent(),[2]}}))}))})),s(se(!0)),s(U({isActive:!0,sharedBy:r.localParticipant.identity})),[3,3];case 2:g(),e.label=3;case 3:return[2]}}))}))}},{children:[(0,o.jsx)("span",mo({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:u?c("footer.icons.stop-screen-sharing"):u||y?y?c("footer.icons.screen-sharing-locked"):void 0:c("footer.icons.start-screen-sharing")})),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("i",{className:"pnm-screen-share ".concat(m," text-[12px] lg:text-[16px]")}),y?(0,o.jsx)("div",mo({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock primaryColor"})})):null]})]})):null})};var So=function(){return So=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},So.apply(this,arguments)},_o=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},jo=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ko=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},No=(0,pt.P1)((function(e){return e.session.isActiveRecording}),(function(e){return e}));const Co=function(){var e,t,n="desktop"===at.getState().session.userDeviceType,r=(0,lt.$)().t,i=st(No),s=ko((0,a.useState)(!1),2),c=s[0],u=s[1],d=ko((0,a.useState)(!1),2),f=d[0],p=d[1],m=ko((0,a.useState)(!0),2),h=m[0],v=m[1],y=null===(t=null===(e=at.getState().session.currentUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin,b=0;(0,a.useEffect)((function(){return i?(p(!0),clearTimeout(b),u(!1)):!i&&f&&(p(!1),clearTimeout(b),u(!1)),function(){clearTimeout(b)}}),[i,f,b]),(0,a.useEffect)((function(){var e;(null===(e=at.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.allow_recording)||v(!1)}),[]);var x=function(){return _o(void 0,void 0,void 0,(function(){var e,t,n;return jo(this,(function(o){switch(o.label){case 0:return e={task:"start-recording",sid:at.getState().session.currentRoom.sid},"undefined"!==typeof window.DESIGN_CUSTOMIZATION&&(e.custom_design="".concat(window.DESIGN_CUSTOMIZATION).replace(/\s/g,"")),[4,ro("recording",e)];case 1:return t=o.sent(),n="footer.notice.start-recording-progress",t.status||(n=t.msg),(0,l.Am)(r(n),{toastId:"recording-status",type:"info"}),b=setTimeout((function(){u(!1),(0,l.Am)(r("footer.notice.recording-not-start"),{toastId:"recording-status",type:"error"})}),3e4),[2]}}))}))},g=function(){return _o(void 0,void 0,void 0,(function(){var e,t,n;return jo(this,(function(o){switch(o.label){case 0:return e={task:"stop-recording",sid:at.getState().session.currentRoom.sid},[4,ro("recording",e)];case 1:return t=o.sent(),n="footer.notice.stop-recording-service-in-progress",t.status||(n=t.msg),(0,l.Am)(r(n),{toastId:"recording-status",type:"info"}),b=setTimeout((function(){u(!1),(0,l.Am)(r("footer.notice.recording-did-not-stop"),{toastId:"recording-status",type:"error"})}),3e4),[2]}}))}))};return(0,o.jsx)(o.Fragment,{children:h&&y?(0,o.jsxs)("button",So({className:"".concat(i?"record":""," footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ").concat(n?"has-tooltip":""),onClick:function(){return u(!0),void(i?g():x())},disabled:c},{children:[(0,o.jsx)("span",So({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:r(i?"footer.icons.stop-recording":"footer.icons.start-recording")})),(0,o.jsx)("i",{className:"pnm-rec primaryColor text-[10px] lg:text-[12px] font-['Nunito Sans'] font-bold"})]})):null})};var Eo=n(37371),To=function(){return To=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},To.apply(this,arguments)},Po=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Ao=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ro=(0,pt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.default_lock_settings}),(function(e){return e}));const Fo=function(){var e=it(),t=(0,lt.$)().t,n=st(Ro),r=at.getState().session,i=function(e,n){return Po(void 0,void 0,void 0,(function(){var o,a,i;return Ao(this,(function(s){switch(s.label){case 0:return o=e?"lock":"unlock",a={sid:r.currentRoom.sid,room_id:r.currentRoom.room_id,user_id:"all",service:n,direction:o},[4,ro("updateLockSettings",a)];case 1:return(i=s.sent()).status?(0,l.Am)(t("footer.notice.applied-settings"),{toastId:"lock-setting-status",type:"info"}):(0,l.Am)(i.msg,{type:"error"}),[2]}}))}))},s=function(){e(fe(!1))},c=function(){var e,r,a,s,l,c,u,d;return(0,o.jsxs)(Eo.r.Group,{children:[(0,o.jsxs)("div",To({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(Eo.r.Label,To({className:"pr-4 w-full"},{children:t("footer.modal.lock-microphone")})),(0,o.jsx)(Eo.r,To({checked:null!==(e=null===n||void 0===n?void 0:n.lock_microphone)&&void 0!==e&&e,onChange:function(e){return i(e,"mic")},className:"".concat((null===n||void 0===n?void 0:n.lock_microphone)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_microphone)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",To({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(Eo.r.Label,To({className:"pr-4 w-full"},{children:t("footer.modal.lock-webcams")})),(0,o.jsx)(Eo.r,To({checked:null!==(r=null===n||void 0===n?void 0:n.lock_webcam)&&void 0!==r&&r,onChange:function(e){return i(e,"webcam")},className:"".concat((null===n||void 0===n?void 0:n.lock_webcam)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_webcam)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",To({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(Eo.r.Label,To({className:"pr-4 w-full"},{children:t("footer.modal.lock-screen-sharing")})),(0,o.jsx)(Eo.r,To({checked:null!==(a=null===n||void 0===n?void 0:n.lock_screen_sharing)&&void 0!==a&&a,onChange:function(e){return i(e,"screenShare")},className:"".concat((null===n||void 0===n?void 0:n.lock_screen_sharing)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_screen_sharing)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",To({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(Eo.r.Label,To({className:"pr-4 w-full"},{children:t("footer.modal.lock-whiteboard")})),(0,o.jsx)(Eo.r,To({checked:null!==(s=null===n||void 0===n?void 0:n.lock_whiteboard)&&void 0!==s&&s,onChange:function(e){return i(e,"whiteboard")},className:"".concat((null===n||void 0===n?void 0:n.lock_whiteboard)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_whiteboard)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",To({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(Eo.r.Label,To({className:"pr-4 w-full"},{children:t("footer.modal.lock-shared-notepad")})),(0,o.jsx)(Eo.r,To({checked:null!==(l=null===n||void 0===n?void 0:n.lock_shared_notepad)&&void 0!==l&&l,onChange:function(e){return i(e,"sharedNotepad")},className:"".concat((null===n||void 0===n?void 0:n.lock_shared_notepad)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_shared_notepad)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",To({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(Eo.r.Label,To({className:"pr-4 w-full"},{children:t("footer.modal.lock-chat")})),(0,o.jsx)(Eo.r,To({checked:null!==(c=null===n||void 0===n?void 0:n.lock_chat)&&void 0!==c&&c,onChange:function(e){return i(e,"chat")},className:"".concat((null===n||void 0===n?void 0:n.lock_chat)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_chat)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",To({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(Eo.r.Label,To({className:"pr-4 w-full"},{children:t("footer.modal.lock-send-message")})),(0,o.jsx)(Eo.r,To({checked:null!==(u=null===n||void 0===n?void 0:n.lock_chat_send_message)&&void 0!==u&&u,onChange:function(e){return i(e,"sendChatMsg")},className:"".concat((null===n||void 0===n?void 0:n.lock_chat_send_message)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_chat_send_message)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",To({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(Eo.r.Label,To({className:"pr-4 w-full"},{children:t("footer.modal.lock-chat-file-share")})),(0,o.jsx)(Eo.r,To({checked:null!==(d=null===n||void 0===n?void 0:n.lock_chat_file_share)&&void 0!==d&&d,onChange:function(e){return i(e,"chatFile")},className:"".concat((null===n||void 0===n?void 0:n.lock_chat_file_share)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_chat_file_share)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]}))]})};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(mt.u,To({appear:!0,show:!0,as:a.Fragment},{children:(0,o.jsx)(ht.V,To({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:s},{children:(0,o.jsxs)("div",To({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(mt.u.Child,To({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(ht.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",To({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(mt.u.Child,To({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",To({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",To({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return s()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ht.V.Title,To({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-2"},{children:t("footer.modal.lock-settings-title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",To({className:"mt-6"},{children:c()}))]}))}))]}))}))}))})})};var Io=n(48966),Oo=function(){return Oo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Oo.apply(this,arguments)},Mo=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Do=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Uo=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Lo=(0,pt.P1)((function(e){return e.session.isActiveRtmpBroadcasting}),(function(e){return e}));const Bo=function(){var e=it(),t=(0,lt.$)().t,n=st(Lo),r=Uo((0,a.useState)("youtube"),2),i=r[0],s=r[1],c=Uo((0,a.useState)(!1),2),u=c[0],d=c[1],f=Uo((0,a.useState)(""),2),p=f[0],m=f[1],h=Uo((0,a.useState)(""),2),v=h[0],y=h[1],b={youtube:"rtmp://a.rtmp.youtube.com/live2/",facebook:"rtmps://live-api-s.facebook.com:443/rtmp/"};(0,a.useEffect)((function(){d("other"===i)}),[i]);var x=function(){e(pe(!1))},g=function(n){return void 0===n&&(n=!1),Mo(void 0,void 0,void 0,(function(){var r,o,a;return Do(this,(function(i){switch(i.label){case 0:return e(pe(!1)),n?(r={task:"stop-rtmp",sid:at.getState().session.currentRoom.sid},[4,ro("rtmp",r)]):[2];case 1:return o=i.sent(),a=t("footer.notice.rtmp-ending"),o.status||(a=o.msg),(0,l.Am)(t(a),{toastId:"rtmp-status",type:"info"}),[2]}}))}))};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(mt.u,Oo({appear:!0,show:n,as:a.Fragment},{children:(0,o.jsx)(ht.V,Oo({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:g},{children:(0,o.jsxs)("div",Oo({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(mt.u.Child,Oo({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(ht.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Oo({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(mt.u.Child,Oo({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Oo({className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Oo({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return g()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ht.V.Title,Oo({as:"h3",className:"text-lg font-medium leading-6 text-gray-900"},{children:t("footer.modal.rtmp-close-confirm")})),(0,o.jsx)("div",Oo({className:"mt-2"},{children:(0,o.jsx)("p",Oo({className:"text-sm text-gray-500"},{children:t("footer.modal.rtmp-close-msg")}))})),(0,o.jsxs)("div",Oo({className:"mt-4"},{children:[(0,o.jsx)("button",Oo({className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return g(!0)}},{children:t("ok")})),(0,o.jsx)("button",Oo({type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return g(!1)}},{children:t("close")}))]}))]}))}))]}))}))}))}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(mt.u,Oo({appear:!0,show:!n,as:a.Fragment},{children:(0,o.jsx)(ht.V,Oo({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:x},{children:(0,o.jsxs)("div",Oo({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(mt.u.Child,Oo({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(ht.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Oo({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(mt.u.Child,Oo({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Oo({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Oo({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return x()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ht.V.Title,Oo({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:t("footer.modal.rtmp-title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",Oo({className:"mt-6"},{children:(0,o.jsxs)("form",Oo({action:"#",method:"POST",onSubmit:function(n){return function(n){return Mo(void 0,void 0,void 0,(function(){var r,o,a,s;return Do(this,(function(c){switch(c.label){case 0:return n.preventDefault(),"other"===i&&(0,Io.isEmpty)(p)||(0,Io.isEmpty)(v)?[2]:(r="",r="other"===i?p:b[i],(0,Io.isURL)(r,{protocols:["rtmp","rtmps"]})?(o={task:"start-rtmp",sid:at.getState().session.currentRoom.sid,rtmp_url:r+"/"+v},"undefined"!==typeof window.DESIGN_CUSTOMIZATION&&(o.custom_design="".concat(window.DESIGN_CUSTOMIZATION).replace(/\s/g,"")),[4,ro("rtmp",o)]):[2]);case 1:return a=c.sent(),s="footer.notice.rtmp-starting",a.status||(s=a.msg),(0,l.Am)(t(s),{toastId:"rtmp-status",type:"info"}),e(pe(!1)),[2]}}))}))}(n)}},{children:[(0,o.jsx)("div",Oo({className:"s"},{children:(0,o.jsxs)("div",Oo({className:"grid grid-cols-6 gap-6"},{children:[(0,o.jsxs)("div",Oo({className:"col-span-6 sm:col-span-4"},{children:[(0,o.jsx)("label",Oo({htmlFor:"provider",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.rtmp-select-provider")})),(0,o.jsxs)("select",Oo({id:"provider",name:"provider",className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",onChange:function(e){return s(e.currentTarget.value)},value:i},{children:[(0,o.jsx)("option",Oo({value:"youtube"},{children:"YouTube"})),(0,o.jsx)("option",Oo({value:"facebook"},{children:"Facebook"})),(0,o.jsx)("option",Oo({value:"other"},{children:"Other"}))]}))]})),u?(0,o.jsxs)("div",Oo({className:"col-span-6 sm:col-span-4"},{children:[(0,o.jsx)("label",Oo({htmlFor:"stream-url",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.rtmp-server-url")})),(0,o.jsx)("input",{type:"text",name:"stream-url",id:"stream-url",value:p,onChange:function(e){return m(e.currentTarget.value)},className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md h-10 border border-solid border-black/50"})]})):null,(0,o.jsxs)("div",Oo({className:"col-span-6 sm:col-span-4"},{children:[(0,o.jsx)("label",Oo({htmlFor:"stream-key",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.rtmp-stream-key")})),(0,o.jsx)("input",{type:"text",name:"stream-key",id:"stream-key",value:v,onChange:function(e){return y(e.currentTarget.value)},className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md h-10 border border-solid border-black/50"})]}))]}))})),(0,o.jsx)("div",Oo({className:"px-4 py-3 bg-gray-50 text-right sm:px-6 mt-4"},{children:(0,o.jsx)("button",Oo({type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primaryColor hover:bg-secondaryColor focus:outline-none focus:ring-2 focus:ring-offset-2 focus:bg-secondaryColor"},{children:t("footer.modal.rtmp-start-broadcast")}))}))]}))}))]}))}))]}))}))}))})})};var Wo=n(96486),Vo=n(56310),Go=function(){return Go=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Go.apply(this,arguments)},Ho=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},zo=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Qo=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Xo=(0,pt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.external_media_player_features.is_active}),(function(e){return e}));const Jo=function(){var e=it(),t=(0,lt.$)().t,n=st(Xo),r=Qo((0,a.useState)(""),2),i=r[0],s=r[1],c=Qo((0,a.useState)(),2),u=c[0],d=c[1],f=function(e){u&&d(void 0),s(e.currentTarget.value)},p=function(){e(me(!1))},m=function(n){return void 0===n&&(n=!1),Ho(void 0,void 0,void 0,(function(){var r;return zo(this,(function(o){switch(o.label){case 0:return p(),n?(r=l.Am.loading(t("footer.notice.external-media-player-stopping"),{type:"info"}),[4,ro("externalMediaPlayer",{task:"end-playback"})]):[2];case 1:return o.sent().status||l.Am.update(r,{render:t("res.msg"),type:"error",isLoading:!1,autoClose:1e3}),l.Am.dismiss(r),e(me(!1)),[2]}}))}))};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(mt.u,Go({appear:!0,show:n,as:a.Fragment},{children:(0,o.jsx)(ht.V,Go({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:m},{children:(0,o.jsxs)("div",Go({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(mt.u.Child,Go({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(ht.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Go({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(mt.u.Child,Go({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Go({className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Go({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return m()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ht.V.Title,Go({as:"h3",className:"text-lg font-medium leading-6 text-gray-900"},{children:t("footer.modal.external-media-player-close-confirm")})),(0,o.jsx)("div",Go({className:"mt-2"},{children:(0,o.jsx)("p",Go({className:"text-sm text-gray-500"},{children:t("footer.modal.external-media-player-close-msg")}))})),(0,o.jsxs)("div",Go({className:"mt-4"},{children:[(0,o.jsx)("button",Go({className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return m(!0)}},{children:t("ok")})),(0,o.jsx)("button",Go({type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return m(!1)}},{children:t("close")}))]}))]}))}))]}))}))}))}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(mt.u,Go({appear:!0,show:!n,as:a.Fragment},{children:(0,o.jsx)(ht.V,Go({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:p},{children:(0,o.jsxs)("div",Go({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(mt.u.Child,Go({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(ht.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Go({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(mt.u.Child,Go({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Go({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Go({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return p()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ht.V.Title,Go({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:t("footer.modal.external-media-player-title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",Go({className:"mt-6"},{children:(0,o.jsxs)("form",Go({action:"#",method:"POST",onSubmit:function(n){return function(n){return Ho(void 0,void 0,void 0,(function(){var r,o;return zo(this,(function(a){switch(a.label){case 0:return n.preventDefault(),(0,Wo.isEmpty)(i)?(d(t("footer.notice.external-media-player-url-required")),[2]):Vo.Z.canPlay(i)?(d(void 0),p(),r=l.Am.loading(t("footer.notice.external-media-player-starting"),{type:"info"}),[4,ro("externalMediaPlayer",{task:"start-playback",url:i})]):(d(t("footer.notice.external-media-player-url-invalid")),[2]);case 1:return(o=a.sent()).status||l.Am.update(r,{render:t(o.msg),type:"error",isLoading:!1,autoClose:1e3}),l.Am.dismiss(r),e(me(!1)),[2]}}))}))}(n)}},{children:[(0,o.jsx)("div",Go({className:"s"},{children:(0,o.jsx)("div",Go({className:""},{children:(0,o.jsxs)("div",Go({className:""},{children:[(0,o.jsx)("label",Go({htmlFor:"stream-key",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.external-media-player-url")})),(0,o.jsx)("input",{type:"text",name:"stream-key",id:"stream-key",value:i,onChange:f,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md h-10 border border-solid border-black/50"}),u?(0,o.jsx)("div",Go({className:"error-msg absolute text-xs text-red-600 py-2"},{children:u})):null]}))}))})),(0,o.jsx)("div",Go({className:"pb-3 pt-4 bg-gray-50 text-right mt-4"},{children:(0,o.jsx)("button",Go({type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primaryColor hover:bg-secondaryColor focus:outline-none focus:ring-2 focus:ring-offset-2 focus:bg-secondaryColor"},{children:t("footer.modal.external-media-player-play")}))}))]}))}))]}))}))]}))}))}))})})};var qo=function(){return qo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qo.apply(this,arguments)},Yo=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},$o=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ko=(0,pt.P1)((function(e){return e.bottomIconsActivity.showLockSettingsModal}),(function(e){return e})),Zo=(0,pt.P1)((function(e){return e.session.isActiveRtmpBroadcasting}),(function(e){return e})),ea=(0,pt.P1)((function(e){return e.bottomIconsActivity.showRtmpModal}),(function(e){return e})),ta=(0,pt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.is_active}),(function(e){return e})),na=(0,pt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.external_media_player_features.is_active}),(function(e){return e})),ra=(0,pt.P1)((function(e){return e.bottomIconsActivity.showExternalMediaPlayerModal}),(function(e){return e}));const oa=function(){var e,t,n=at.getState().session,r=it(),a=(0,lt.$)().t,i=st(Ko),s=st(ta),c=st(ea),u=st(Zo),d=st(na),f=st(ra),p=null===(t=null===(e=at.getState().session.currentRoom)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.room_features;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",qo({className:"menu relative z-10"},{children:(0,o.jsx)($n.v,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($n.v.Button,qo({className:"footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-menu-horizontal primaryColor text-[3px] lg:text-[5px]"})})),(0,o.jsx)(mt.u,qo({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsxs)($n.v.Items,qo({static:!0,className:"origin-bottom-left sm:-left-20 right-0 sm:right-auto z-[9999] absolute mt-2 w-60 bottom-[48px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(null===p||void 0===p?void 0:p.allow_rtmp)?(0,o.jsx)("div",qo({className:"py-1",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:(0,o.jsxs)("button",qo({className:"footer-podcast-button text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){r(pe(!0))}},{children:[u?(0,o.jsxs)("div",qo({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]})):null,(0,o.jsx)("i",{className:"pnm-broadcasting text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a(u?"footer.icons.stop-rtmp-broadcasting":"footer.icons.start-rtmp-broadcasting")]}))})})):null,(0,o.jsx)("div",qo({className:"py-1",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:(0,o.jsxs)("button",qo({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){return Yo(void 0,void 0,void 0,(function(){var e,t;return $o(this,(function(r){switch(r.label){case 0:return e={sid:n.currentRoom.sid,room_id:n.currentRoom.room_id,user_id:"all",muted:!0},[4,ro("muteUnmuteTrack",e)];case 1:return(t=r.sent()).status?(0,l.Am)(a("footer.notice.muted-all-microphone"),{toastId:"asked-status",type:"info"}):(0,l.Am)(a(t.msg),{toastId:"asked-status",type:"error"}),[2]}}))}))}},{children:[(0,o.jsx)("i",{className:"pnm-mic-mute text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a("footer.menus.mute-all-users")]}))})})),(null===p||void 0===p?void 0:p.shared_note_pad_features.allowed_shared_note_pad)?(0,o.jsx)("div",qo({className:"py-1",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:(0,o.jsxs)("button",qo({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){return Yo(void 0,void 0,void 0,(function(){var e,t,n;return $o(this,(function(o){switch(o.label){case 0:return(e=null===(n=at.getState().session.currentRoom.metadata)||void 0===n?void 0:n.room_features.shared_note_pad_features.host)||s?[3,2]:[4,ro("etherpad/create",{})];case 1:return(t=o.sent()).status?r(le(!0)):(0,l.Am)(a(t.msg),{type:"error"}),[3,6];case 2:return!e||s?[3,4]:[4,ro("etherpad/changeStatus",{room_id:at.getState().session.currentRoom.room_id,is_active:!0})];case 3:return(t=o.sent()).status?r(le(!0)):(0,l.Am)(a(t.msg),{type:"error"}),[3,6];case 4:return e&&s?[4,ro("etherpad/changeStatus",{room_id:at.getState().session.currentRoom.room_id,is_active:!1})]:[3,6];case 5:(t=o.sent()).status?r(le(!1)):(0,l.Am)(a(t.msg),{type:"error"}),o.label=6;case 6:return[2]}}))}))}},{children:[(0,o.jsx)("i",{className:"pnm-notepad text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a(s?"footer.menus.disable-shared-notepad":"footer.menus.enable-shared-notepad")]}))})})):null,(null===p||void 0===p?void 0:p.external_media_player_features.allowed_external_media_player)?(0,o.jsx)("div",qo({className:"py-1",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:(0,o.jsxs)("button",qo({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){return Yo(void 0,void 0,void 0,(function(){return $o(this,(function(e){return r(me(!0)),[2]}))}))}},{children:[(0,o.jsx)("i",{className:"pnm-file-play text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a(d?"footer.menus.stop-external-media-player":"footer.menus.start-external-media-player")]}))})})):null,(0,o.jsx)("div",qo({className:"py-1",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:(0,o.jsxs)("button",qo({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){r(fe(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-lock text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a("footer.menus.room-lock-settings")]}))})}))]}))}))]})}})})),i?(0,o.jsx)(Fo,{}):null,c?(0,o.jsx)(Bo,{}):null,f?(0,o.jsx)(Jo,{}):null]})};var aa=function(){return aa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},aa.apply(this,arguments)},ia=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},sa=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},la=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ca=(0,pt.P1)((function(e){return e.bottomIconsActivity.isActiveSharedNotePad}),(function(e){return e})),ua=(0,pt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.is_active}),(function(e){return e})),da=(0,pt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.visible}),(function(e){return e}));const fa=function(){var e,t,n,r=(0,lt.$)().t,i=it(),s="desktop"===at.getState().session.userDeviceType,l=la((0,a.useState)("primaryColor"),2),c=l[0],u=l[1],d=st(ca),f=st(ua),p=st(da),m=la((0,a.useState)(!1),2),h=m[0],v=m[1],y=null===(t=null===(e=at.getState().session.currentUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin,b=null===(n=at.getState().session.currentUser)||void 0===n?void 0:n.isRecorder;(0,a.useEffect)((function(){i(le(!!f))}),[f,i]),(0,a.useEffect)((function(){d?(u("secondaryColor"),at.getState().bottomIconsActivity.isActiveWhiteboard&&i(ce(!1)),b||i(oe(!1))):u("primaryColor")}),[d,i]),(0,a.useEffect)((function(){f&&i(le(!!p))}),[p]),(0,a.useEffect)((function(){var e,t,n;if(y&&!b){var r=at.getState().session.currentRoom;if(h||!(null===(e=r.metadata)||void 0===e?void 0:e.room_features.shared_note_pad_features.visible)){h||v(!0);var o=function(e){return ia(void 0,void 0,void 0,(function(){return sa(this,(function(t){switch(t.label){case 0:return[4,ro("changeVisibility",e)];case 1:return t.sent(),[2]}}))}))};if(d&&!(null===(t=r.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.visible)){var a={room_id:r.room_id,visible_white_board:!1,visible_notepad:!0};setTimeout((function(){o(a)}),500)}else if(!d&&(null===(n=r.metadata)||void 0===n?void 0:n.room_features.shared_note_pad_features.visible)){var i={room_id:r.room_id,visible_notepad:!1};o(i)}}else v(!0)}}),[d]);return(0,o.jsx)(o.Fragment,{children:f?(0,o.jsxs)("div",aa({className:"shared-notepad h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(s?"has-tooltip":""),onClick:function(){return ia(void 0,void 0,void 0,(function(){return sa(this,(function(e){return at.getState().bottomIconsActivity.isActiveScreenshare||i(le(!d)),[2]}))}))}},{children:[(0,o.jsx)("span",aa({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:r(d?"footer.icons.hide-shared-notepad":"footer.icons.show-shared-notepad")})),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("i",{className:"pnm-notepad ".concat(c," text-[12px] lg:text-[16px]")})})]})):null})};var pa=function(){return pa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pa.apply(this,arguments)},ma=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},ha=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},va=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ya=(0,pt.P1)((function(e){return e.bottomIconsActivity.isActiveWhiteboard}),(function(e){return e})),ba=(0,pt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.whiteboard_features.visible}),(function(e){return e}));const xa=function(){var e,t,n,r,i=(0,lt.$)().t,s=it(),l="desktop"===at.getState().session.userDeviceType,c=va((0,a.useState)("primaryColor"),2),u=c[0],d=c[1],f=va((0,a.useState)(!1),2),p=f[0],m=f[1],h=st(ya),v=st(ba),y=null===(e=at.getState().session.currentRoom.metadata)||void 0===e?void 0:e.room_features.whiteboard_features.allowed_whiteboard,b=null===(n=null===(t=at.getState().session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin,x=null===(r=at.getState().session.currentUser)||void 0===r?void 0:r.isRecorder;(0,a.useEffect)((function(){h?(d("secondaryColor"),at.getState().bottomIconsActivity.isActiveSharedNotePad&&s(le(!1)),x||s(oe(!1))):d("primaryColor")}),[s,h]),(0,a.useEffect)((function(){y&&(v?s(ce(!0)):v||s(ce(!1)))}),[v]),(0,a.useEffect)((function(){var e,t,n;if(b&&!x){var r=at.getState().session.currentRoom;if(p||!(null===(e=r.metadata)||void 0===e?void 0:e.room_features.whiteboard_features.visible)){p||m(!0);var o=function(e){return ma(void 0,void 0,void 0,(function(){return ha(this,(function(t){switch(t.label){case 0:return[4,ro("changeVisibility",e)];case 1:return t.sent(),[2]}}))}))};if(h&&!(null===(t=r.metadata)||void 0===t?void 0:t.room_features.whiteboard_features.visible)){var a={room_id:r.room_id,visible_white_board:!0,visible_notepad:!1};setTimeout((function(){o(a)}),500)}else if(!h&&(null===(n=r.metadata)||void 0===n?void 0:n.room_features.whiteboard_features.visible)){var i={room_id:r.room_id,visible_white_board:!1};o(i)}}else m(!0)}}),[h]);return(0,o.jsx)(o.Fragment,{children:y?(0,o.jsxs)("div",pa({className:"whiteboard h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(l?"has-tooltip":""),onClick:function(){return ma(void 0,void 0,void 0,(function(){return ha(this,(function(e){return at.getState().bottomIconsActivity.isActiveScreenshare||s(ce(!h)),[2]}))}))}},{children:[(0,o.jsx)("span",pa({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:i(h?"footer.icons.hide-whiteboard":"footer.icons.show-whiteboard")})),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("i",{className:"pnm-whiteboard ".concat(u," text-[12px] lg:text-[16px]")})})]})):null})};var ga=function(){return ga=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ga.apply(this,arguments)};const wa=a.memo((function(e){var t,n,r=e.currentRoom,a=e.isRecorder,i=null===(n=null===(t=at.getState().session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin;return(0,o.jsx)("footer",ga({id:"main-footer",className:"h-[55px] lg:h-[60px] px-4 shadow-footer flex items-center justify-between",style:{display:a?"none":""}},{children:(0,o.jsxs)("div",ga({className:"footer-inner flex items-center justify-between w-full"},{children:[(0,o.jsxs)("div",ga({className:"footer-left w-52 flex items-center"},{children:[(0,o.jsx)(vr,{currentRoom:r}),(0,o.jsx)(Wr,{currentRoom:r})]})),(0,o.jsxs)("div",ga({className:"footer-middle flex items-center"},{children:[(0,o.jsx)($r,{}),(0,o.jsx)(Qr,{}),(0,o.jsx)(wo,{currentRoom:r}),(0,o.jsx)(po,{currentRoom:r}),(0,o.jsx)(xa,{}),(0,o.jsx)(fa,{}),(0,o.jsx)(Co,{}),i?(0,o.jsx)(oa,{}):null]})),(0,o.jsx)("div",{className:"footer-right w-52 hidden sm:flex items-center"})]}))}))}));var Sa=function(){return Sa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Sa.apply(this,arguments)};const _a=a.memo((function(e){var t,n,r=e.onOpenAlert,a=null===(n=null===(t=at.getState().session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin,i=it(),s=(0,lt.$)().t;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)($n.v.Items,Sa({static:!0,className:"origin-top-right z-10 absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(0,o.jsx)("div",Sa({className:"py-1",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:(0,o.jsxs)("button",Sa({className:"text-gray-700 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){i(Oe(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-settings text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),s("header.menus.settings")]}))})})),(0,o.jsx)("div",Sa({className:"py-1",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:(0,o.jsxs)("button",Sa({className:"text-gray-700 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){i(Le(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-keyboard text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),s("header.menus.keyboard-shortcuts")]}))})})),(0,o.jsx)("div",Sa({className:"py-1",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:(0,o.jsxs)("button",Sa({className:"text-gray-700 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){r("logout")}},{children:[(0,o.jsx)("i",{className:"pnm-logout text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),s("header.menus.logout")]}))})})),a?(0,o.jsx)("div",Sa({className:"py-1",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:(0,o.jsxs)("button",Sa({className:"text-red-900 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in",onClick:function(){r("end Room")}},{children:[(0,o.jsx)("i",{className:"pnm-call text-red-900 mr-2 transition ease-in "}),s("header.menus.end")]}))})})):null]}))})}));var ja=n(17969),ka=function(){return ka=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ka.apply(this,arguments)},Na=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Ca=(0,pt.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e})),Ea=(0,pt.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e}));const Ta=function(){var e=it(),t=(0,lt.$)().t,n=Na((0,a.useState)(at.getState().roomSettings.roomVideoQuality),2),r=n[0],i=n[1];(0,a.useEffect)((function(){e(We(r))}),[e,r]);var s=st(Ca),l=st(Ea),c=function(){e(Me(!s))},u=function(){e(De(!l))};return(0,o.jsx)("div",ka({className:"mt-2"},{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",ka({className:"flex items-center justify-between mb-2"},{children:[(0,o.jsx)("label",ka({htmlFor:"quality",className:"pr-4 w-full"},{children:t("header.room-settings.video-quality")})),(0,o.jsxs)("select",ka({id:"quality",name:"quality",className:"mt-1 block py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:r,onChange:function(e){return i(Number(e.target.value))}},{children:[(0,o.jsx)("option",ka({value:Ce.SF.LOW},{children:t("header.room-settings.low")})),(0,o.jsx)("option",ka({value:Ce.SF.MEDIUM},{children:t("header.room-settings.medium")})),(0,o.jsx)("option",ka({value:Ce.SF.HIGH},{children:t("header.room-settings.high")}))]}))]})),(0,o.jsxs)(Eo.r.Group,{children:[(0,o.jsxs)("div",ka({className:"flex items-center justify-between mb-2"},{children:[(0,o.jsx)(Eo.r.Label,ka({className:"pr-4 w-full"},{children:t("header.room-settings.show-webcams")})),(0,o.jsx)(Eo.r,ka({checked:s,onChange:c,className:"".concat(s?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat(s?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",ka({className:"flex items-center justify-between"},{children:[(0,o.jsx)(Eo.r.Label,ka({className:"pr-4 w-full"},{children:t("header.room-settings.show-screen-share")})),(0,o.jsx)(Eo.r,ka({checked:l,onChange:u,className:"".concat(l?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat(l?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]}))]})]})}))};var Pa=function(){return Pa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Pa.apply(this,arguments)},Aa=(0,pt.P1)((function(e){return e.roomSettings.allowPlayAudioNotification}),(function(e){return e}));const Ra=function(){var e=it(),t=(0,lt.$)().t,n=st(Aa),r=function(){e(Ue(!n))};return(0,o.jsx)("div",Pa({className:"mt-2"},{children:(0,o.jsx)(Eo.r.Group,{children:(0,o.jsxs)("div",Pa({className:"flex items-center justify-between mb-2"},{children:[(0,o.jsx)(Eo.r.Label,Pa({className:"pr-4 w-full"},{children:t("header.room-settings.allow-audio-notification")})),(0,o.jsx)(Eo.r,Pa({checked:n,onChange:r,className:"".concat(n?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat(n?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]}))})}))};const Fa=[{code:"en",text:"English"},{code:"es-ES",text:"Espa\xf1ol"},{code:"fr-FR",text:"Fran\xe7ais"},{code:"pt-PT",text:"Portugu\xeas"},{code:"zh-CN",text:"\u7b80\u4f53\u4e2d\u6587"},{code:"zh-HK",text:"\u7e41\u9ad4\u4e2d\u6587"}];var Ia=function(){return Ia=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ia.apply(this,arguments)};const Oa=function(){var e=(0,lt.$)(),t=e.t,n=e.i18n;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",Ia({className:"s"},{children:(0,o.jsx)("div",Ia({className:"grid"},{children:(0,o.jsxs)("div",Ia({className:"flex items-center justify-start"},{children:[(0,o.jsx)("label",Ia({htmlFor:"language",className:"w-2/5 block text-sm font-medium text-gray-700 mr-5"},{children:t("header.room-settings.language")})),(0,o.jsx)("select",Ia({id:"language",name:"language",value:n.languages[0],onChange:function(e){return n.changeLanguage(e.target.value)},className:"mt-1 block w-3/5 py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:Fa.map((function(e){var t=e.code,n=e.text;return(0,o.jsx)("option",Ia({value:t},{children:n}),t)}))}))]}))}))}))})};var Ma=function(){return Ma=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ma.apply(this,arguments)},Da=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Ua=(0,pt.P1)((function(e){return e.roomSettings.isShowRoomSettingsModal}),(function(e){return e}));const La=function(){var e=it(),t=(0,lt.$)().t,n=st(Ua),r=Da((0,a.useState)({"header.room-settings.application":[{id:1,elm:(0,o.jsx)(Oa,{})}],"header.room-settings.data-savings":[{id:1,elm:(0,o.jsx)(Ta,{})}],"header.room-settings.notifications":[{id:1,elm:(0,o.jsx)(Ra,{})}]}),1)[0],i=function(){e(Oe(!1))};var s=function(){return(0,o.jsx)("div",Ma({className:"max-w-full"},{children:(0,o.jsxs)(ja.O.Group,Ma({vertical:!0},{children:[(0,o.jsx)(ja.O.List,Ma({className:"flex p-1 space-x-1 bg-primaryColor rounded-xl"},{children:Object.keys(r).map((function(e){return(0,o.jsx)(ja.O,Ma({className:function(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(Boolean).join(" ")}("w-full py-1 text-xs sm:text-sm leading-5 font-medium text-secondaryColor rounded-lg outline-none","ring-white ring-opacity-60",e.selected?"bg-white shadow text-primaryColor":"hover:bg-white/[0.12] hover:text-white")}},{children:t(e)}),e)}))})),(0,o.jsx)(ja.O.Panels,Ma({className:"mt-2"},{children:Object.values(r).map((function(e,t){return(0,o.jsx)(ja.O.Panel,Ma({className:"bg-white rounded-xl p-3"},{children:(0,o.jsx)("ul",{children:e.map((function(e){return(0,o.jsx)("li",{children:e.elm},e.id)}))})}),t)}))}))]}))}))};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(mt.u,Ma({appear:!0,show:n,as:a.Fragment},{children:(0,o.jsx)(ht.V,Ma({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:i},{children:(0,o.jsxs)("div",Ma({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(mt.u.Child,Ma({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(ht.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Ma({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(mt.u.Child,Ma({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Ma({className:"inline-block w-full h-96 max-w-xl py-6 px-4 lg:px-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Ma({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return i()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ht.V.Title,Ma({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-2"},{children:t("header.room-settings.title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",Ma({className:"mt-2"},{children:s()})),(0,o.jsx)("div",Ma({className:"absolute inset-x-0 bottom-0 text-center text-xs"},{children:t("version",{pnm_version:"1.0.6",build:1652419203})}))]}))}))]}))}))}))}):null})};var Ba=function(){return Ba=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ba.apply(this,arguments)},Wa=(0,pt.P1)((function(e){return e.roomSettings.isShowKeyboardShortcuts}),(function(e){return e}));const Va=function(){var e=it(),t=(0,lt.$)().t,n=st(Wa),r=function(){e(Le(!1))};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(mt.u,Ba({appear:!0,show:n,as:a.Fragment},{children:(0,o.jsx)(ht.V,Ba({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:r},{children:(0,o.jsxs)("div",Ba({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(mt.u.Child,Ba({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(ht.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Ba({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(mt.u.Child,Ba({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Ba({className:"inline-block w-full max-w-xl py-6 px-4 lg:px-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Ba({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return r()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ht.V.Title,Ba({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-2"},{children:t("header.keyboard-shortcuts.title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",Ba({className:"mt-2"},{children:(0,o.jsxs)("table",Ba({className:"border-collapse border border-slate-500 w-full"},{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",Ba({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:(0,o.jsx)("strong",{children:t("header.keyboard-shortcuts.key-comb")})})),(0,o.jsx)("th",Ba({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:(0,o.jsx)("strong",{children:t("header.keyboard-shortcuts.actions")})}))]})}),(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ba({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + m"})),(0,o.jsx)("td",Ba({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base "},{children:t("header.keyboard-shortcuts.mute-unmute")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ba({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + a"})),(0,o.jsx)("td",Ba({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.start-audio")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ba({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + o"})),(0,o.jsx)("td",Ba({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.leave-audio")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ba({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + v"})),(0,o.jsx)("td",Ba({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.start-webcam")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ba({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + x"})),(0,o.jsx)("td",Ba({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.leave-webcam")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ba({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + u"})),(0,o.jsx)("td",Ba({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-user-list")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ba({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + c"})),(0,o.jsx)("td",Ba({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-chat")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ba({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + l"})),(0,o.jsx)("td",Ba({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-lock-settings")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ba({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + s"})),(0,o.jsx)("td",Ba({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-settings")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ba({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + w"})),(0,o.jsx)("td",Ba({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-whiteboard")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ba({className:"pl-2 border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + r"})),(0,o.jsx)("td",Ba({className:"pl-2 border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-hand")}))]})]})]}))}))]}))}))]}))}))}))}):null})};const Ga=function(e){var t=(0,a.useRef)();return(0,a.useEffect)((function(){t.current=e})),t.current};var Ha=function(){return Ha=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ha.apply(this,arguments)},za=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Qa=function(){var e=it(),t=za((0,a.useState)(at.getState().roomSettings.roomAudioVolume),2),n=t[0],r=t[1],i=Ga(n);(0,a.useEffect)((function(){i&&n!==i&&e(Be(n))}),[n,i,e]);return(0,o.jsx)($n.v,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($n.v.Button,Ha({className:"relative flex-shrink-0 p-2"},{children:(0,o.jsx)("div",Ha({className:"h-4 w-4 -mt-[2px]"},{children:n>0?(0,o.jsx)("i",{className:"pnm-speaker primaryColor"}):(0,o.jsx)("i",{className:"pnm-speaker-muted primaryColor"})}))})),(0,o.jsx)(mt.u,Ha({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)($n.v.Items,Ha({static:!0,className:"volume-popup-wrapper origin-top-right z-10 absolute right-0 top-4 mt-2 w-64 py-5 px-2 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:(0,o.jsxs)("section",Ha({className:"flex items-center"},{children:[(0,o.jsx)("input",{type:"range",min:0,max:1,step:.05,value:n,onChange:function(e){r(e.target.valueAsNumber)},className:"range flex-1"}),(0,o.jsx)("p",Ha({className:"w-10 text-center text-sm"},{children:Math.round(100*n)})),(0,o.jsx)("button",Ha({className:"w-5 h-5"},{children:n>0?(0,o.jsx)("i",{className:"pnm-speaker primaryColor"}):(0,o.jsx)("i",{className:"pnm-speaker-muted primaryColor"})}))]}))}))}))]})}})};var Xa=function(){return Xa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Xa.apply(this,arguments)},Ja=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},qa=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ya=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},$a=(0,pt.P1)((function(e){return e.session.currentRoom.metadata}),(function(e){return e}));const Ka=a.memo((function(e){var t,n,r=e.currentRoom,i=st($a),s=(0,lt.$)().t,c=Ya((0,a.useState)(""),2),u=c[0],d=c[1],f=Ya((0,a.useState)(!1),2),p=f[0],m=f[1],h=Ya((0,a.useState)(""),2),v=h[0],y=h[1],b=Ya((0,a.useState)(""),2),x=b[0],g=b[1],w=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets",S=null!==(n=window.CUSTOM_LOGO)&&void 0!==n?n:"".concat(w,"/imgs/main-logo.png");(0,a.useEffect)((function(){i&&d(i.room_title)}),[i]);var _=function(e){return void 0===e&&(e=!1),Ja(void 0,void 0,void 0,(function(){var t,n,o;return qa(this,(function(a){switch(a.label){case 0:return m(!1),e?"logout"!==x?[3,1]:(r.disconnect(),[3,3]):[2];case 1:return"end Room"!==x?[3,3]:(t=at.getState().session,n={room_id:t.currentRoom.room_id},[4,ro("endRoom",n)]);case 2:(o=a.sent()).status||(0,l.Am)(o.msg,{type:"error"}),a.label=3;case 3:return[2]}}))}))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("header",Xa({id:"main-header",className:"relative z-[99999] h-[50px] px-4 shadow-header flex items-center justify-between bg-white"},{children:[(0,o.jsx)("div",{className:"header-before-start absolute top-0 left-[-35px] w-[300px] pointer-events-none bg-cover bg-center h-full",style:{backgroundImage:'url("'.concat(w,'/imgs/header-before2.png")')}}),(0,o.jsx)("div",Xa({className:"logo w-28 relative z-20"},{children:(0,o.jsx)("div",{className:"".concat((window.CUSTOM_LOGO,"h-[45px]")," header-logo h-full bg-contain bg-no-repeat"),style:{backgroundImage:'url("'.concat(S,'")')}})})),(0,o.jsx)("div",Xa({className:"middle flex-auto relative z-20"},{children:(0,o.jsx)("h2",Xa({className:"header-title text-base text-black leading-[1] text-center"},{children:u}))})),(0,o.jsxs)("div",Xa({className:"dark w-28 flex items-center justify-end relative z-20 -right-3"},{children:[(0,o.jsx)(Qa,{}),(0,o.jsx)($n.v,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($n.v.Button,Xa({className:"relative flex-shrink-0 p-2"},{children:(0,o.jsx)("div",Xa({className:"h-5 w-5 rotate-90 "},{children:(0,o.jsx)("i",{className:"pnm-menu-small"})}))})),(0,o.jsx)(mt.u,Xa({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(_a,{onOpenAlert:function(e){return function(e){g(e),"logout"===e?y(s("header.menus.alert.logout")):"end Room"===e&&y(s("header.menus.alert.end")),m(!0)}(e)}})}))]})}})]})),(0,o.jsx)("div",{className:"header-before-end absolute top-0 right-[-100px] w-[350px] lg:w-[380px] rotate-[156deg] pointer-events-none bg-cover bg-center h-full",style:{backgroundImage:'url("'.concat(w,'/imgs/header-before2.png")')}}),p?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(mt.u,Xa({appear:!0,show:p,as:a.Fragment},{children:(0,o.jsx)(ht.V,Xa({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:_},{children:(0,o.jsxs)("div",Xa({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(mt.u.Child,Xa({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(ht.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Xa({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(mt.u.Child,Xa({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Xa({className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Xa({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return _()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ht.V.Title,Xa({as:"h3",className:"text-lg font-medium leading-6 text-gray-900"},{children:s("header.menus.alert.confirm")})),(0,o.jsx)("div",Xa({className:"mt-2"},{children:(0,o.jsx)("p",Xa({className:"text-sm text-gray-500"},{children:v}))})),(0,o.jsxs)("div",Xa({className:"mt-4"},{children:[(0,o.jsx)("button",Xa({className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return _(!0)}},{children:s("ok")})),(0,o.jsx)("button",Xa({type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium bg-primaryColor hover:bg-secondaryColor text-white border border-transparent rounded-md focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return _(!1)}},{children:s("close")}))]}))]}))}))]}))}))}))}):null]})),(0,o.jsx)(La,{}),(0,o.jsx)(Va,{})]})}));var Za=function(){return Za=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Za.apply(this,arguments)};const ei=function(e){var t=e.participant;return(0,o.jsx)("div",Za({className:"thumb h-[22px] xl:h-[30px] w-[22px] xl:w-[30px] mr-2 rounded-full overflow-hidden bg-primaryColor flex items-center justify-center text-white text-xs xl:text-sm"},{children:t.metadata.profile_pic?(0,o.jsx)("img",{src:t.metadata.profile_pic,alt:t.name}):(0,o.jsx)(o.Fragment,{children:t.name.slice(0,2).toUpperCase()})}))};var ti=function(){return ti=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ti.apply(this,arguments)};const ni=function(e){var t=e.name,n=e.isCurrentUser;return(0,o.jsxs)("p",ti({className:"text-[11px] xl:text-[13px] primaryColor"},{children:[t," ",n?" (me)":null]}))};var ri=function(){return ri=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ri.apply(this,arguments)};const oi=function(e){var t=e.userId,n=st((function(e){return N.selectById(e,t)}));return(0,o.jsx)(o.Fragment,{children:(null===n||void 0===n?void 0:n.metadata.raised_hand)?(0,o.jsx)("div",ri({className:"hand mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-raise-hand text-[#ffbd40] text-[8px]"})})):null})};var ai=function(){return ai=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ai.apply(this,arguments)},ii=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},si=(0,pt.P1)((function(e){return e.roomSettings.roomAudioVolume}),(function(e){return e}));const li=function(e){var t=e.userId,n=e.remoteParticipant,r=ii((0,a.useState)(1),2),i=r[0],s=r[1],l=Ga(i),c=st((function(e){return N.selectById(e,t)})),u=st(si);(0,a.useEffect)((function(){(null===n||void 0===n?void 0:n.audioTracks.size)&&s(u)}),[u,n]),(0,a.useEffect)((function(){if(l&&i!==l&&n)try{n.getVolume()!==i&&n.audioTracks.size>0&&n.setVolume(i)}catch(e){}}),[i,l,n]);return(null===c||void 0===c?void 0:c.audioTracks)?c.isMuted?(0,o.jsx)("div",ai({className:"mic muted mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-mute secondaryColor opacity-50 text-[8px]"})})):n?(0,o.jsx)("div",ai({className:"mic mr-2 cursor-pointer"},{children:(0,o.jsx)($n.v,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($n.v.Button,{children:(0,o.jsx)("i",{className:"pnm-mic-unmute secondaryColor opacity-50 text-[8px]"})}),(0,o.jsx)(mt.u,ai({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)($n.v.Items,ai({static:!0,className:"volume-popup-wrapper origin-top-right z-10 absolute -right-6 -top-2 mt-2 w-48 xl:w-60 py-5 px-2 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:(0,o.jsxs)("section",ai({className:"flex items-center"},{children:[(0,o.jsx)("input",{type:"range",min:0,max:1,step:.05,value:i,onChange:function(e){s(e.target.valueAsNumber)},className:"range flex-1"}),(0,o.jsx)("p",ai({className:"w-10 text-center text-sm"},{children:Math.round(100*i)})),(0,o.jsx)("button",ai({className:"w-5 h-5"},{children:(0,o.jsx)("i",{className:"pnm-speaker primaryColor"})}))]}))}))}))]})}})})):(0,o.jsx)("div",ai({className:"mic mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute secondaryColor opacity-50 text-[8px]"})})):null};var ci=function(){return ci=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ci.apply(this,arguments)};const ui=function(e){var t=e.userId,n=st((function(e){return N.selectById(e,t)}));return(0,o.jsx)(o.Fragment,{children:(null===n||void 0===n?void 0:n.videoTracks)?(0,o.jsx)("div",ci({className:"mic mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-webcam secondaryColor opacity-50 text-[8px]"})})):null})};var di,fi,pi=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},mi=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},hi=function(e){var t=Se.selectAll(at.getState()),n=at.getState().session;t.filter((function(e){return"system"!==e.from.sid})).slice(-30).map((function(t){return pi(void 0,void 0,void 0,(function(){var r,o;return mi(this,(function(a){return r=t,o={type:oo.USER,body:r,to:e.body.from.sid,room_sid:n.currentRoom.sid,message_id:""},Ti(JSON.stringify(o)),[2]}))}))}))},vi=function(e){at.getState().whiteboard.requestedWhiteboardData.requested||at.dispatch(qe({requested:!0,sendTo:e.body.from.sid}))},yi=function(e){at.dispatch(I(e.body.msg))},bi=function(e){switch(e.body.type){case ao.INFO:(0,l.Am)(e.body.msg,{toastId:"info-status",type:"info"});break;case ao.ALERT:(0,l.Am)(e.body.msg,{toastId:"alert-status",type:"warning"})}},xi=function(e){at.dispatch(P({id:e.body.from.userId,changes:{visibility:e.body.msg}}))},gi=function(e){var t=JSON.parse(e.body.msg);at.dispatch(tt(t.action)),"undefined"!==typeof t.seekTo&&at.dispatch(nt(t.seekTo))},wi=function(e){var t=JSON.parse(e);at.dispatch($e(t))},Si=!1,_i=0,ji=!1,ki=function(){var e=Ci();(di=new WebSocket(e)).onopen=function(){Si=!0,function(){var e,t,n,r,o,a,i,s,l=at.getState().session,c=N.selectAll(at.getState()).filter((function(e){var t;return e.sid!==(null===(t=l.currentUser)||void 0===t?void 0:t.sid)}));if(c.length){c.sort((function(e,t){return e.joinedAt-t.joinedAt}));var u=c[0],d={type:oo.SYSTEM,room_sid:l.currentRoom.sid,message_id:"",to:u.sid,body:{type:ao.SEND_CHAT_MSGS,from:{sid:null!==(t=null===(e=l.currentUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(r=null===(n=l.currentUser)||void 0===n?void 0:n.userId)&&void 0!==r?r:""},msg:""}};Ti(JSON.stringify(d));var f={type:oo.SYSTEM,room_sid:l.currentRoom.sid,message_id:"",to:u.sid,body:{type:ao.INIT_WHITEBOARD,from:{sid:null!==(a=null===(o=l.currentUser)||void 0===o?void 0:o.sid)&&void 0!==a?a:"",userId:null!==(s=null===(i=l.currentUser)||void 0===i?void 0:i.userId)&&void 0!==s?s:""},msg:""}};Ti(JSON.stringify(f))}}(),at.dispatch(V(!0)),fi&&(clearInterval(fi),fi=0,_i=0)},di.onclose=function(){Si=!1,at.dispatch(V(!1)),fi||ji||(fi=setInterval((function(){_i>10&&(clearInterval(fi),_i=0),di=void 0,ki(),_i++}),2e3))},di.onerror=function(){console.log("Error in websocket")},di.onmessage=function(e){Ni(e)}},Ni=function(e){if(e.data){var t=void 0;try{t=JSON.parse(e.data)}catch(o){return void console.log(e.data)}"USER"===t.type?(n=t.body,r=t.message_id,"CHAT"===n.type&&(n.message_id||(n.message_id=r),at.dispatch(je(n)),n.isPrivate||at.getState().bottomIconsActivity.isActiveChatPanel||at.dispatch(ye()))):"SYSTEM"===t.type?function(e){switch(e.body.type){case ao.SEND_CHAT_MSGS:hi(e);break;case ao.INIT_WHITEBOARD:vi(e);break;case ao.RENEW_TOKEN:yi(e);break;case ao.INFO:case ao.ALERT:bi(e);break;case ao.USER_VISIBILITY_CHANGE:xi(e);break;case ao.EXTERNAL_MEDIA_PLAYER_EVENTS:gi(e)}}(t):"WHITEBOARD"===t.type&&function(e){"SCENE_UPDATE"===e.type?at.dispatch(ze(e.msg)):"POINTER_UPDATE"===e.type?at.dispatch(Qe(e.msg)):"ADD_WHITEBOARD_FILE"===e.type?at.dispatch(Je(e.msg)):"PAGE_CHANGE"===e.type?at.dispatch(Ye(Number(e.msg))):"ADD_WHITEBOARD_OFFICE_FILE"===e.type&&wi(e.msg)}(t.body)}var n,r},Ci=function(){var e,t=new URL(window.PLUG_N_MEET_SERVER_URL),n=at.getState().session,r="ws://";"https:"===t.protocol&&(r="wss://"),e=r+t.host,"/"!==t.pathname&&(e+=t.pathname);var o=n.token,a=n.currentUser,i=n.currentRoom;return e=e+"/ws?token="+o+"&roomSid="+i.sid+"&userSid="+(null===a||void 0===a?void 0:a.sid)+"&roomId="+i.room_id+"&userId="+(null===a||void 0===a?void 0:a.userId)},Ei=function(){return Si},Ti=function(e){Si&&(null===di||void 0===di||di.send(e))},Pi=function(){return Pi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Pi.apply(this,arguments)},Ai=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Ri=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Fi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Ii=function(e){var t,n=e.userId,r=st((function(e){return N.selectById(e,n)})),i=at.getState().session,s=Fi((0,a.useState)("Ask to share Microphone"),2),c=s[0],u=s[1],d=Fi((0,a.useState)(""),2),f=d[0],p=d[1],m=(0,lt.$)().t;(0,a.useEffect)((function(){0===(null===r||void 0===r?void 0:r.audioTracks)?(u(m("left-panel.menus.items.ask-to-share-microphone")),p("left-panel.menus.items.share-microphone")):(null===r||void 0===r?void 0:r.isMuted)?(u(m("left-panel.menus.items.ask-to-unmute-mic")),p("left-panel.menus.items.unmute-mic")):(null===r||void 0===r?void 0:r.audioTracks)&&(u(m("left-panel.menus.items.mute-mic")),p("mute"))}),[m,null===r||void 0===r?void 0:r.isMuted,null===r||void 0===r?void 0:r.audioTracks]);var h=function(){return Ai(void 0,void 0,void 0,(function(){var e,t,n;return Ri(this,(function(o){switch(o.label){case 0:return e=at.getState().session,t={sid:e.currentRoom.sid,room_id:e.currentRoom.room_id,user_id:null===r||void 0===r?void 0:r.userId,muted:!0},[4,ro("muteUnmuteTrack",t)];case 1:return(n=o.sent()).status?(0,l.Am)(m("left-panel.menus.notice.you-have-muted-to",{name:null===r||void 0===r?void 0:r.name}),{toastId:"asked-status",type:"info"}):(0,l.Am)(m(n.msg),{toastId:"asked-status",type:"error"}),[2]}}))}))};return(0,o.jsx)(o.Fragment,{children:(null===(t=i.currentUser)||void 0===t?void 0:t.userId)!==(null===r||void 0===r?void 0:r.userId)?(0,o.jsx)("div",Pi({className:"",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:function(){return(0,o.jsx)("button",Pi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return function(){var e,t,n,o,a;if("mute"!==f){var s={type:oo.SYSTEM,room_sid:i.currentRoom.sid,message_id:"",to:null===r||void 0===r?void 0:r.sid,body:{type:ao.INFO,from:{sid:null!==(t=null===(e=i.currentUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(o=null===(n=i.currentUser)||void 0===n?void 0:n.userId)&&void 0!==o?o:""},msg:m("left-panel.menus.notice.asked-you-to",{name:null===(a=i.currentUser)||void 0===a?void 0:a.name})+m(f)}};Ti(JSON.stringify(s)),(0,l.Am)(m("left-panel.menus.notice.you-have-asked",{name:null===r||void 0===r?void 0:r.name})+m(f),{toastId:"asked-status",type:"info"})}else h()}()}},{children:c}))}})})):null})};var Oi=function(){return Oi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Oi.apply(this,arguments)},Mi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Di=function(e){var t,n,r=e.userId,i=(0,lt.$)().t,s=st((function(e){return N.selectById(e,r)})),c=null===(t=at.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features,u=at.getState().session,d=Mi((0,a.useState)("Ask to share Webcam"),2),f=d[0],p=d[1],m=Mi((0,a.useState)(""),2),h=m[0],v=m[1];(0,a.useEffect)((function(){0===(null===s||void 0===s?void 0:s.videoTracks)?(p(i("left-panel.menus.items.ask-to-share-webcam")),v("left-panel.menus.items.share-webcam")):(p(i("left-panel.menus.items.ask-to-stop-webcam")),v("left-panel.menus.items.stop-webcam"))}),[i,null===s||void 0===s?void 0:s.videoTracks]);return(0,o.jsx)(o.Fragment,{children:(null===(n=u.currentUser)||void 0===n?void 0:n.userId)!==(null===s||void 0===s?void 0:s.userId)&&(null===c||void 0===c?void 0:c.allow_webcams)&&!c.admin_only_webcams?(0,o.jsx)("div",Oi({className:"",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:function(){return(0,o.jsx)("button",Oi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return function(){var e,t,n,r,o,a={type:oo.SYSTEM,room_sid:u.currentRoom.sid,message_id:"",to:null===s||void 0===s?void 0:s.sid,body:{type:ao.INFO,from:{sid:null!==(t=null===(e=u.currentUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(r=null===(n=u.currentUser)||void 0===n?void 0:n.userId)&&void 0!==r?r:""},msg:i("left-panel.menus.notice.asked-you-to",{name:null===(o=u.currentUser)||void 0===o?void 0:o.name})+i(h)}};Ti(JSON.stringify(a)),(0,l.Am)(i("left-panel.menus.notice.you-have-asked",{name:null===s||void 0===s?void 0:s.name})+i(h),{toastId:"asked-status",type:"info"})}()}},{children:f}))}})})):null})};var Ui=function(){return Ui=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ui.apply(this,arguments)},Li=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Bi=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const Wi=function(e){var t=e.userId,n=st((function(e){return N.selectById(e,t)})),r=(0,lt.$)().t;return(0,o.jsx)("div",Ui({className:"",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:function(){return(0,o.jsx)("button",Ui({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return Li(void 0,void 0,void 0,(function(){var e,t;return Bi(this,(function(o){switch(o.label){case 0:return e={user_id:null===n||void 0===n?void 0:n.userId,task:(null===n||void 0===n?void 0:n.metadata.is_presenter)?"demote":"promote"},[4,ro("switchPresenter",e)];case 1:return(t=o.sent()).status?(0,l.Am)(r("left-panel.menus.notice.presenter-changed"),{toastId:"lock-setting-status",type:"info"}):(0,l.Am)(r(t.msg),{toastId:"lock-setting-status",type:"error"}),[2]}}))}))}},{children:(null===n||void 0===n?void 0:n.metadata.is_presenter)?r("footer.icons.demote-presenter"):r("footer.icons.promote-presenter")}))}})}))};var Vi=function(){return Vi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Vi.apply(this,arguments)},Gi=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Hi=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const zi=function(e){var t=e.userId,n=st((function(e){return N.selectById(e,t)})),r=it(),a=(0,lt.$)().t;return(0,o.jsx)(o.Fragment,{children:(null===n||void 0===n?void 0:n.metadata.raised_hand)?(0,o.jsx)("div",Vi({className:"",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:function(){return(0,o.jsx)("button",Vi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return Gi(void 0,void 0,void 0,(function(){var e,t,o;return Hi(this,(function(i){switch(i.label){case 0:return e=at.getState().session,t={sid:e.currentRoom.sid,room_id:e.currentRoom.room_id,msg_type:ao.OTHER_USER_LOWER_HAND,msg:null===n||void 0===n?void 0:n.userId},[4,ro("dataMessage",t)];case 1:return(o=i.sent()).status?r(ie(!1)):(0,l.Am)(a(o.msg),{type:"error"}),[2]}}))}))}},{children:a("footer.icons.lower-hand")}))}})})):null})};var Qi=function(){return Qi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qi.apply(this,arguments)},Xi=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Ji=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const qi=function(e){var t,n=e.userId,r=null===(t=at.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features,a=(0,lt.$)().t,i=st((function(e){return N.selectById(e,n)})),s=function(e){return Xi(void 0,void 0,void 0,(function(){var t,n,r,o,s,c;return Ji(this,(function(u){switch(u.label){case 0:switch(t=i.metadata,n=at.getState().session,r=e,o="lock",e){case"mic":o=(null===t||void 0===t?void 0:t.lock_settings.lock_microphone)?"unlock":"lock";break;case"webcam":o=(null===t||void 0===t?void 0:t.lock_settings.lock_webcam)?"unlock":"lock";break;case"screenShare":o=(null===t||void 0===t?void 0:t.lock_settings.lock_screen_sharing)?"unlock":"lock";break;case"whiteboard":o=(null===t||void 0===t?void 0:t.lock_settings.lock_whiteboard)?"unlock":"lock";break;case"sharedNotepad":o=(null===t||void 0===t?void 0:t.lock_settings.lock_shared_notepad)?"unlock":"lock";break;case"chat":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat)?"unlock":"lock";break;case"sendChatMsg":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat_send_message)?"unlock":"lock";break;case"chatFile":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat_file_share)?"unlock":"lock"}return s={sid:n.currentRoom.sid,room_id:n.currentRoom.room_id,user_id:null===i||void 0===i?void 0:i.userId,service:r,direction:o},[4,ro("updateLockSettings",s)];case 1:return(c=u.sent()).status?(0,l.Am)(a("left-panel.menus.notice.applied-new-setting"),{toastId:"lock-setting-status",type:"info"}):(0,l.Am)(a(c.msg),{type:"error"}),[2]}}))}))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",Qi({className:"",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:function(){return(0,o.jsx)("button",Qi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("mic")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_microphone)?a("left-panel.menus.items.unlock-microphone"):a("left-panel.menus.items.lock-microphone")}))}})})),(null===r||void 0===r?void 0:r.allow_webcams)&&!(null===r||void 0===r?void 0:r.admin_only_webcams)?(0,o.jsx)("div",Qi({className:"",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:function(){return(0,o.jsx)("button",Qi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("webcam")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_webcam)?a("left-panel.menus.items.unlock-webcam"):a("left-panel.menus.items.lock-webcam")}))}})})):null,(null===r||void 0===r?void 0:r.allow_screen_share)?(0,o.jsx)("div",Qi({className:"",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:function(){return(0,o.jsx)("button",Qi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("screenShare")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_screen_sharing)?a("left-panel.menus.items.unlock-screen-sharing"):a("left-panel.menus.items.lock-screen-sharing")}))}})})):null,(null===r||void 0===r?void 0:r.whiteboard_features.allowed_whiteboard)?(0,o.jsx)("div",Qi({className:"",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:function(){return(0,o.jsx)("button",Qi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("whiteboard")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_whiteboard)?a("left-panel.menus.items.unlock-whiteboard"):a("left-panel.menus.items.lock-whiteboard")}))}})})):null,(null===r||void 0===r?void 0:r.shared_note_pad_features.allowed_shared_note_pad)?(0,o.jsx)("div",Qi({className:"",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:function(){return(0,o.jsx)("button",Qi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("sharedNotepad")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_shared_notepad)?a("left-panel.menus.items.unlock-shared-notepad"):a("left-panel.menus.items.lock-shared-notepad")}))}})})):null,(null===r||void 0===r?void 0:r.chat_features.allow_chat)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",Qi({className:"",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:function(){return(0,o.jsx)("button",Qi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("chat")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_chat)?a("left-panel.menus.items.unlock-chat"):a("left-panel.menus.items.lock-chat")}))}})})),(0,o.jsx)("div",Qi({className:"",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:function(){return(0,o.jsx)("button",Qi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("sendChatMsg")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_chat_send_message)?a("left-panel.menus.items.unlock-send-chat-message"):a("left-panel.menus.items.lock-send-chat-message")}))}})})),r.chat_features.allow_file_upload?(0,o.jsx)("div",Qi({className:"",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:function(){return(0,o.jsx)("button",Qi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("chatFile")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_chat_file_share)?a("left-panel.menus.items.unlock-send-file"):a("left-panel.menus.items.lock-send-file")}))}})})):null]}):null]})};var Yi=function(){return Yi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Yi.apply(this,arguments)};const $i=function(e){var t=e.userId,n=e.onOpenAlert,r=(0,lt.$)().t;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",Yi({className:"",role:"none"},{children:(0,o.jsx)($n.v.Item,{children:function(){return(0,o.jsx)("button",Yi({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-red-400 hover:text-white",onClick:function(){n(t)}},{children:r("left-panel.menus.items.remove-participant")}))}})}))})})};var Ki=function(){return Ki=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ki.apply(this,arguments)},Zi=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},es=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ts=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const ns=function(e){var t=e.userId,n=e.name,r=ts((0,a.useState)(!1),2),i=r[0],s=r[1],c=ts((0,a.useState)(0),2),u=c[0],d=c[1],f=(0,lt.$)().t,p=function(e){e===t&&s(!0)},m=function(e){return void 0===e&&(e=!1),Zi(void 0,void 0,void 0,(function(){var n,r,o;return es(this,(function(a){switch(a.label){case 0:return s(!1),e?(n=at.getState().session,r={sid:n.currentRoom.sid,room_id:n.currentRoom.room_id,user_id:t,msg:f("notifications.you-have-removed"),block_user:1===u},[4,ro("removeParticipant",r)]):[2];case 1:return(o=a.sent()).status?(0,l.Am)(f("left-panel.menus.notice.participant-removed"),{toastId:"user-remove-status",type:"info"}):(0,l.Am)(f(o.msg),{type:"error"}),[2]}}))}))};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($n.v,{children:function(e){var n=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($n.v.Button,Ki({className:"relative flex-shrink-0 mt-2"},{children:(0,o.jsx)("i",{className:"pnm-menu-small primaryColor opacity-50"})})),(0,o.jsx)(mt.u,Ki({show:n,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsxs)($n.v.Items,Ki({static:!0,className:"origin-top-right z-10 absolute right-0 mt-2 w-44 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(0,o.jsx)(Ii,{userId:t}),(0,o.jsx)(Di,{userId:t}),(0,o.jsx)(Wi,{userId:t}),(0,o.jsx)(zi,{userId:t}),(0,o.jsx)(qi,{userId:t}),(0,o.jsx)($i,{onOpenAlert:p,userId:t})]}))}))]})}}),(0,o.jsx)(mt.u,Ki({show:i,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(ht.V,Ki({open:i,onClose:function(){return m()},className:"remove-participants-popup fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",Ki({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(ht.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,o.jsxs)("div",Ki({className:"popup-inner bg-white w-full max-w-sm rounded-3xl shadow-header relative px-4 lg:px-6 py-12 lg:py-14"},{children:[(0,o.jsxs)("button",Ki({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return m()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ht.V.Title,Ki({className:"mb-4 md:mb-6 text-sm"},{children:(0,o.jsx)("legend",Ki({className:"text-base font-medium text-gray-900"},{children:f("left-panel.menus.notice.confirm",{name:n})}))})),(0,o.jsxs)("div",Ki({className:"mb-10 pl-3"},{children:[(0,o.jsx)("p",Ki({className:"text-sm text-gray-500"},{children:f("left-panel.menus.notice.want-to-block")})),(0,o.jsxs)("div",Ki({className:"mt-4 pl-2 space-y-4"},{children:[(0,o.jsxs)("div",Ki({className:"flex items-center"},{children:[(0,o.jsx)("input",{type:"radio",value:"1",name:"block",id:"yes",checked:1===u,onChange:function(e){return d(Number(e.currentTarget.value))}}),(0,o.jsx)("label",Ki({htmlFor:"yes",className:"ml-3 block text-sm font-medium text-gray-700"},{children:f("yes")}))]})),(0,o.jsxs)("div",Ki({className:"flex items-center"},{children:[(0,o.jsx)("input",{type:"radio",value:"0",name:"block",id:"no",checked:0===u,onChange:function(e){return d(Number(e.currentTarget.value))}}),(0,o.jsx)("label",Ki({htmlFor:"no",className:"ml-3 block text-sm font-medium text-gray-700"},{children:f("no")}))]}))]}))]})),(0,o.jsx)("button",Ki({className:"inline-flex justify-center px-4 py-2 text-xs md:text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return m(!0)}},{children:f("left-panel.menus.notice.remove")})),(0,o.jsx)("button",Ki({className:"inline-flex justify-center px-4 py-2 text-xs md:text-sm font-medium bg-primaryColor hover:bg-secondaryColor text-white border border-transparent rounded-md focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return m(!1)}},{children:f("cancel")}))]}))]}))}))}))]})})};var rs=function(){return rs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rs.apply(this,arguments)};const os=function(e){var t=e.userId,n=st((function(e){return N.selectById(e,t)}));return"hidden"===(null===n||void 0===n?void 0:n.visibility)?(0,o.jsx)("div",rs({className:"visibility mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-eye-slash secondaryColor text-[8px]"})})):null};var as=function(){return as=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},as.apply(this,arguments)};const is=function(e){var t=e.userId,n=st((function(e){return N.selectById(e,t)}));return(null===n||void 0===n?void 0:n.metadata.is_presenter)?(0,o.jsx)("div",as({className:"presenter mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-presenter secondaryColor text-[8px]"})})):null};var ss=function(){return ss=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ss.apply(this,arguments)};const ls=function(e){var t,n=e.participant,r=e.remoteParticipant,a=at.getState().session.currentUser;return(0,o.jsx)("li",ss({className:"mb-3 w-full list-none"},{children:(0,o.jsxs)("div",ss({className:"flex items-center justify-between"},{children:[(0,o.jsxs)("div",ss({className:"left flex items-center "},{children:[(0,o.jsx)(ei,{participant:n}),(0,o.jsx)(ni,{name:n.name,isCurrentUser:(null===a||void 0===a?void 0:a.userId)===n.userId})]})),(0,o.jsxs)("div",ss({className:"right ml-2 flex-auto flex items-center justify-end"},{children:[(0,o.jsx)(oi,{userId:n.userId}),(0,o.jsx)(os,{userId:n.userId}),(0,o.jsx)(is,{userId:n.userId}),(0,o.jsx)(ui,{userId:n.userId}),(0,o.jsx)(li,{userId:n.userId,remoteParticipant:r}),(null===(t=null===a||void 0===a?void 0:a.metadata)||void 0===t?void 0:t.is_admin)&&a.userId!==n.userId?(0,o.jsx)(ns,{userId:n.userId,name:n.name}):null]}))]}))}))};var cs=function(){return cs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},cs.apply(this,arguments)};const us=a.memo((function(e){var t=e.currentRoom,n=st(N.selectAll),r=(0,lt.$)().t;return(0,o.jsx)("div",cs({id:"main-left-panel",className:"participants-wrapper scrollBar relative z-10 left-0 top-0 h-full w-[200px] xl:w-[270px] px-2 xl:px-4 pt-2 xl:pt-5 overflow-auto multi-gradient"},{children:(0,o.jsxs)("div",cs({className:"inner-wrapper relative z-20"},{children:[(0,o.jsx)("div",cs({className:"top flex items-center justify-between font-medium mb-3 xl:mb-5"},{children:(0,o.jsx)("p",cs({className:"text-sm text-black"},{children:r("left-panel.participants",{total:n.length})}))})),(0,o.jsx)("div",cs({className:"all-participants-wrap"},{children:function(){var e,r,a,i,s,l,c,u=at.getState().session,d=null===(e=u.currentUser)||void 0===e?void 0:e.userId,f=null!==(i=null===(a=null===(r=u.currentRoom.metadata)||void 0===r?void 0:r.room_features)||void 0===a?void 0:a.allow_view_other_users_list)&&void 0!==i&&i,p=null!==(c=null===(l=null===(s=u.currentUser)||void 0===s?void 0:s.metadata)||void 0===l?void 0:l.is_admin)&&void 0!==c&&c;return n.map((function(e){var n=t.participants.get(e.sid);if(p||f||e.metadata.is_admin||d===e.userId)return(0,o.jsx)(ls,{participant:e,remoteParticipant:n},e.sid)}))}()}))]}))}))}));var ds=function(){return ds=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ds.apply(this,arguments)};const fs=function(e){var t=e.participant,n=e.from;return(0,o.jsx)("div",ds({className:"avatar flex items-center justify-center text-white h-8 w-8 overflow-hidden rounded-full shadow-header bg-primaryColor"},{children:function(){var e;if(null===(e=null===t||void 0===t?void 0:t.metadata)||void 0===e?void 0:e.profile_pic)return(0,o.jsx)("img",{src:null===t||void 0===t?void 0:t.metadata.profile_pic,alt:t.name});var r=n.name;return(null===t||void 0===t?void 0:t.name)&&(r=null===t||void 0===t?void 0:t.name),(0,o.jsx)(o.Fragment,{children:null===r||void 0===r?void 0:r.slice(0,2).toUpperCase()})}()}))};var ps=function(){return ps=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ps.apply(this,arguments)};const ms=a.memo((function(e){var t=e.body,n=e.currentUser,r=st((function(e){return N.selectById(e,t.from.userId)})),a=(0,lt.$)().t;return(0,o.jsx)("div",ps({className:"message-item mb-2 xl:mb-3"},{children:(0,o.jsx)("div",ps({className:"wrapper flex "},{children:"system"===t.from.userId?(0,o.jsx)("div",ps({className:"content w-[calc(100%)] pt-2 system mb-2"},{children:(0,o.jsx)("p",{className:"message-content max-w-fit shadow-footer text-xs bg-primaryColor text-white",dangerouslySetInnerHTML:{__html:t.msg}})})):(null===n||void 0===n?void 0:n.userId)===t.from.userId?(0,o.jsxs)("div",ps({className:"content me w-[calc(100%-2rem)] pt-2"},{children:[(0,o.jsx)("p",ps({className:"name pl-2 text-sm pb-1 primaryColor"},{children:a("right-panel.you")})),(0,o.jsx)("p",{className:"message-content max-w-fit shadow-footer text-xs bg-secondaryColor text-white",dangerouslySetInnerHTML:{__html:t.msg}})]})):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(fs,{participant:r,from:t.from}),(0,o.jsxs)("div",ps({className:"content w-[calc(100%-2rem)] pt-2"},{children:[(0,o.jsxs)("p",ps({className:"name pl-2 text-sm pb-1"},{children:[t.from.name?t.from.name:null===r||void 0===r?void 0:r.name," ",(0,o.jsx)("span",ps({style:{fontSize:"10px"}},{children:r?null:" (offline)"}))]})),(0,o.jsx)("p",{className:"message-content max-w-fit bg-white shadow-footer text-xs",dangerouslySetInnerHTML:{__html:t.msg}})]}))]})}))}))}));var hs=function(){return hs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hs.apply(this,arguments)};const vs=function(){var e=(0,a.useRef)(null),t=st(Se.selectAll),n=at.getState().session.currentUser;(0,a.useEffect)((function(){e.current&&e.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}));return(0,o.jsx)("div",hs({className:"pb-3",ref:e},{children:t.map((function(e){var t=e;return(0,o.jsx)(ms,{body:t,currentUser:n},t.message_id)}))}))};var ys=n(91036),bs=n.n(ys),xs=function(){return xs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xs.apply(this,arguments)},gs=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ws=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const Ss=function(e){var t,n,r,i,s=e.isChatServiceReady,c=e.lockSendFile,u=e.currentRoom,d=(0,a.useRef)(null),f=(0,lt.$)().t,p=gs((0,a.useState)(),2),m=p[0],h=p[1],v=null===(t=at.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features.chat_features,y=null!==(r=null===(n=null===v||void 0===v?void 0:v.allowed_file_types)||void 0===n?void 0:n.map((function(e){return"."+e})).join(","))&&void 0!==r?r:"*",b=(null===v||void 0===v?void 0:v.max_file_size)?null===v||void 0===v?void 0:v.max_file_size:void 0,x=Dn({allowedFileTypes:null!==(i=null===v||void 0===v?void 0:v.allowed_file_types)&&void 0!==i?i:[],maxFileSize:b,files:m}),g=x.isUploading,w=x.result;(0,a.useEffect)((function(){w&&w.filePath&&w.fileName&&(S(w.filePath,w.fileName),(0,l.Am)(f("right-panel.file-upload-success"),{type:l.Am.TYPE.SUCCESS}))}),[w]);var S=function(e,t){if(Ei()){var n='<span class="download"> <i class="pnm-download"></i> <a href="'.concat(window.PLUG_N_MEET_SERVER_URL+"/download/uploadedFile/"+e,'" target="_blank">').concat(t,"</a></span>"),r={type:"CHAT",isPrivate:!1,time:"",message_id:"",from:{sid:u.localParticipant.sid,userId:u.localParticipant.identity,name:u.localParticipant.name},msg:n},o={type:oo.USER,room_sid:u.sid,message_id:"",body:r};Ti(JSON.stringify(o))}};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{type:"file",id:"chat-file",ref:d,accept:y,style:{display:"none"},onChange:function(e){return function(e){var t=e.target.files;t.length&&h(ws([],gs(t),!1))}(e)}}),(0,o.jsx)("button",xs({disabled:!s||c||g,onClick:function(){return function(){var e;g||null===(e=d.current)||void 0===e||e.click()}()},className:"w-4 h-6 px-2"},{children:(0,o.jsx)("i",{className:"pnm-attachment primaryColor text-[20px] opacity-50"})}))]})})};var _s=function(){return _s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_s.apply(this,arguments)},js=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},ks=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ns=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Cs=(0,pt.P1)((function(e){return e.session.isChatServiceReady}),(function(e){return e})),Es=(0,pt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_chat_send_message}),(function(e){return e})),Ts=(0,pt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_chat_file_share}),(function(e){return e}));const Ps=function(e){var t=e.currentRoom,n=st(Cs),r=st(Es),i=st(Ts),s=(0,lt.$)().t,l=Ns((0,a.useState)(!1),2),c=l[0],u=l[1],d=Ns((0,a.useState)(!1),2),f=d[0],p=d[1],m=Ns((0,a.useState)(!0),2),h=m[0],v=m[1],y=Ns((0,a.useState)(""),2),b=y[0],x=y[1];(0,a.useEffect)((function(){at.getState().session.currentRoom.metadata.room_features.chat_features.allow_file_upload||v(!1)}),[]),(0,a.useEffect)((function(){u(!!r),p(!!i)}),[r,i]),(0,a.useEffect)((function(){var e,t,n,o,a,i,s=null===(t=null===(e=at.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_chat_send_message,l=null===(o=null===(n=at.getState().session.currentRoom.metadata)||void 0===n?void 0:n.default_lock_settings)||void 0===o?void 0:o.lock_chat_file_share,c=null===(i=null===(a=at.getState().session.currentUser)||void 0===a?void 0:a.metadata)||void 0===i?void 0:i.is_admin;s&&!c&&!1!==r&&u(!0),l&&!c&&!1!==r&&p(!0)}),[]);var g=function(){return js(void 0,void 0,void 0,(function(){var e,n,r;return ks(this,(function(o){var a;return a=b,e=bs()(a,{allowedTags:["b","i","strong","br"],allowedSchemes:["mailto","tel"]}),(0,Io.isEmpty)(e)||(n={type:"CHAT",isPrivate:!1,time:"",message_id:"",from:{sid:t.localParticipant.sid,userId:t.localParticipant.identity,name:t.localParticipant.name},msg:e.replace(/\r?\n/g,"<br />")},r={type:oo.USER,room_sid:t.sid,message_id:"",body:n},Ei()&&(Ti(JSON.stringify(r)),x(""))),[2]}))}))};return(0,o.jsxs)("div",_s({className:"flex items-start justify-between h-[4.5rem] p-2"},{children:[(0,o.jsx)("textarea",{name:"message-textarea",id:"message-textarea",className:"w-full bg-white h-14 max-h-14 mt-1 leading-[1.2] rounded-xl py-2 px-4 outline-none text-xs lg:text-sm primaryColor placeholder:text-primaryColor/70",value:b,onChange:function(e){return x(e.currentTarget.value)},disabled:!n||c,placeholder:s("right-panel.chat-box-placeholder"),onKeyDown:function(e){return function(e){13==e.keyCode&&0==e.shiftKey&&(e.preventDefault(),g())}(e)}}),(0,o.jsxs)("div",_s({className:"btns"},{children:[(0,o.jsx)("button",_s({disabled:!n||c,onClick:function(){return g()},className:"w-4 h-6 p-2"},{children:(0,o.jsx)("i",{className:"pnm-send primaryColor text-[20px]"})})),h?(0,o.jsx)(Ss,{isChatServiceReady:n,lockSendFile:f,currentRoom:t}):null]}))]}))};var As=function(){return As=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},As.apply(this,arguments)},Rs=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Fs=(0,pt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_chat}),(function(e){return e}));const Is=a.memo((function(e){var t=e.currentRoom,n=e.isRecorder,r=st(Fs),i=Rs((0,a.useState)(!1),2),s=i[0],l=i[1];return(0,a.useEffect)((function(){var e,t,n,o,a=null===(t=null===(e=at.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_chat,i=null===(o=null===(n=at.getState().session.currentUser)||void 0===n?void 0:n.metadata)||void 0===o?void 0:o.is_admin;a&&!i&&!1!==r&&l(!1)}),[]),(0,a.useEffect)((function(){n&&l(!1)}),[n]),(0,a.useEffect)((function(){n||l(!r)}),[r,n]),(0,o.jsxs)("div",As({id:"main-right-panel",className:"h-[calc(100%)]"},{children:[(0,o.jsx)("div",As({className:"h-[calc(100%)] messageModule-wrapper scrollBar relative z-10 right-0 top-0 w-[230px] xl:w-[300px] px-2 xl:px-4 pt-2 xl:pt-4 overflow-auto multi-gradient"},{children:(0,o.jsx)("div",As({className:"all-MessageModule-wrap"},{children:(0,o.jsx)(vs,{})}))})),n?(0,o.jsx)("div",{className:"w-[100%] h-[1px] hiddenAnimation absolute z-50 bottom-0 bg-gradient-to-r from-primaryColor to-secondaryColor"}):null,s?(0,o.jsx)("div",As({className:"message-form fixed z-[99] xl:z-0 bottom-1 w-[230px] xl:w-[300px] bg-white"},{children:(0,o.jsx)(Ps,{currentRoom:t})})):null]}))}));var Os=function(){return Os=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Os.apply(this,arguments)};const Ms=function(e){var t=e.speaker;return(0,o.jsxs)("div",Os({className:"m-1 px-3 py-1 primaryColor text-[12px] rounded-2xl inline-flex items-center bg-white border border-solid border-white"},{children:[(0,o.jsx)("i",{className:"pnm-mic-unmute text-[10px] secondaryColor mr-2"}),t.name]}))};var Ds=function(){return Ds=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ds.apply(this,arguments)};const Us=a.memo((function(){var e=st(b.selectAll);return(0,o.jsx)("div",Ds({className:"active-speakers-wrap flex w-full items-center justify-center absolute top-0 left-0 z-[9999]"},{children:e.length?e.map((function(e){return(0,o.jsx)(Ms,{speaker:e},e.sid)})):null}))}));var Ls=function(){return Ls=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ls.apply(this,arguments)},Bs=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Ws=(0,pt.P1)((function(e){return e.roomSettings.roomVideoQuality}),(function(e){return e}));const Vs=function(e){var t=e.track,n=(0,a.useRef)(null),r=Bs((0,a.useState)(),2),i=r[0],s=r[1],l=Bs((0,a.useState)(!1),2),c=l[0],u=l[1],d=st(Ws);(0,a.useEffect)((function(){t instanceof Ce.E8?t.setVideoQuality(d):u(!0)}),[d,t]),(0,a.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.videoTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.videoTrack)||void 0===e||e.detach(r))}}),[t]);return(0,o.jsxs)("div",Ls({className:"screen-share-video relative pb-[calc(100vh-210px)]"},{children:[i?null:(0,o.jsx)("div",Ls({className:"loading flex justify-center"},{children:(0,o.jsxs)("div",Ls({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})),(0,o.jsx)("button",Ls({className:"absolute z-[99] bottom-0 right-0 p-1 bg-black/50",onClick:function(){var e;document.fullscreenElement?document.exitFullscreen():null===(e=n.current)||void 0===e||e.requestFullscreen().catch((function(e){alert("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}))}},{children:(0,o.jsx)("i",{className:"icon pnm-fullscreen text[20px] text-white"})})),(0,o.jsx)("video",{onLoadedData:function(){console.log("onPlaying"),s(!0)},ref:n,className:"video-player absolute ".concat(c?"self-screen-share":"remote-screen-share")})]}))};var Gs=function(){return Gs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gs.apply(this,arguments)};const Hs=function(e){var t=e.track,n=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.audioTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.audioTrack)||void 0===e||e.detach(r))}}),[t]),(0,o.jsx)("div",Gs({style:{display:"none"}},{children:(0,o.jsx)("audio",{autoPlay:!0,ref:n})}))};var zs=function(){return zs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zs.apply(this,arguments)},Qs=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Xs=(0,pt.P1)((function(e){return e.roomSettings.roomVideoQuality}),(function(e){return e}));const Js=function(e){var t=e.track,n=(0,a.useRef)(null),r=Qs((0,a.useState)(),2),i=r[0],s=r[1],l=st(Xs);(0,a.useEffect)((function(){t instanceof Ce.E8&&t.setVideoQuality(l)}),[l,t]),(0,a.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.videoTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.videoTrack)||void 0===e||e.detach(r))}}),[t]);return(0,o.jsxs)("div",zs({className:"camera-video-player"},{children:[i?null:(0,o.jsx)("div",zs({className:"loading absolute text-center top-3 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",zs({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})),(0,o.jsx)("button",zs({className:"absolute z-[999] top-2 right-2 p-1 bg-black/50 w-6 h-6 flex",onClick:function(){var e;document.fullscreenElement?document.exitFullscreen():null===(e=n.current)||void 0===e||e.requestFullscreen().catch((function(e){alert("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}))}},{children:(0,o.jsx)("i",{className:"icon pnm-fullscreen text[14px] text-white"})})),(0,o.jsx)("video",{className:"camera-video",onLoadedData:function(){s(!0)},ref:n,height:"200px",width:"200px"})]}))};var qs=function(){return qs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qs.apply(this,arguments)},Ys=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const $s=function(e){var t=e.userId,n=st((function(e){return N.selectById(e,t)})),r=Ys((0,a.useState)("#FFFFFF"),2),i=r[0],s=r[1];(0,a.useEffect)((function(){switch(null===n||void 0===n?void 0:n.connectionQuality){case Ce.ZV.Excellent:s("#38f105");break;case Ce.ZV.Good:s("#c8f6bd");break;case Ce.ZV.Poor:s("#FF0000");break;default:s("#FFFFFF")}}),[null===n||void 0===n?void 0:n.connectionQuality]);return(0,o.jsx)("div",qs({className:"connection-status"},{children:(0,o.jsx)("i",{style:{color:i},className:"pnm-network text-[7px]"})}))};var Ks=function(){return Ks=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ks.apply(this,arguments)};const Zs=function(e){var t=e.userId,n=st((function(e){return N.selectById(e,t)}));return(0,o.jsx)(o.Fragment,{children:(null===n||void 0===n?void 0:n.audioTracks)?(0,o.jsx)("div",Ks({className:"mic-status"},{children:(null===n||void 0===n?void 0:n.isMuted)?(0,o.jsx)("p",Ks({className:"mute"},{children:(0,o.jsx)("i",{className:"pnm-mic-mute text-white text-[9px]"})})):(0,o.jsx)("p",Ks({className:"mute"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute text-white text-[9px]"})}))})):null})};var el=function(){return el=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},el.apply(this,arguments)};const tl=a.memo((function(e){var t=e.userId,n=e.track;return(0,o.jsx)("div",el({className:"camera-modules"},{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($s,{userId:t}),(0,o.jsx)(Zs,{userId:t}),(0,o.jsx)(Js,{track:n})]})}))}));var nl=function(){return nl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},nl.apply(this,arguments)};const rl=function(e){var t,n=e.participantType,r=e.participant,a=st((function(e){return b.selectById(e,r.identity)}));return(0,o.jsx)("div",nl({className:"video-camera-item relative ".concat(a?"speaking":""," ").concat(n.isAdmin?"admin":"participants")},{children:(t=[],r.tracks.forEach((function(e){if(e.source===Ce.fQ.Source.Camera){var a=(0,o.jsxs)("div",nl({className:"video-camera-item-inner"},{children:[(0,o.jsxs)("div",nl({className:"name"},{children:[r.name," ",n.isLocal?"(me)":null]})),(0,o.jsx)(tl,{userId:r.identity,track:e})]}),e.trackSid);t.push(a)}})),t)}))};var ol=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const al=function(e){var t=ol((0,a.useState)([]),2),n=t[0],r=t[1],i=ol((0,a.useState)(0),2),s=i[0],l=i[1];return(0,a.useEffect)((function(){var t=0,n=[];e.forEach((function(e){var r;if(e.metadata){var a={isAdmin:null!==(r=JSON.parse(e.metadata).is_admin)&&void 0!==r&&r,isLocal:e instanceof Ce.Ix},i=e.getTracks().filter((function(e){return e.source===Ce.fQ.Source.Camera}));if(t+=i.length,i.length){var s=(0,o.jsx)(rl,{participantType:a,participant:e},e.sid);n.push(s)}}})),l(t),r(n)}),[e]),{allParticipants:n,totalNumWebcams:s}};var il=function(){return il=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},il.apply(this,arguments)},sl=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const ll=a.memo((function(e){var t=e.videoSubscribers,n=e.perPage,r=e.isVertical,i=it(),s=(0,lt.$)().t,l=al(t),c=l.allParticipants,u=l.totalNumWebcams,d=sl((0,a.useState)(0),2),f=d[0],p=d[1],m=sl((0,a.useState)([]),2),h=m[0],v=m[1],y=sl((0,a.useState)(!1),2),b=y[0],x=y[1],g=sl((0,a.useState)(!1),2),w=g[0],S=g[1],_=sl((0,a.useState)(null!==n&&void 0!==n?n:24),2),j=_[0],k=_[1];(0,a.useEffect)((function(){c.length<=j?v(c):(p(1),N(c,1,j))}),[c,j]),(0,a.useEffect)((function(){u>j?(x(1!==f),S(!(f>=u/j))):(x(!1),S(!1))}),[u,f,j]);var N=function(e,t,n){var r=sl(e).slice(0).slice((t-1)*n,t*n);v(r),i(L(1!==t))};return(0,o.jsxs)(o.Fragment,{children:[u>0?(0,o.jsx)("div",il({className:"all-webcam-wrapper total-cam-".concat(u," selected-cam-").concat(j," page-").concat(f," ").concat(r?"vertical-webcams":"")},{children:(0,o.jsx)("div",il({className:"all-webcam-wrapper-inner"},{children:(0,o.jsxs)(o.Fragment,{children:[b?(0,o.jsx)("button",il({type:"button",className:"previous-cam",onClick:function(){return N(c,f-1,j),void p(f-1)}},{children:(0,o.jsx)("i",{className:"pnm-arrow-up"})})):null,(0,o.jsx)(o.Fragment,{children:h}),w?(0,o.jsx)("button",il({type:"button",className:"next-cam",onClick:function(){return N(c,f+1,j),void p(f+1)}},{children:(0,o.jsx)("i",{className:"pnm-arrow-down"})})):null]})}))})):null,u>6&&!r?(0,o.jsxs)("div",il({className:"select-camera-number"},{children:[(0,o.jsx)("label",il({htmlFor:"select-camera-num"},{children:s("app.webcams-per-page")})),(0,o.jsxs)("select",il({name:"select-camera-num",id:"select-camera-num",onChange:function(e){return k(Number(e.currentTarget.value))}},{children:[(0,o.jsx)("option",il({value:"6"},{children:"6"})),(0,o.jsx)("option",il({value:"8"},{children:"8"})),(0,o.jsx)("option",il({value:"12"},{children:"12"})),(0,o.jsx)("option",il({value:"15"},{children:"15"})),(0,o.jsx)("option",il({value:"18"},{children:"18"})),(0,o.jsx)("option",il({selected:!0},{children:"24"}))]}))]})):null]})}));var cl=(0,pt.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e})),ul=(0,pt.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e})),dl=(0,pt.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e}));const fl=a.memo((function(e){var t=e.videoSubscribers,n=st(cl),r=st(ul),a=st(dl);return(0,o.jsx)(o.Fragment,{children:!t||!a||r&&n?null:(0,o.jsx)(ll,{videoSubscribers:t,perPage:3,isVertical:!0})})}));var pl=function(){return pl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pl.apply(this,arguments)};const ml=a.memo((function(e){var t=e.screenShareTracks,n=e.videoSubscribers;return(0,o.jsxs)("div",pl({className:"share-screen-wrapper is-share-screen-running"},{children:[(0,o.jsx)(fl,{videoSubscribers:n}),function(){if(t){var e=Array();return t.forEach((function(t){t.source===Ce.fQ.Source.ScreenShare?e.push((0,o.jsx)(Vs,{track:t},t.trackSid)):t.source===Ce.fQ.Source.ScreenShareAudio&&e.push((0,o.jsx)(Hs,{track:t},t.trackSid))})),e}return null}()]}))}));var hl=function(){return hl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hl.apply(this,arguments)};const vl=a.memo((function(e){var t=e.track,n=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.audioTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.audioTrack)||void 0===e||e.detach(r))}}),[t]),(0,o.jsx)("div",hl({style:{display:"none"}},{children:(0,o.jsx)("audio",{autoPlay:!0,ref:n})}))}));var yl=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const bl=a.memo((function(e){var t=e.audioSubscribers,n=yl((0,a.useState)([]),2),r=n[0],i=n[1];return(0,a.useEffect)((function(){var e=[];t.forEach((function(t){t.tracks.forEach((function(t){e.push((0,o.jsx)(vl,{track:t},t.trackSid))}))})),i(e)}),[t]),(0,o.jsx)(o.Fragment,{children:r.length?r:null})}));var xl=function(){return xl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xl.apply(this,arguments)},gl=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},wl=(0,pt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features}),(function(e){return e})),Sl=(0,pt.P1)((function(e){var t,n,r;return null===(r=null===(n=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings)||void 0===r?void 0:r.lock_shared_notepad}),(function(e){return e}));const _l=a.memo((function(e){var t=e.videoSubscribers,n=it(),r=st(wl),i=st(Sl),s=at.getState().session.currentUser,l=gl((0,a.useState)(),2),c=l[0],u=l[1],d=gl((0,a.useState)(),2),f=d[0],p=d[1];(0,a.useEffect)((function(){n(ae(!1))}),[n]),(0,a.useEffect)((function(){if((null===r||void 0===r?void 0:r.is_active)&&r.host){var e=r.host;if(r.host.match("host.docker.internal")&&(e="http://localhost:9001"),null===s||void 0===s?void 0:s.isRecorder)return void p("".concat(e,"/p/").concat(r.read_only_pad_id,"?userName=").concat(null===s||void 0===s?void 0:s.name));e=i?"".concat(e,"/p/").concat(r.read_only_pad_id,"?userName=").concat(null===s||void 0===s?void 0:s.name):"".concat(e,"/p/").concat(r.note_pad_id,"?userName=").concat(null===s||void 0===s?void 0:s.name),p(e)}}),[r,i]);var m=function(){u(!0)};return(0,o.jsxs)("div",xl({className:"middle-fullscreen-wrapper h-full flex ".concat((null===t||void 0===t?void 0:t.size)?"verticalsWebcamsActivated":"")},{children:[(0,o.jsx)(fl,{videoSubscribers:t}),f?(0,o.jsxs)("div",xl({className:"notepad-wrapper m-auto h-[calc(100%-50px)] w-full max-w-[1100px] flex-1 sm:px-5 mt-9"},{children:[c?null:(0,o.jsx)("div",xl({className:"loading absolute left-[50%] top-[40%] flex justify-center"},{children:(0,o.jsxs)("div",xl({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})),(0,o.jsx)("iframe",{height:"100%",width:"100%",src:f,onLoad:m})]})):null]}))}));var jl=n(23493),kl=n.n(jl),Nl=n(74474),Cl=n.n(Nl),El=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Tl=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Pl=function(e,t,n){var r,o,a;return!(!t||!(t.id===(null===(r=e.editingElement)||void 0===r?void 0:r.id)||t.id===(null===(o=e.resizingElement)||void 0===o?void 0:o.id)||t.id===(null===(a=e.draggingElement)||void 0===a?void 0:a.id)||t.version>n.version||t.version===n.version&&t.versionNonce<n.versionNonce))},Al=function(){return Al=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Al.apply(this,arguments)},Rl=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fl=new Map,Il=function(e,t){var n,r,o,a,i=at.getState().session,s={sid:null!==(r=null===(n=i.currentUser)||void 0===n?void 0:n.sid)&&void 0!==r?r:"",userId:null!==(a=null===(o=i.currentUser)||void 0===o?void 0:o.userId)&&void 0!==a?a:""},l={type:io.SCENE_UPDATE,from:s,msg:JSON.stringify(e)},c={type:oo.WHITEBOARD,room_sid:i.currentRoom.sid,room_id:i.currentRoom.room_id,message_id:"",body:l};""!==t&&(c.to=t),Ti(JSON.stringify(c))},Ol=function(e,t){var n,r,o,a,i=at.getState().session,s={type:io.ADD_WHITEBOARD_OFFICE_FILE,from:{sid:null!==(r=null===(n=i.currentUser)||void 0===n?void 0:n.sid)&&void 0!==r?r:"",userId:null!==(a=null===(o=i.currentUser)||void 0===o?void 0:o.userId)&&void 0!==a?a:""},msg:JSON.stringify(e)},l={type:oo.WHITEBOARD,room_sid:i.currentRoom.sid,room_id:i.currentRoom.room_id,message_id:"",body:s};""!==t&&(l.to=t),Ti(JSON.stringify(l))},Ml=function(){return Ml=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ml.apply(this,arguments)},Dl=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Ul=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ll=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Bl=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const Wl=function(e){var t=e.currenPage,n=e.excalidrawAPI,r=(0,a.useRef)(null),i=Ll((0,a.useState)(),2),s=i[0],c=i[1],u=(0,lt.$)().t,d=it(),f=["jpg","jpeg","png","svg","pdf","docx","doc","odt","txt","rtf","xml","xlsx","xls","ods","csv","pptx","ppt","odp","vsd","odg","html"],p=at.getState().session,m=Dn({allowedFileTypes:f,maxFileSize:30,files:s}),h=m.isUploading,v=m.result;(0,a.useEffect)((function(){v&&v.filePath&&y(v.filePath,v.fileName,v.fileExtension)}),[v]);var y=function(e,t,n){switch(n){case"jpg":case"jpeg":case"png":case"svg":(0,l.Am)(u("right-panel.file-upload-success"),{type:l.Am.TYPE.SUCCESS}),x(e,t);break;default:b(p,e)}},b=function(e,t){return Dl(void 0,void 0,void 0,(function(){var r,o,a,i,s,c,d,f,p;return Ul(this,(function(m){switch(m.label){case 0:return r=l.Am.loading(u("whiteboard.converting"),{type:"info"}),o={sid:e.currentRoom.sid,roomId:e.currentRoom.room_id,userId:null===(p=e.currentUser)||void 0===p?void 0:p.userId,file_path:t},[4,ro("convertWhiteboardFile",o)];case 1:if(!(a=m.sent()).status)return l.Am.update(r,{render:u(a.msg),type:"error",isLoading:!1,closeButton:!0}),[2];for(i=[],s=0;s<a.total_pages;s++)c="page_"+(s+1)+".png",d={id:gt(),currenPage:s+1,filePath:a.file_path+"/"+c,fileName:c,uploaderWhiteboardHeight:n.getAppState().height,uploaderWhiteboardWidth:n.getAppState().width},i.push(d);return f={fileId:a.file_id,fileName:a.file_name,filePath:a.file_path,totalPages:a.total_pages,pageFiles:JSON.stringify(i)},at.dispatch($e(f)),[4,(h=500,new Promise((function(e){return setTimeout(e,h)})))];case 2:return m.sent(),Ol(f),l.Am.update(r,{render:u("whiteboard.file-ready"),type:"success",isLoading:!1,autoClose:1e3}),[2]}var h}))}))},x=function(e,r){var o,a,i,s,l={id:gt(),currenPage:t,filePath:e,fileName:r,uploaderWhiteboardHeight:n.getAppState().height,uploaderWhiteboardWidth:n.getAppState().width};d(Xe(l));var c=at.getState().whiteboard.whiteboardFiles,u=at.getState().session,f={type:io.ADD_WHITEBOARD_FILE,from:{sid:null!==(a=null===(o=u.currentUser)||void 0===o?void 0:o.sid)&&void 0!==a?a:"",userId:null!==(s=null===(i=u.currentUser)||void 0===i?void 0:i.userId)&&void 0!==s?s:""},msg:c},p={type:oo.WHITEBOARD,room_sid:u.currentRoom.sid,room_id:u.currentRoom.room_id,message_id:"",body:f};Ti(JSON.stringify(p))};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{type:"file",id:"chat-file",ref:r,style:{display:"none"},onChange:function(e){return function(e){var t=e.target.files;t.length&&c(Bl([],Ll(t),!1))}(e)},accept:f.map((function(e){return"."+e})).join(",")}),(0,o.jsx)("button",Ml({disabled:h,onClick:function(){return function(){var e;h||null===(e=r.current)||void 0===e||e.click()}()},className:"w-10 h-7 flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-attachment primaryColor text-[14px] opacity-50"})}))]})})};var Vl,Gl,Hl,zl,Ql,Xl=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Jl=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ql="",Yl="",$l="",Kl=function(e,t,n,r,o){return Xl(void 0,void 0,void 0,(function(){return Jl(this,(function(a){return[2,new Promise((function(a,i){return Xl(void 0,void 0,void 0,(function(){var s,l,c;return Jl(this,(function(u){switch(u.label){case 0:return[4,fetch(e)];case 1:return[4,u.sent().blob()];case 2:return(s=u.sent())||i(null),ql=t,zl=r,Ql=o,(Hl=n)<0&&(Hl=1),l=new FileReader,c=new FileReader,l.onloadend=function(){"unknown"!==(Yl=ec(l))?c.readAsDataURL(s):i(null)},l.readAsArrayBuffer(s),c.onload=function(){if($l=($l=c.result).replace("application/octet-stream",Yl),"image/svg+xml"!==Yl){var e=new Image;e.src=$l,e.onload=function(){return Xl(this,void 0,void 0,(function(){var t;return Jl(this,(function(n){switch(n.label){case 0:return[4,tc(e.height,e.width)];case 1:return n.sent(),t=Zl(),a(t),[2]}}))}))}}else if("image/svg+xml"==Yl){Vl=.8*zl,Gl=.7*Ql;var t=Zl();a(t)}else i("unsupported file")},[2]}}))}))}))]}))}))},Zl=function(){var e={id:ql,dataURL:$l,mimeType:Yl,created:Date.now()},t=.4;return Math.round(100*Gl/Ql)<50&&(t=.7),{image:e,elm:{id:ql,type:"image",x:zl*t,y:.06*Ql,width:Gl,height:Vl,angle:0,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:"hachure",strokeWidth:1,strokeStyle:"solid",roughness:1,opacity:100,groupIds:[],strokeSharpness:"round",seed:wt(),version:Hl+1,versionNonce:wt(),isDeleted:!1,boundElements:null,updated:Date.now(),link:null,status:"pending",fileId:ql,scale:[1,1]}}},ec=function(e){for(var t,n=new Uint8Array(e.result).subarray(0,4),r="",o=0;o<n.length;o++)r+=n[o].toString(16);switch(r){case"89504e47":t="image/png";break;case"47494638":t="image/gif";break;case"ffd8ffDB":case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":t="image/jpeg";break;case"3c3f786d":case"3c737667":t="image/svg+xml";break;default:t="unknown"}return t},tc=function(e,t){return Xl(void 0,void 0,void 0,(function(){var n,r,o;return Jl(this,(function(a){for(Vl=Number("".concat(e)),Gl=Number("".concat(t)),n=zl-40,r=Ql-180,o=.01;Vl>n;)Vl-=Vl*o,Gl-=Gl*o,o+=.01;for(o=.01;Gl>r;)Vl-=Vl*o,Gl-=Gl*o,o+=.01;return[2]}))}))};const nc=function(e){var t=(0,a.useRef)();return(0,a.useEffect)((function(){t.current=e})),t.current};var rc=function(){return rc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rc.apply(this,arguments)},oc=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},ac=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ic=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},sc=(0,pt.P1)((function(e){return e.whiteboard.totalPages}),(function(e){return e})),lc=(0,pt.P1)((function(e){return e.whiteboard.currentPage}),(function(e){return e}));const cc=a.memo((function(e){var t,n=e.excalidrawAPI,r=e.isPresenter,i=st(sc),s=st(lc),c=ic((0,a.useState)(),2),u=c[0],d=c[1],f=ic((0,a.useState)(!0),2),p=f[0],m=f[1],h=ic((0,a.useState)(!1),2),v=h[0],y=h[1],b=nc(s),x=it(),g=(0,lt.$)().t,w=at.getState().session.currentUser,S=null===(t=null===w||void 0===w?void 0:w.metadata)||void 0===t?void 0:t.is_admin,_=null===w||void 0===w?void 0:w.isRecorder;(0,a.useEffect)((function(){b&&s!==b&&n&&j()}),[s,b,n]),(0,a.useEffect)((function(){s>1&&m(!1),1===s&&m(!0),v?s!==i&&y(!1):s===i&&y(!0)}),[s,v,i]),(0,a.useEffect)((function(){for(var e=[],t=0;t<i;t++)e.push((0,o.jsx)("option",rc({value:t+1},{children:g("whiteboard.page",{count:t+1})}),t));d(e)}),[i]),(0,a.useEffect)((function(){return n&&r&&setTimeout((function(){var e=at.getState().whiteboard.currentPage;k(e)})),function(){if(n){var e=at.getState().whiteboard.currentPage,t=n.getSceneElementsIncludingDeleted();t.length&&sessionStorage.setItem(String(e),JSON.stringify(t))}}}),[n]);var j=function(){if(n&&r){var e=n.getSceneElementsIncludingDeleted();e.length&&sessionStorage.setItem(String(b),JSON.stringify(e)),N(),k(s)}},k=function(e){var t=sessionStorage.getItem(e);if(t&&n){var o=JSON.parse(t);o.length&&(n.updateScene({elements:o}),r&&Il(o))}},N=function(){null===n||void 0===n||n.updateScene({elements:[]})},C=function(e){!function(e,t){var n,r,o,a,i=at.getState().session,s={type:oo.WHITEBOARD,room_sid:i.currentRoom.sid,message_id:"",body:{type:io.PAGE_CHANGE,from:{sid:null!==(r=null===(n=i.currentUser)||void 0===n?void 0:n.sid)&&void 0!==r?r:"",userId:null!==(a=null===(o=i.currentUser)||void 0===o?void 0:o.userId)&&void 0!==a?a:""},msg:"".concat(e)}};""!==t&&(s.to=t),Ti(JSON.stringify(s))}(e),setTimeout((function(){x(Ye(e))}),500)},E=function(){C(s-1)},T=function(){C(s+1)},P=function(){return oc(void 0,void 0,void 0,(function(){var e,t;return ac(this,(function(n){switch(n.label){case 0:return e={user_id:null===w||void 0===w?void 0:w.userId,task:"promote"},[4,ro("switchPresenter",e)];case 1:return(t=n.sent()).status?(0,l.Am)(g("left-panel.menus.notice.presenter-changed"),{toastId:"lock-setting-status",type:"info"}):(0,l.Am)(g(t.msg),{toastId:"lock-setting-status",type:"error"}),[2]}}))}))};return(0,o.jsx)(o.Fragment,{children:r?(0,o.jsxs)("div",rc({className:"flex pt-1 wb-page-navigation"},{children:[(0,o.jsx)("button",rc({className:"pre w-8 h-8 flex items-center justify-center",onClick:E,disabled:p},{children:(0,o.jsx)("i",{className:"pnm-arrow-left-short text-black text-xl opacity-50"})})),(0,o.jsx)("select",rc({id:"pages",name:"pages",className:"pagesOpts block h-8 py-1 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",onChange:function(e){return C(Number(e.currentTarget.value))},value:s},{children:u})),(0,o.jsx)("button",rc({className:"next w-8 h-8 flex items-center justify-center",onClick:T,disabled:v},{children:(0,o.jsx)("i",{className:"pnm-arrow-right-short text-black text-xl opacity-50"})}))]})):(0,o.jsxs)("div",rc({className:"flex text-sm items-center justify-center relative pt-3"},{children:[S&&!_?(0,o.jsx)("button",rc({className:"w-10 h-8 flex items-center justify-center absolute left-0 top-[3px]",onClick:P},{children:(0,o.jsx)("i",{className:"pnm-presenter primaryColor text-[14px] opacity-50"})})):null,g("whiteboard.page",{count:s})]}))})}));const uc=function(e){var t=(0,a.useRef)();return(0,a.useEffect)((function(){t.current=e})),t.current};var dc=function(){return dc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},dc.apply(this,arguments)},fc=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},pc=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},mc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},hc=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},vc=(0,pt.P1)((function(e){return e.whiteboard.excalidrawElements}),(function(e){return e})),yc=(0,pt.P1)((function(e){return e.whiteboard.mousePointerLocation}),(function(e){return e})),bc=(0,pt.P1)((function(e){return e.whiteboard.whiteboardFiles}),(function(e){return e})),xc=(0,pt.P1)((function(e){return e.whiteboard.requestedWhiteboardData}),(function(e){return e})),gc=(0,pt.P1)((function(e){var t,n,r;return null===(r=null===(n=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings)||void 0===r?void 0:r.lock_whiteboard}),(function(e){return e})),wc=(0,pt.P1)((function(e){return e.whiteboard.currentPage}),(function(e){return e})),Sc=(0,pt.P1)((function(e){return e.whiteboard.whiteboardFileId}),(function(e){return e})),_c=(0,pt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_presenter}),(function(e){return e}));const jc=a.memo((function(e){var t=e.videoSubscribers,n=at.getState().session.currentUser,r=at.getState().session.currentRoom,i=new Map,s=(0,lt.$)().i18n,l=mc(function(){var e=El((0,a.useState)(null),2),t=e[0],n=e[1];return[t,(0,a.useCallback)((function(e){return n(e)}),[])]}(),2),c=l[0],u=l[1],d=mc((0,a.useState)(!0),2),f=d[0],p=d[1],m=mc((0,a.useState)("light"),2),h=m[0],v=m[1],y=mc((0,a.useState)(-1),2),b=y[0],x=y[1],g=st(vc),w=st(yc),S=st(N.selectAll),_=st(bc),j=st(xc),k=st(gc),C=st(Sc),E=uc(C),T=st(_c),P=st(wc),A=nc(P);(0,a.useEffect)((function(){var e,t;c||(v("light"),(null===n||void 0===n?void 0:n.isRecorder)||(null===(t=null===(e=r.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_whiteboard)||p(!1))}),[c]),(0,a.useEffect)((function(){c||function(){var e=at.getState().session,t=N.selectAll(at.getState()).filter((function(t){var n;return t.sid!==(null===(n=e.currentUser)||void 0===n?void 0:n.sid)}));if(t.length){t.sort((function(e,t){return e.joinedAt-t.joinedAt}));var n=t;n.length>2&&(n=t.slice(0,2)),n.forEach((function(t){var n,r,o,a,i={type:oo.SYSTEM,room_sid:e.currentRoom.sid,message_id:"",to:t.sid,body:{type:ao.INIT_WHITEBOARD,from:{sid:null!==(r=null===(n=e.currentUser)||void 0===n?void 0:n.sid)&&void 0!==r?r:"",userId:null!==(a=null===(o=e.currentUser)||void 0===o?void 0:o.userId)&&void 0!==a?a:""},msg:""}};Ti(JSON.stringify(i))}))}}(),j.requested&&c&&function(e,t){var n=at.getState().whiteboard,r={fileId:n.whiteboardFileId,fileName:n.fileName,filePath:n.filePath,totalPages:n.totalPages,currenPage:n.currentPage,pageFiles:n.whiteboardFiles};Ol(r,t);var o=e.getSceneElementsIncludingDeleted();o.length&&Il(o,t),at.dispatch(qe({requested:!1,sendTo:""}))}(c,j.sendTo)}),[j,c]),(0,a.useEffect)((function(){c&&C!==E&&(x(-1),c.updateScene({elements:[]}),c.addFiles([]),sessionStorage.clear())}),[C,c,E]),(0,a.useEffect)((function(){c&&(S.forEach((function(e){e.metadata.is_admin&&(i.has(e.userId)||i.set(e.userId,{}))})),c.updateScene({collaborators:i}))}),[S,c]),(0,a.useEffect)((function(){"undefined"!==typeof k&&((null===n||void 0===n?void 0:n.isRecorder)||p(k))}),[k]),(0,a.useEffect)((function(){var e,t;T?p(!1):(null===n||void 0===n?void 0:n.isRecorder)||p(null===(t=null===(e=null===n||void 0===n?void 0:n.metadata)||void 0===e?void 0:e.lock_settings.lock_whiteboard)||void 0===t||t)}),[T]),(0,a.useEffect)((function(){A&&P!==A&&x(-1),!T&&A&&P!==A&&(null===c||void 0===c||c.updateScene({elements:[]}),null===c||void 0===c||c.addFiles([]))}),[P,A,T,c]),(0,a.useEffect)((function(){if(g&&c){var e=JSON.parse(g),t=function(e,t,n){var r,o,a,i,s=e.reduce((function(e,t,n){return e[t.id]=[t,n],e}),{}),l=e.slice(),c=new WeakMap,u=0,d=0,f=-1;try{for(var p=Tl(t),m=p.next();!m.done;m=p.next()){var h=m.value;f++;var v=s[h.id];if(Pl(n,null===v||void 0===v?void 0:v[0],h))h.parent&&delete h.parent;else{v&&c.set(v[0],!0);var y=h.parent||(null===(a=t[f-1])||void 0===a?void 0:a.id)||null;if(null!=y)if(delete h.parent,"^"===y)d++,0===u?(l.unshift(h),s[h.id]=[h,u-d]):(l.splice(u+1,0,h),s[h.id]=[h,u+1-d],u++);else{var b=s[y]?null===(i=s[y])||void 0===i?void 0:i[1]:null;null!=b&&(b+=d),null!=b&&b>=u?(l.splice(b+1,0,h),d++,s[h.id]=[h,b+1-d],u=b+1):null!=b?(l.splice(u+1,0,h),d++,s[h.id]=[h,u+1-d],u++):(l.push(h),s[h.id]=[h,l.length-1-d])}else v?(l[v[1]]=h,s[h.id]=[h,v[1]]):(l.push(h),s[h.id]=[h,l.length-1-d])}}}catch(x){r={error:x}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}return l.filter((function(e){return!c.has(e)}))}(c.getSceneElementsIncludingDeleted(),e,c.getAppState());F(t)}}),[g,c]),(0,a.useEffect)((function(){var e;if(w){var t=JSON.parse(w),n=t.pointer,r=t.button,o=t.name,a=t.userId,s=t.selectedElementIds,l=new Map(i),u=null!==(e=l.get(a))&&void 0!==e?e:{};u.pointer=n,u.button=r,u.selectedElementIds=s,u.username=o,l.set(a,u),null===c||void 0===c||c.updateScene({collaborators:l})}}),[w]),(0,a.useEffect)((function(){if(_&&c){var e=JSON.parse(_);if(e.length){var t=e.filter((function(e){return e.currenPage===P}));R(c,t)}}}),[_,c,P]);var R=function(e,t){return fc(void 0,void 0,void 0,(function(){var n,r,o,a,i,s,l,c,u,d,f,p,m;return pc(this,(function(h){switch(h.label){case 0:n=[],r=[],h.label=1;case 1:h.trys.push([1,6,7,8]),o=hc(t),a=o.next(),h.label=2;case 2:if(a.done)return[3,5];for(u in i=a.value,s=window.PLUG_N_MEET_SERVER_URL+"/download/uploadedFile/"+i.filePath,l=e.getFiles(),c=!1,l)if(l[u].id===i.id){c=!0;break}return c?[3,4]:[4,Kl(s,i.id,b,i.uploaderWhiteboardHeight,i.uploaderWhiteboardWidth)];case 3:(d=h.sent())&&e&&(n.push(d.image),r.push(d.elm)),h.label=4;case 4:return a=o.next(),[3,2];case 5:return[3,8];case 6:return f=h.sent(),p={error:f},[3,8];case 7:try{a&&!a.done&&(m=o.return)&&m.call(o)}finally{if(p)throw p.error}return[7];case 8:return n.length?(e.addFiles(n),r.forEach((function(t){var n=e.getSceneElementsIncludingDeleted().slice(0);n.filter((function(e){return e.id===t.id})).length||n.push(t),e.updateScene({elements:n})})),[2]):[2]}}))}))},F=function(e,t){var n=(void 0===t?{}:t).init,r=void 0!==n&&n;e.length&&(null===c||void 0===c||c.updateScene({elements:e,commitToHistory:r}),x((0,Nl.getSceneVersion)(e)),null===c||void 0===c||c.history.clear())},I=function(e){if(c&&n&&e.length){if(f)return;(0,Nl.getSceneVersion)(e)>b&&(x((0,Nl.getSceneVersion)(e)),function(e){var t,n,r=e.reduce((function(e,t,n,r){var o;return(!Fl.has(t.id)||t.version>Fl.get(t.id))&&e.push(Al(Al({},t),{parent:0===n?"^":null===(o=r[n-1])||void 0===o?void 0:o.id})),e}),[]);Il(r,"");try{for(var o=Rl(r),a=o.next();!a.done;a=o.next()){var i=a.value;Fl.set(i.id,i.version)}}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}(e))}},O=kl()((function(e){f||e.pointersMap.size<2&&n&&function(e){var t,n,r,o,a=at.getState().session,i={type:io.POINTER_UPDATE,from:{sid:null!==(n=null===(t=a.currentUser)||void 0===t?void 0:t.sid)&&void 0!==n?n:"",userId:null!==(o=null===(r=a.currentUser)||void 0===r?void 0:r.userId)&&void 0!==o?o:""},msg:JSON.stringify(e)},s={type:oo.WHITEBOARD,room_sid:a.currentRoom.sid,room_id:a.currentRoom.room_id,message_id:"",body:i};Ti(JSON.stringify(s))}({pointer:e.pointer,button:e.button||"up",selectedElementIds:null===c||void 0===c?void 0:c.getAppState().selectedElementIds,userId:n.userId,name:n.name})}),33),M=function(){return(0,o.jsx)(o.Fragment,{children:T&&c?(0,o.jsx)(Wl,{currenPage:P,excalidrawAPI:c}):null})},D=function(){return(0,o.jsx)(cc,{excalidrawAPI:c,isPresenter:null!==T&&void 0!==T&&T})};return(0,o.jsxs)("div",dc({className:"middle-fullscreen-wrapper h-full flex ".concat((null===t||void 0===t?void 0:t.size)?"verticalsWebcamsActivated":"")},{children:[(0,o.jsx)(fl,{videoSubscribers:t}),(0,o.jsx)("div",dc({className:"excalidraw-wrapper flex-1 w-full max-w-[1200px] m-auto h-[calc(100%-50px)] sm:px-5 mt-9 z-[0]"},{children:(0,o.jsx)(Cl(),{ref:u,onChange:I,onPointerUpdate:O,viewModeEnabled:f,isCollaborating:!0,theme:h,name:"plugNmeet whiteboard",UIOptions:{canvasActions:{loadScene:!1,export:!1,saveAsImage:!(null===n||void 0===n?void 0:n.isRecorder)}},autoFocus:!0,detectScroll:!0,langCode:s.languages[0],renderTopRightUI:M,renderFooter:D})}))]}))}));var kc=function(){return kc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},kc.apply(this,arguments)},Nc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Cc=(0,pt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.external_media_player_features.is_active}),(function(e){return e})),Ec=(0,pt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.external_media_player_features.url}),(function(e){return e})),Tc=(0,pt.P1)((function(e){return e.externalMediaPlayer.action}),(function(e){return e})),Pc=(0,pt.P1)((function(e){return e.externalMediaPlayer.seekTo}),(function(e){return e})),Ac=(0,pt.P1)((function(e){return e.bottomIconsActivity.screenHeight}),(function(e){return e})),Rc=(0,pt.P1)((function(e){return e.bottomIconsActivity.screenWidth}),(function(e){return e}));const Fc=function(e){var t,n,r,i=e.videoSubscribers,s=Nc((0,a.useState)(!0),2),l=s[0],c=s[1],u=Nc((0,a.useState)(!1),2),d=u[0],f=u[1],p=Nc((0,a.useState)(!1),2),m=p[0],h=p[1],v=st(Ec),y=st(Cc),b=st(Tc),x=st(Pc),g=st(Ac),w=st(Rc),S=it(),_=at.getState().session,j=null===(n=null===(t=_.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin,k=null===(r=_.currentUser)||void 0===r?void 0:r.isRecorder,N=(0,a.useRef)();(0,a.useEffect)((function(){k||(S(oe(!1)),S(ae(!1)))}),[]),(0,a.useEffect)((function(){v&&(S(rt()),h(!1))}),[S,v]),(0,a.useEffect)((function(){"play"===b?h(!0):"pause"===b&&h(!1)}),[b]),(0,a.useEffect)((function(){var e;d&&x>1&&N&&(null===(e=N.current)||void 0===e||e.seekTo(x))}),[x,N,d]),(0,a.useEffect)((function(){var e;if(j&&d&&N){var t=function(e){var t,n,r,o,a={type:oo.SYSTEM,room_sid:_.currentRoom.sid,message_id:"",body:{type:ao.EXTERNAL_MEDIA_PLAYER_EVENTS,from:{sid:null!==(n=null===(t=_.currentUser)||void 0===t?void 0:t.sid)&&void 0!==n?n:"",userId:null!==(o=null===(r=_.currentUser)||void 0===r?void 0:r.userId)&&void 0!==o?o:""},msg:e}};Ti(JSON.stringify(a))};if(l){var n={action:"pause"};t(JSON.stringify(n))}else{n={action:"play",seekTo:null===(e=N.current)||void 0===e?void 0:e.getCurrentTime()};t(JSON.stringify(n))}}}),[d,l,N]);var C=function(){f(!0)},E=function(){c(!0)},T=function(){c(!1)},P=function(e){N.current=e};return(0,o.jsx)(o.Fragment,{children:y?(0,o.jsxs)("div",kc({className:"middle-fullscreen-wrapper h-full flex ".concat((null===i||void 0===i?void 0:i.size)?"verticalsWebcamsActivated":"")},{children:[(0,o.jsx)(fl,{videoSubscribers:i}),v?(0,o.jsx)("div",kc({className:"externalMediaPlayerWrapper m-auto w-full flex items-center justify-center max-w-[1000px] flex-1 p-4"},{children:(0,o.jsx)("div",kc({className:"media-player-inner"},{children:(0,o.jsx)(Vo.Z,{ref:P,url:v,width:.7*w,height:.7*g,playing:m,controls:!!j,onReady:C,onPause:E,onPlay:T})}))})):null]})):null})};var Ic=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Oc=(0,pt.P1)((function(e){return e.session.screenSharing}),(function(e){return e.isActive})),Mc=(0,pt.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e})),Dc=(0,pt.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e})),Uc=(0,pt.P1)((function(e){return e.bottomIconsActivity.isActiveSharedNotePad}),(function(e){return e})),Lc=(0,pt.P1)((function(e){return e.bottomIconsActivity.isActiveWhiteboard}),(function(e){return e})),Bc=(0,pt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.external_media_player_features.is_active}),(function(e){return e}));const Wc=function(e){var t=e.audioSubscribers,n=e.videoSubscribers,r=e.screenShareTracks,i=st(Oc),s=st(Mc),l=st(Dc),c=st(Uc),u=st(Lc),d=st(Bc),f=Ic((0,a.useState)(24),2),p=f[0],m=f[1];(0,a.useEffect)((function(){var e=at.getState().session.userDeviceType;"mobile"!==e&&"tablet"!==e||m(6)}),[]);return(0,o.jsxs)(o.Fragment,{children:[l&&i&&r?(0,o.jsx)(ml,{videoSubscribers:n,screenShareTracks:r}):null,!i&&c?(0,o.jsx)(_l,{videoSubscribers:n}):null,!i&&u?(0,o.jsx)(jc,{videoSubscribers:n}):null,!i&&d?(0,o.jsx)(Fc,{videoSubscribers:n}):null,!s||(l||c||u||d)&&(i||c||u||d)||!n?null:(0,o.jsx)(ll,{videoSubscribers:n,perPage:p}),t?(0,o.jsx)(bl,{audioSubscribers:t}):null]})};var Vc=function(){return Vc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Vc.apply(this,arguments)},Gc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Hc=(0,pt.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e})),zc=(0,pt.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e})),Qc=(0,pt.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e})),Xc=(0,pt.P1)((function(e){return e.bottomIconsActivity.isActiveSharedNotePad}),(function(e){return e})),Jc=(0,pt.P1)((function(e){return e.bottomIconsActivity.isActiveWhiteboard}),(function(e){return e})),qc=(0,pt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.external_media_player_features.is_active}),(function(e){return e}));const Yc=function(e){var t,n=e.currentRoom,r=e.audioSubscribers,i=e.videoSubscribers,s=e.screenShareTracks,l=e.isRecorder,c=st(Hc),u=st(Qc),d=st(Xc),f=st(Jc),p=st(qc),m=it(),h=st(zc),v=Gc((0,a.useState)(!0),2),y=v[0],b=v[1],x=Gc((0,a.useState)(),2),g=x[0],w=x[1],S=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";return(0,a.useEffect)((function(){var e;(null===(e=at.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.chat_features.allow_chat)||(b(!1),m(oe(!1)))}),[m]),(0,a.useEffect)((function(){var e=[];h?e.push("showChatPanel"):e.push("hideChatPanel"),c?e.push("showParticipantsPanel"):e.push("hideParticipantsPanel"),(null===s||void 0===s?void 0:s.size)&&u?e.push("showScreenShare fullWidthMainArea"):e.push("hideScreenShare"),d?e.push("showSharedNotepad fullWidthMainArea"):e.push("hideSharedNotepad"),f?e.push("showWhiteboard fullWidthMainArea"):e.push("hideWhiteboard"),p?e.push("showExternalMediaPlayer fullWidthMainArea"):e.push("hideExternalMediaPlayer"),w(e.join(" "))}),[u,h,c,d,f,null===s||void 0===s?void 0:s.size,p]),(0,o.jsxs)("div",Vc({id:"main-area",className:"".concat(l?"h-[calc(100vh)] isRecorder":"lg:h-[calc(100vh-110px)]","  plugNmeet-app-main-area overflow-hidden relative flex ").concat(g)},{children:[(0,o.jsx)("div",{className:"main-app-bg absolute w-full h-full left-0 top-0 object-cover pointer-events-none ",style:{backgroundImage:'url("'.concat(S,'/imgs/app-banner.jpg")')}}),(0,o.jsxs)("div",Vc({className:"inner flex justify-between w-full"},{children:[(0,o.jsx)(mt.u,Vc({className:"transition-left-panel",show:c,enter:"transform transition duration-[400ms]",enterFrom:"opacity-0 translate-x-0",enterTo:"opacity-100",leave:"transform transition duration-[400ms]",leaveFrom:"opacity-100",leaveTo:"opacity-0 -translate-x-full"},{children:(0,o.jsx)(us,{currentRoom:n})})),(0,o.jsxs)("div",Vc({className:"middle-area relative flex-auto"},{children:[(0,o.jsx)(Us,{}),(0,o.jsx)(Wc,{currentRoom:n,audioSubscribers:r,videoSubscribers:i,screenShareTracks:s})]})),y?(0,o.jsx)(mt.u,Vc({className:"transition-right-panel",show:h,enter:"transform transition duration-[400ms]",enterFrom:"opacity-0 translate-x-0",enterTo:"opacity-100",leave:"transform transition duration-[400ms]",leaveFrom:"opacity-100",leaveTo:"opacity-0 translate-x-full"},{children:(0,o.jsx)(Is,{currentRoom:n,isRecorder:l})})):null]}))]}))};var $c=function(){return $c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$c.apply(this,arguments)},Kc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Zc=(0,pt.P1)((function(e){return e.session.isStartup}),(function(e){return e}));const eu=function(e){var t=e.onCloseModal,n=Kc((0,a.useState)(!0),2),r=n[0],i=n[1],s=st(Zc),l=it(),c=(0,lt.$)().t,u=function(e){void 0===e&&(e=!1),i(!1),l(O(!1)),e&&l(Be(0)),t()};return(0,o.jsx)("div",{children:s?(0,o.jsx)("div",$c({id:"startupJoinModal",className:"".concat(r?"opacity-1 pointer-events-auto":"pointer-events-none opacity-0"," join-the-audio-popup fixed transition ease-in top-0 left-0 w-full h-full z-[999] bg-white/80 px-6 flex items-center justify-center")},{children:(0,o.jsxs)("div",$c({className:"popup-inner bg-white w-full max-w-md rounded-2xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",$c({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return u(!0)}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)("p",$c({className:"text-base md:text-lg primaryColor font-normal mb-5 text-center"},{children:c("app.how-to-join")})),(0,o.jsxs)("div",$c({className:"btn flex justify-center"},{children:[(0,o.jsxs)("button",$c({type:"button",className:"microphone bg-transparent mr-4 text-center",onClick:function(){return l(ue(!0)),void u()}},{children:[(0,o.jsx)("div",$c({className:"h-[40px] md:h-[60px] w-[40px] md:w-[60px] m-auto overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mb-1 flex items-center justify-center cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute primaryColor text-xl"})})),(0,o.jsx)("p",$c({className:"text-sm md:text-base primaryColor font-normal"},{children:c("app.microphone")}))]})),(0,o.jsxs)("button",$c({type:"button",id:"listenOnlyJoin",className:"headphone bg-transparent ml-4 text-center"},{children:[(0,o.jsx)("div",$c({className:"camera h-[40px] md:h-[60px] w-[40px] md:w-[60px] m-auto overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mb-1 flex items-center justify-center cursor-pointer",onClick:function(){return u()}},{children:(0,o.jsx)("i",{className:"pnm-listen-only primaryColor text-xl"})})),(0,o.jsx)("p",$c({className:"text-sm md:text-base primaryColor font-normal"},{children:c("app.listen-only")}))]}))]}))]}))})):null})};var tu=function(){function e(e){var t=this;this.isRecorderJoin=!1,this.participantsCount=0,this.participantCounterInterval=0,this.participantConnected=function(e){t.addParticipant(e)},this.addParticipant=function(e){var n,r,o;at.dispatch(E({sid:e.sid,userId:e.identity,name:null!==(n=e.name)&&void 0!==n?n:"",metadata:e.metadata?JSON.parse(e.metadata):null,audioTracks:e.audioTracks.size,videoTracks:e.videoTracks.size,screenShareTrack:0,isMuted:!1,connectionQuality:e.connectionQuality,isLocal:!1,joinedAt:null!==(o=null===(r=e.joinedAt)||void 0===r?void 0:r.getTime())&&void 0!==o?o:Date.now(),visibility:"visible"})),t.isRecorderJoin&&t.participantsCount++},this.participantDisconnected=function(e){t.removeParticipant(e),t.isRecorderJoin&&t.participantsCount--},this.removeParticipant=function(e){var n=N.selectById(at.getState(),e.identity);(null===n||void 0===n?void 0:n.screenShareTrack)&&at.dispatch(U({isActive:!1,sharedBy:""})),at.dispatch(T(e.identity)),t.that.updateVideoSubscribers(e,!1),t.that.updateAudioSubscribers(e,!1),t.that.updateScreenShareOnUserDisconnect(e)},this.connectionQualityChanged=function(e,n){at.dispatch(P({id:n.identity,changes:{connectionQuality:e}})),e===Ce.ZV.Poor&&n.sid===t.that.room.localParticipant.sid&&"RECORDER_BOT"!==n.identity&&"RTMP_BOT"!==n.identity&&(0,l.Am)("Your connection quality isn't good enough",{toastId:"connection-status",type:"error"})},this.setParticipantMetadata=function(e,n){if(n.metadata){var r=JSON.parse(n.metadata);at.dispatch(P({id:n.identity,changes:{metadata:r}})),t.that.room.localParticipant.sid===n.sid&&(at.dispatch(B(r)),at.dispatch(ie(r.raised_hand)))}},this.that=e}return e.prototype.recorderJoined=function(){this.isRecorderJoin=!0,this.startParticipantCounter(),at.dispatch(ae(!1))},e.prototype.clearParticipantCounterInterval=function(){this.participantCounterInterval&&clearInterval(this.participantCounterInterval)},e.prototype.startParticipantCounter=function(){var e=this;this.participantCounterInterval=setInterval((function(){0===e.participantsCount&&(console.log("NO_USER_ONLINE"),e.that.room.disconnect())}),3e3)},e}();const nu=tu;var ru=function(){function e(e){var t=this;this.localTrackPublished=function(e,n){t.addSubscriber(e,n)},this.localTrackUnpublished=function(e,n){t.removeSubscriber(e,n)},this.trackSubscribed=function(e,n,r){t.addSubscriber(n,r)},this.trackUnsubscribed=function(e,n){t.removeSubscriber(e,n)},this.trackMuted=function(e,t){var n;at.dispatch(P({id:t.identity,changes:{isMuted:!0}})),t.identity===(null===(n=at.getState().session.currentUser)||void 0===n?void 0:n.userId)&&at.dispatch(ne(!0))},this.trackUnmuted=function(e,t){var n;at.dispatch(P({id:t.identity,changes:{isMuted:!1}})),t.identity===(null===(n=at.getState().session.currentUser)||void 0===n?void 0:n.userId)&&at.dispatch(ne(!1))},this.trackSubscriptionFailed=function(e,t){console.log("==== trackSubscriptionFailed ===="),console.log(e,t)},this.trackStreamStateChanged=function(e,t,n){console.log(t,n.name)},this.that=e}return e.prototype.addSubscriber=function(e,t){var n,r,o,a,i,s;if(this.roomMetadata||(this.roomMetadata=at.getState().session.currentRoom.metadata),this.currentUser||(this.currentUser=at.getState().session.currentUser),t instanceof Ce._A&&e.audioTrack){var l=at.getState().roomSettings.roomAudioVolume;t.getVolume()!==l&&t.setVolume(l)}if(t.identity!==(null===(n=this.currentUser)||void 0===n?void 0:n.userId)&&e.source===Ce.fQ.Source.Camera&&(((null===(r=this.roomMetadata.room_features)||void 0===r?void 0:r.admin_only_webcams)||!(null===(o=this.roomMetadata.room_features)||void 0===o?void 0:o.allow_view_other_webcams))&&!(null===(i=null===(a=this.currentUser)||void 0===a?void 0:a.metadata)||void 0===i?void 0:i.is_admin)&&t.metadata&&!JSON.parse(t.metadata).is_admin))return;e.source===Ce.fQ.Source.ScreenShare||e.source===Ce.fQ.Source.ScreenShareAudio?(at.dispatch(P({id:t.identity,changes:{screenShareTrack:1}})),at.dispatch(U({isActive:!0,sharedBy:t.identity})),this.that.setScreenShareTrack(e,t,!0)):(at.dispatch(P({id:t.identity,changes:{videoTracks:t.getTracks().filter((function(e){return e.source===Ce.fQ.Source.Camera})).length,audioTracks:t.getTracks().filter((function(e){return e.source===Ce.fQ.Source.Microphone})).length}})),e.source===Ce.fQ.Source.Microphone?(this.that.updateAudioSubscribers(t),at.dispatch(P({id:t.identity,changes:{isMuted:null===(s=e.audioTrack)||void 0===s?void 0:s.isMuted}}))):e.source===Ce.fQ.Source.Camera&&this.that.updateVideoSubscribers(t))},e.prototype.removeSubscriber=function(e,t){var n;e.source===Ce.fQ.Source.ScreenShare||e.source===Ce.fQ.Source.ScreenShareAudio?(at.dispatch(P({id:t.identity,changes:{screenShareTrack:0}})),at.dispatch(U({isActive:!1,sharedBy:""})),this.that.setScreenShareTrack(e,t,!1)):(at.dispatch(P({id:t.identity,changes:{videoTracks:t.getTracks().filter((function(e){return e.source===Ce.fQ.Source.Camera})).length,audioTracks:t.getTracks().filter((function(e){return e.source===Ce.fQ.Source.Microphone})).length,isMuted:null===(n=e.audioTrack)||void 0===n?void 0:n.isMuted}})),e.source===Ce.fQ.Source.Microphone?this.that.updateAudioSubscribers(t,!1):e.source===Ce.fQ.Source.Camera&&this.that.updateVideoSubscribers(t,!1))},e}();const ou=ru;var au=new TextDecoder,iu=function(e){var t=this;this.dataReceived=function(e,n,r){var o;t.requestedParticipant=n;var a=au.decode(e);if(a){var i;try{i=JSON.parse(a)}catch(s){return}r===Ce.WO.RELIABLE&&"SYSTEM"===i.type&&((null===(o=at.getState().session.currentUser)||void 0===o?void 0:o.isRecorder)||t.handleSystemTypeData(i.body))}},this.handleSystemTypeData=function(e){switch(e.type){case ao.RAISE_HAND:case ao.INFO:(0,l.Am)(m.t(e.msg).toString(),{type:"info"}),t.playNotification(e.type);break;case ao.ALERT:(0,l.Am)(m.t(e.msg).toString(),{type:"error"}),t.playNotification(e.type)}},this.playNotification=function(e){e!==ao.RAISE_HAND&&e!==ao.ALERT||at.dispatch(Ie(!0))},this.that=e};const su=iu;var lu=function(){var e=this;this.metadata=null,this.welcomeMessage=void 0,this.setRoomMetadata=function(t){(0,Io.isEmpty)(t)||(e.metadata=JSON.parse(t),e.metadata&&(e.setWindowTitle(e.metadata.room_title),e.showRecordingNotification(),e.showRTMPNotification(),e.publishWelcomeMessage(),at.dispatch(W(e.metadata))))},this.setWindowTitle=function(e){document.title=e},this.showRecordingNotification=function(){var t,n,r;if(!(null===(t=at.getState().session.currentUser)||void 0===t?void 0:t.isRecorder)){var o=at.getState().session.isActiveRecording;!o&&(null===(n=e.metadata)||void 0===n?void 0:n.is_recording)?(0,l.Am)(m.t("room-metadata.session-recording").toString(),{type:"info"}):o&&!(null===(r=e.metadata)||void 0===r?void 0:r.is_recording)&&(0,l.Am)(m.t("room-metadata.session-not-recording").toString(),{type:"info"})}},this.showRTMPNotification=function(){var t,n,r;if(!(null===(t=at.getState().session.currentUser)||void 0===t?void 0:t.isRecorder)){var o=at.getState().session.isActiveRtmpBroadcasting;!o&&(null===(n=e.metadata)||void 0===n?void 0:n.is_active_rtmp)?(0,l.Am)(m.t("room-metadata.rtmp-started").toString(),{type:"info"}):o&&!(null===(r=e.metadata)||void 0===r?void 0:r.is_active_rtmp)&&(0,l.Am)(m.t("room-metadata.rtmp-stopped").toString(),{type:"info"})}},this.publishWelcomeMessage=function(){var t,n,r;if(void 0===e.welcomeMessage)if((0,Io.isEmpty)(null===(t=e.metadata)||void 0===t?void 0:t.welcome_message))e.welcomeMessage="";else{e.welcomeMessage=null===(n=e.metadata)||void 0===n?void 0:n.welcome_message;var o={type:"CHAT",message_id:"",time:"",isPrivate:!1,from:{userId:"system",name:"System",sid:"system"},msg:null!==(r=e.welcomeMessage)&&void 0!==r?r:""};at.dispatch(je(o))}}};const cu=lu;var uu=function(e){var t=this;this.lastActiveWebcamChanged=Date.now(),this.activeSpeakers=[],this.activeSpeakersChanged=function(e){if(t.activeSpeakers=[],e.length){var n=at.getState().session.isWebcamPaginating,r=Date.now();e.forEach((function(e){var o,a,i;if(!n&&t.that.videoSubscribersMap.size>2){var s=t.lastActiveWebcamChanged+4e3;r>s&&t.that.videoSubscribersMap.has(e.sid)&&(t.that.updateVideoSubscribers(e),t.lastActiveWebcamChanged=r)}var l={sid:e.sid,userId:e.identity,metadata:e.metadata,name:null!==(o=null===e||void 0===e?void 0:e.name)&&void 0!==o?o:"",isSpeaking:e.isSpeaking,audioLevel:e.audioLevel,lastSpokeAt:null!==(i=null===(a=e.lastSpokeAt)||void 0===a?void 0:a.getTime())&&void 0!==i?i:Date.now()};at.dispatch(g(l)),t.activeSpeakers.push(l)}))}},this.runInterval=function(){t.interval=setInterval((function(){t.activeSpeakers.length?at.dispatch(S(t.activeSpeakers)):b.selectAll(at.getState()).length&&at.dispatch(w())}),1e3)},this.onLivekitDisconnect=function(){clearInterval(t.interval)},this.that=e,this.runInterval()};const du=uu;var fu=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},pu=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},mu=function(){function e(e,t,n,r,o,a,i){var s=this;this._audioSubscribersMap=new Map,this._videoSubscribersMap=new Map,this._screenShareTracksMap=new Map,this.url=window.LIVEKIT_SERVER_URL,this.connect=function(){return fu(s,void 0,void 0,(function(){var e;return pu(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),[4,this._room.connect(this.url,this.token)];case 1:return t.sent(),[4,this.initiateParticipants()];case 2:return t.sent(),[4,this.updateSession()];case 3:return t.sent(),ki(),this.roomConnectionStatusState("connected"),this.currentRoomState(this._room),this.startTokenRenewInterval(),[3,5];case 4:return e=t.sent(),this.roomConnectionStatusState("error"),this.errorState({title:"Error",text:String(e)}),[3,5];case 5:return[2]}}))}))},this.initiateParticipants=function(){return fu(s,void 0,void 0,(function(){var e,t,n=this;return pu(this,(function(r){return e=null!==(t="RECORDER_BOT"===this._room.localParticipant.identity||"RTMP_BOT"===this._room.localParticipant.identity)&&void 0!==t&&t,at.dispatch(M({sid:this._room.localParticipant.sid,userId:this._room.localParticipant.identity,name:this._room.localParticipant.name,isRecorder:e})),this.handleParticipant.setParticipantMetadata("",this._room.localParticipant),e?this.handleParticipant.recorderJoined():this.handleParticipant.addParticipant(this._room.localParticipant),this._room.participants.forEach((function(e){n.handleParticipant.addParticipant(e),e.getTracks().forEach((function(t){t.isSubscribed&&(t.source===Ce.fQ.Source.ScreenShare||t.source===Ce.fQ.Source.ScreenShareAudio?(at.dispatch(P({id:e.identity,changes:{screenShareTrack:1}})),at.dispatch(U({isActive:!0,sharedBy:e.identity}))):n.updateVideoSubscribers(e))}))})),[2]}))}))},this.updateSession=function(){return fu(s,void 0,void 0,(function(){return pu(this,(function(e){return at.dispatch(D({sid:this._room.sid,room_id:this._room.name})),!(0,Io.isEmpty)(this._room.metadata)&&this._room.metadata&&this.handleRoomMetadata.setRoomMetadata(this._room.metadata),[2]}))}))},this.configureRoom=function(){var e,t,n,r,o=new Ce.du({adaptiveStream:!0,dynacast:null!==(e=window.ENABLE_DYNACAST)&&void 0!==e&&e,videoCaptureDefaults:{resolution:Ce.OM.h720.resolution},publishDefaults:{simulcast:null!==(t=window.ENABLE_SIMULCAST)&&void 0!==t&&t,videoSimulcastLayers:[Ce.OM.h90,Ce.OM.h180,Ce.OM.h360],screenShareSimulcastLayers:[Ce.Ri.h360fps3,Ce.Ri.h720fps15],stopMicTrackOnMute:null!==(n=window.STOP_MIC_TRACK_ON_MUTE)&&void 0!==n&&n,videoCodec:null!==(r=window.VIDEO_CODEC)&&void 0!==r?r:"vp8"}});return o.on(Ce.TQ.Reconnecting,(function(){return s.roomConnectionStatusState("re-connecting")})),o.on(Ce.TQ.Reconnected,(function(){return s.roomConnectionStatusState("connected")})),o.on(Ce.TQ.Disconnected,s.onDisconnected),o.on(Ce.TQ.RoomMetadataChanged,s.handleRoomMetadata.setRoomMetadata),o.on(Ce.TQ.ActiveSpeakersChanged,s.handleActiveSpeakers.activeSpeakersChanged),o.on(Ce.TQ.MediaDevicesError,s.mediaDevicesError),o.on(Ce.TQ.DataReceived,s.handleDataMessages.dataReceived),o.on(Ce.TQ.ParticipantConnected,s.handleParticipant.participantConnected),o.on(Ce.TQ.ParticipantDisconnected,s.handleParticipant.participantDisconnected),o.on(Ce.TQ.ParticipantMetadataChanged,s.handleParticipant.setParticipantMetadata),o.on(Ce.TQ.ConnectionQualityChanged,s.handleParticipant.connectionQualityChanged),o.on(Ce.TQ.LocalTrackPublished,s.handleMediaTracks.localTrackPublished),o.on(Ce.TQ.LocalTrackUnpublished,s.handleMediaTracks.localTrackUnpublished),o.on(Ce.TQ.TrackSubscribed,s.handleMediaTracks.trackSubscribed),o.on(Ce.TQ.TrackUnpublished,s.handleMediaTracks.trackUnsubscribed),o.on(Ce.TQ.TrackSubscriptionFailed,s.handleMediaTracks.trackSubscriptionFailed),o.on(Ce.TQ.TrackMuted,s.handleMediaTracks.trackMuted),o.on(Ce.TQ.TrackUnmuted,s.handleMediaTracks.trackUnmuted),o.on(Ce.TQ.TrackStreamStateChanged,s.handleMediaTracks.trackStreamStateChanged),o},this.onDisconnected=function(){s.errorState({title:"Room disconnected",text:"Room was closed or disconnected. "}),s.roomConnectionStatusState("disconnected"),Si&&(null===di||void 0===di||di.close(),ji=!0),s.handleActiveSpeakers.onLivekitDisconnect(),clearInterval(s.tokenRenewInterval),s.handleParticipant.clearParticipantCounterInterval()},this.mediaDevicesError=function(e){console.log(e)},this.startTokenRenewInterval=function(){s.tokenRenewInterval=setInterval((function(){var e=at.getState().session.token,t={type:oo.SYSTEM,message_id:"",room_sid:s._room.sid,room_id:s._room.name,body:{type:ao.RENEW_TOKEN,from:{sid:s._room.localParticipant.sid,userId:s._room.localParticipant.identity},msg:e}};Ti(JSON.stringify(t))}),3e5)},this.setScreenShareTrack=function(e,t,n){void 0===n&&(n=!0),console.log("=== setScreenShareTrack ===",e.source),n?s._screenShareTracksMap.set(t.identity,e):s._screenShareTracksMap.delete(t.identity),s.screenShareTracksState(new Map(s._screenShareTracksMap))},this.updateScreenShareOnUserDisconnect=function(e){s._screenShareTracksMap.size&&s._screenShareTracksMap.has(e.identity)&&(s._screenShareTracksMap.delete(e.identity),s.screenShareTracksState(new Map(s._screenShareTracksMap)),s._screenShareTracksMap.size||at.dispatch(U({isActive:!1,sharedBy:""})))},this.updateAudioSubscribers=function(e,t){void 0===t&&(t=!0),"undefined"!==typeof e.identity?e.identity!==s._room.localParticipant.identity&&(t?s._audioSubscribersMap.set(e.identity,e):s._audioSubscribersMap.has(e.identity)&&s._audioSubscribersMap.delete(e.identity),s.audioSubscribersState(new Map(s._audioSubscribersMap)),at.dispatch(H(s.audioSubscribersState.length))):console.log("participant.identity undefined")},this.updateVideoSubscribers=function(e,t){if(void 0===t&&(t=!0),console.log("==== updateVideoSubscribers ===="),"undefined"!==typeof e.identity)if(t?s._videoSubscribersMap.set(e.identity,e):s._videoSubscribersMap.has(e.identity)&&(console.log("removing..",e.identity),s._videoSubscribersMap.delete(e.identity)),at.dispatch(G(s._videoSubscribersMap.size)),s._videoSubscribersMap.size<=1)s.videoSubscribersState(new Map(s._videoSubscribersMap));else{var n=Array.from(s._videoSubscribersMap).filter((function(e){var t;return e[0]!==(null===(t=s._room.localParticipant)||void 0===t?void 0:t.identity)}));if(n.sort((function(e,t){var n,r,o,a,i,s,l,c,u=e[1],d=t[1];if(u.isSpeaking&&d.isSpeaking)return d.audioLevel-u.audioLevel;if(u.isSpeaking!==d.isSpeaking)return u.isSpeaking?-1:1;if(u.lastSpokeAt!==d.lastSpokeAt){var f=null!==(r=null===(n=u.lastSpokeAt)||void 0===n?void 0:n.getTime())&&void 0!==r?r:0;return(null!==(a=null===(o=d.lastSpokeAt)||void 0===o?void 0:o.getTime())&&void 0!==a?a:0)-f}return(null!==(s=null===(i=u.joinedAt)||void 0===i?void 0:i.getTime())&&void 0!==s?s:0)-(null!==(c=null===(l=d.joinedAt)||void 0===l?void 0:l.getTime())&&void 0!==c?c:0)})),s._room.localParticipant.getTracks().length){var r=[s._room.localParticipant.sid,s._room.localParticipant];n.unshift(r)}s.videoSubscribersState(new Map(n)),console.log("===ended update ====")}else console.log("participant.identity undefined")},this.token=e,this.audioSubscribersState=t,this.videoSubscribersState=n,this.screenShareTracksState=i,this.currentRoomState=r,this.errorState=o,this.roomConnectionStatusState=a,this.handleParticipant=new nu(this),this.handleMediaTracks=new ou(this),this.handleDataMessages=new su(this),this.handleRoomMetadata=new cu,this.handleActiveSpeakers=new du(this),this.roomConnectionStatusState("connecting"),sessionStorage.clear(),this._room=this.configureRoom(),this.connect()}return Object.defineProperty(e.prototype,"videoSubscribersMap",{get:function(){return this._videoSubscribersMap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"room",{get:function(){return this._room},enumerable:!1,configurable:!0}),e}();const hu=mu;var vu=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const yu=function(){var e=vu((0,a.useState)(),2),t=e[0],n=e[1],r=vu((0,a.useState)(),2),o=r[0],i=r[1],s=vu((0,a.useState)("loading"),2),l=s[0],c=s[1],u=vu((0,a.useState)(),2),d=u[0],f=u[1],p=vu((0,a.useState)(),2),m=p[0],h=p[1],v=vu((0,a.useState)(),2),y=v[0],b=v[1];return{error:t,setError:n,roomConnectionStatus:l,setRoomConnectionStatus:c,currentRoom:o,audioSubscribers:d,videoSubscribers:m,screenShareTracks:y,startLivekitConnection:function(e){new hu(e,f,h,i,n,c,b)}}};var bu=function(){return bu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},bu.apply(this,arguments)},xu=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},gu=(0,pt.P1)((function(e){return e.roomSettings.playAudioNotification}),(function(e){return e})),wu=(0,pt.P1)((function(e){return e.roomSettings.allowPlayAudioNotification}),(function(e){return e}));const Su=a.memo((function(){var e,t=it(),n=(0,a.useRef)(null),r=st(gu),i=st(wu),s=xu((0,a.useState)(!1),2),l=s[0],c=s[1],u=null!==(e=window.STATIC_ASSETS_PATH)&&void 0!==e?e:"./assets";return(0,a.useEffect)((function(){var e=n.current;r&&(!l&&i&&(null===e||void 0===e||e.play()),t(Ie(!1)))}),[r,l,i,t]),(0,a.useEffect)((function(){var e=n.current;return e&&(e.addEventListener("playing",(function(){return c(!0)})),e.addEventListener("ended",(function(){return c(!1)}))),function(){e&&(e.pause(),e.removeEventListener("playing",(function(){return c(!0)})),e.removeEventListener("ended",(function(){return c(!1)})))}}),[]),(0,o.jsx)("div",bu({style:{display:"none"}},{children:(0,o.jsx)("audio",{ref:n,src:"".concat(u,"/audio/beep-07a.mp3")})}))}));var _u=n(95172),ju=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},ku=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const Nu=function(e){var t=it(),n=(0,lt.$)().t;(0,_u.y1)("ctrl+alt+m",(function(){e&&function(e){e&&e.localParticipant.audioTracks.forEach((function(e){return ju(void 0,void 0,void 0,(function(){return ku(this,(function(n){switch(n.label){case 0:return e.track&&e.track.source===Ce.fQ.Source.Microphone?e.isMuted?[4,e.track.unmute()]:[3,2]:[3,4];case 1:return n.sent(),t(ne(!1)),[3,4];case 2:return[4,e.track.mute()];case 3:n.sent(),t(ne(!0)),n.label=4;case 4:return[2]}}))}))}))}(e)}),[e]),(0,_u.y1)("ctrl+alt+a",(function(){var e=at.getState().bottomIconsActivity;e.isActiveMicrophone||e.showMicrophoneModal||t(ue(!0))}));(0,_u.y1)("ctrl+alt+o",(function(){e&&function(e){e.localParticipant.audioTracks.forEach((function(t){return ju(void 0,void 0,void 0,(function(){return ku(this,(function(n){return t.track&&t.kind===Ce.fQ.Kind.Audio&&e.localParticipant.unpublishTrack(t.track),[2]}))}))})),t(te(!1)),t(ne(!1)),t(Re(""))}(e)}),[e]),(0,_u.y1)("ctrl+alt+v",(function(){var e=at.getState().bottomIconsActivity;e.isActiveWebcam||e.showVideoShareModal||t(de(!0))}));(0,_u.y1)("ctrl+alt+x",(function(){e&&(at.getState().bottomIconsActivity.isActiveWebcam&&function(e){e.localParticipant.videoTracks.forEach((function(t){return ju(void 0,void 0,void 0,(function(){return ku(this,(function(n){return t.track&&t.track.source===Ce.fQ.Source.Camera&&e.localParticipant.unpublishTrack(t.track),[2]}))}))})),t(re(!1)),t(Fe("")),t(be({type:"none"}))}(e))}),[e]),(0,_u.y1)("ctrl+alt+u",(function(){var e=at.getState().bottomIconsActivity.isActiveParticipantsPanel;t(ae(!e))})),(0,_u.y1)("ctrl+alt+c",(function(){var e=at.getState().bottomIconsActivity.isActiveChatPanel;t(oe(!e))})),(0,_u.y1)("ctrl+alt+l",(function(){var e,n;if(null===(n=null===(e=at.getState().session.currentUser)||void 0===e?void 0:e.metadata)||void 0===n?void 0:n.is_admin){var r=at.getState().bottomIconsActivity.showLockSettingsModal;t(fe(!r))}})),(0,_u.y1)("ctrl+alt+s",(function(){var e=at.getState().roomSettings.isShowRoomSettingsModal;t(Oe(!e))})),(0,_u.y1)("ctrl+alt+w",(function(){var e=at.getState().bottomIconsActivity.isActiveWhiteboard;t(ce(!e))}));(0,_u.y1)("ctrl+alt+r",(function(){e&&function(e,r){ju(void 0,void 0,void 0,(function(){var o,a;return ku(this,(function(i){switch(i.label){case 0:return e?[3,2]:(o={sid:r.sid,room_id:r.name,msg_type:ao.RAISE_HAND,msg:n("footer.notice.has-raised-hand",{user:r.localParticipant.name})},[4,ro("dataMessage",o)]);case 1:return(a=i.sent()).status?(t(ie(!0)),(0,l.Am)(n("footer.notice.you-raised-hand"),{type:"info"})):(0,l.Am)(a.msg,{type:"error"}),[3,4];case 2:return o={sid:r.sid,room_id:r.name,msg_type:ao.LOWER_HAND,msg:ao.LOWER_HAND},[4,ro("dataMessage",o)];case 3:(a=i.sent()).status?t(ie(!1)):(0,l.Am)(a.msg,{type:"error"}),i.label=4;case 4:return[2]}}))}))}(at.getState().bottomIconsActivity.isActiveRaisehand,e)}),[e])};const Cu=function(){(0,a.useEffect)((function(){if("undefined"===typeof window.DESIGN_CUSTOMIZATION){var e=new URLSearchParams(window.location.search);if(!e.get("custom_design"))return;window.DESIGN_CUSTOMIZATION=e.get("custom_design")}var t={};try{t=JSON.parse(window.DESIGN_CUSTOMIZATION)}catch(i){return void console.log("can't parse custom design params")}var n="";t.primary_color&&(n+=".primaryColor{ color: "+t.primary_color+"}",n+=".text-primaryColor { color: "+t.primary_color+"}",n+=".placeholder\\:text-primaryColor\\/70::placeholder { color: "+t.primary_color+"}",n+=".bg-primaryColor { background: "+t.primary_color+" !important;}",n+=".hover\\:bg-primaryColor:hover { background: "+t.primary_color+" !important;}",n+=".border-primaryColor { border-color: "+t.primary_color+" !important;}",n+=".excalidraw {\n    --color-primary: "+t.primary_color+";\n    --color-primary-darker: "+t.primary_color+";\n    --color-primary-darkest: "+t.primary_color+";\n}"),t.secondary_color&&(n+=".secondaryColor { color: "+t.secondary_color+" !important;}",n+=".text-secondaryColor { color: "+t.secondary_color+" !important;}",n+=".hover\\:text-secondaryColor:hover { color: "+t.secondary_color+" !important;}",n+=".group:hover .group-hover\\:text-secondaryColor { color: "+t.secondary_color+" !important;}",n+=".bg-secondaryColor, .hover:bg-secondaryColor:hover { background: "+t.secondary_color+" !important;}",n+=".hover:bg-secondaryColor:hover { background: "+t.secondary_color+" !important;}",n+=".border-secondaryColor { border-color: "+t.secondary_color+" !important;}",n+=".excalidraw {\n    --color-primary-light: "+t.secondary_color+";\n}"),t.background_image?(n+='.main-app-bg { \n        background: url("'.concat(t.background_image,'") !important;\n        background-position: center !important;\n        background-repeat: no-repeat !important;\n        background-size: cover !important;\n        }'),n+='.error-app-bg { \n        background: url("'.concat(t.background_image,'") !important;\n        background-position: center !important;\n        background-repeat: no-repeat !important;\n        background-size: cover !important;\n        }')):t.background_color&&(n+=".main-app-bg { \n        background: ".concat(t.background_color," !important;\n        }"),n+=".error-app-bg { \n        background: ".concat(t.background_color," !important;\n        }")),t.header_bg_color&&(n+="header#main-header { background: "+t.header_bg_color+"; }"),t.footer_bg_color&&(n+="footer#main-footer { background: "+t.footer_bg_color+"; }"),t.left_side_bg_color&&(n+=".participants-wrapper { background: "+t.left_side_bg_color+"; }",n+=".vertical-webcams { background: "+t.left_side_bg_color+" !important; }"),t.right_side_bg_color&&(n+=".messageModule-wrapper { background: "+t.right_side_bg_color+"; }");var r,o,a=document.head;return t.custom_css_url&&((r=document.createElement("link")).type="text/css",r.rel="stylesheet",r.href=t.custom_css_url,a.appendChild(r)),""!==n&&((o=document.createElement("style")).id="plugNmeetCustomization",o.textContent=n,a.appendChild(o)),function(){""!==n&&a.removeChild(o),t.custom_css_url&&a.removeChild(r)}}),[])};var Eu=n(12437),Tu=n.n(Eu),Pu=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Au=function(e,t){var n=it(),r=Pu((0,a.useState)(""),2),o=r[0],i=r[1],s=Pu((0,a.useState)("landscape-device"),2),l=s[0],c=s[1],u=Pu((0,a.useState)(""),2),d=u[0],f=u[1];(0,a.useEffect)((function(){window.onresize=function(){n(he(window.innerWidth)),n(ve(window.innerHeight)),p();var e=at.getState().bottomIconsActivity.isActiveChatPanel,t=at.getState().bottomIconsActivity.isActiveParticipantsPanel;window.innerWidth<1024&&e&&t&&n(ae(!1))},n(he(window.innerWidth)),n(ve(window.innerHeight)),window.innerWidth<1024&&(n(ae(!1)),n(oe(!1)));var e="is-pc",t=new(Tu())(window.navigator.userAgent);t.mobile()?(e="is-mobile ",n(Q("mobile"))):t.tablet()&&(e="is-tablet ",n(Q("tablet")));var r=t.os();"AndroidOS"===r?e+="is-android":"iOS"!==r&&"iPadOS"!==r||(e+="is-ios"),i(e);var o=window.matchMedia("(orientation: portrait)");o.matches&&c("portrait-device"),o.addEventListener("change",(function(e){e.matches?c("portrait-device"):c("landscape-device")}))}),[]),(0,a.useEffect)((function(){p()}),[null===e||void 0===e?void 0:e.state]);var p=function(){var e=t.current;e&&f("".concat(e.clientHeight,"px"))};return{deviceClass:o,orientationClass:l,screenHeight:d}};var Ru=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Fu=function(){var e=Ru((0,a.useState)(!1),2),t=e[0],n=e[1];(0,a.useEffect)((function(){var e=function(){n(!0)},t=function(){n(!1)};return window.addEventListener("blur",e,!1),window.addEventListener("focus",t,!1),function(){window.removeEventListener("blur",e),window.removeEventListener("focus",t)}}),[]),(0,a.useEffect)((function(){var e,t;"undefined"!==typeof document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==typeof document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange");var r=function(){document[e]?n(!0):n(!1)};return"undefined"===typeof document.addEventListener&&void 0===e||document.addEventListener(t,r,!1),function(){"undefined"===typeof document.addEventListener&&void 0===e||document.removeEventListener(t,r)}}),[]),(0,a.useEffect)((function(){var e,n,r,o,a=at.getState().session,i={type:oo.SYSTEM,room_sid:a.currentRoom.sid,message_id:"",body:{type:ao.USER_VISIBILITY_CHANGE,from:{sid:null!==(n=null===(e=a.currentUser)||void 0===e?void 0:e.sid)&&void 0!==n?n:"",userId:null!==(o=null===(r=a.currentUser)||void 0===r?void 0:r.userId)&&void 0!==o?o:""},msg:t?"hidden":"visible"}};Ti(JSON.stringify(i))}),[t])};var Iu=function(){return Iu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Iu.apply(this,arguments)},Ou=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Mu=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Du=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Uu=function(){var e=it(),t=(0,a.useRef)(null),n=(0,lt.$)().t,r=Du((0,a.useState)(!0),2),i=r[0],s=r[1],l=Du((0,a.useState)(!1),2),c=l[0],u=l[1],d=Du((0,a.useState)("participant"),2),f=d[0],p=d[1],m=Du((0,a.useState)(""),2),h=m[0],v=m[1];Nn();var y=yu(),b=y.error,x=y.setError,g=y.roomConnectionStatus,w=y.setRoomConnectionStatus,S=y.currentRoom,_=y.audioSubscribers,j=y.videoSubscribers,k=y.screenShareTracks,N=y.startLivekitConnection;Nu(S),Cu(),Fu();var C=Au(S,t),E=C.deviceClass,T=C.orientationClass,P=C.screenHeight;(0,a.useEffect)((function(){var t,r=new URLSearchParams(window.location.search),o=Object.fromEntries(r.entries());if("undefined"===typeof o.access_token)s(!1),x({title:n("app.token-missing-title"),text:n("app.token-missing-des")});else{S||(w("checking"),t=setTimeout((function(){Ou(void 0,void 0,void 0,(function(){var t;return Mu(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,ro("verifyToken",{is_production:!0})];case 1:return t=r.sent(),[3,3];case 2:return r.sent(),w("ready"),s(!1),x({title:n("app.verification-failed-title"),text:n("app.token-not-valid")}),[2];case 3:return w("ready"),s(!1),t.status?(e(I(o.access_token)),v(t.token)):x({title:n("app.verification-failed-title"),text:n(t.msg)}),[2]}}))}))}),300))}return function(){t&&clearTimeout(t)}}),[n,e,S,x,w]),(0,a.useEffect)((function(){s("connecting"===g||"re-connecting"===g||"checking"===g)}),[g]),(0,a.useEffect)((function(){var e,t;S&&("RECORDER_BOT"!==S.localParticipant.identity&&"RTMP_BOT"!==S.localParticipant.identity||u(!0),(null===(t=null===(e=at.getState().session.currentUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin)&&p("admin"))}),[S]);var A=function(){N(h)};return(0,o.jsx)("div",Iu({className:"".concat(T," ").concat(E," ").concat(f),style:{height:P}},{children:i?(0,o.jsx)(ft,{text:n("app."+g)}):b&&!i?(0,o.jsx)(ut,{title:b.title,text:b.text}):"connected"===(null===S||void 0===S?void 0:S.state)?S?(0,o.jsxs)("div",Iu({className:"plugNmeet-app overflow-hidden",ref:t},{children:[c?null:(0,o.jsx)(Ka,{currentRoom:S}),(0,o.jsx)(Yc,{currentRoom:S,audioSubscribers:_,videoSubscribers:j,screenShareTracks:k,isRecorder:c}),(0,o.jsx)(wa,{currentRoom:S,isRecorder:c}),(0,o.jsx)(Su,{})]})):null:"ready"===g?(0,o.jsx)(eu,{onCloseModal:A}):null}))};var Lu=function(){return Lu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Lu.apply(this,arguments)},Bu=document.getElementById("plugNmeet-app");(0,i.s)(Bu).render((0,o.jsx)(a.StrictMode,{children:(0,o.jsxs)(s.zt,Lu({store:at},{children:[(0,o.jsx)(a.Suspense,Lu({fallback:(0,o.jsx)(ft,{text:""})},{children:(0,o.jsx)(Uu,{})})),(0,o.jsx)(l.Ix,{})]}))}))},75410:()=>{},48628:()=>{},55778:()=>{},73908:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{}},e=>{e.O(0,[736],(()=>{return t=48456,e(e.s=t);var t}));e.O()}]);